{"ast":null,"code":"var _jsxFileName = \"/Volumes/evo970/lou/madDex-master/src/views/Pools/components/BountyModal.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo, useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport { useWeb3React } from '@web3-react/core';\nimport styled from 'styled-components';\nimport { Modal, Text, Flex, Button, HelpIcon, AutoRenewIcon, useTooltip } from '@pancakeswap/uikit';\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport { useCakeVaultContract } from 'hooks/useContract';\nimport useTheme from 'hooks/useTheme';\nimport useToast from 'hooks/useToast';\nimport { useTranslation } from 'contexts/Localization';\nimport ConnectWalletButton from 'components/ConnectWalletButton';\nimport { ToastDescriptionWithTx } from 'components/Toast';\nimport Balance from 'components/Balance';\nimport { usePriceCakeBusd } from 'state/farms/hooks';\nimport { useCakeVault } from 'state/pools/hooks';\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Divider = styled.div`\n  background-color: ${({\n  theme\n}) => theme.colors.backgroundDisabled};\n  height: 1px;\n  margin: 16px auto;\n  width: 100%;\n`;\n_c = Divider;\n\nconst BountyModal = ({\n  onDismiss,\n  TooltipComponent\n}) => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useWeb3React();\n  const {\n    theme\n  } = useTheme();\n  const {\n    toastError,\n    toastSuccess\n  } = useToast();\n  const cakeVaultContract = useCakeVaultContract();\n  const [pendingTx, setPendingTx] = useState(false);\n  const {\n    estimatedCakeBountyReward,\n    totalPendingCakeHarvest,\n    fees: {\n      callFee\n    }\n  } = useCakeVault();\n  const {\n    callWithGasPrice\n  } = useCallWithGasPrice();\n  const cakePriceBusd = usePriceCakeBusd();\n  const callFeeAsDecimal = callFee / 100;\n  const totalYieldToDisplay = getBalanceNumber(totalPendingCakeHarvest, 18);\n  const estimatedDollarBountyReward = useMemo(() => {\n    return new BigNumber(estimatedCakeBountyReward).multipliedBy(cakePriceBusd);\n  }, [cakePriceBusd, estimatedCakeBountyReward]);\n  const hasFetchedDollarBounty = estimatedDollarBountyReward.gte(0);\n  const hasFetchedCakeBounty = estimatedCakeBountyReward ? estimatedCakeBountyReward.gte(0) : false;\n  const dollarBountyToDisplay = hasFetchedDollarBounty ? getBalanceNumber(estimatedDollarBountyReward, 18) : 0;\n  const cakeBountyToDisplay = hasFetchedCakeBounty ? getBalanceNumber(estimatedCakeBountyReward, 18) : 0;\n  const {\n    targetRef,\n    tooltip,\n    tooltipVisible\n  } = useTooltip( /*#__PURE__*/_jsxDEV(TooltipComponent, {\n    fee: callFee\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 61\n  }, this), {\n    placement: 'bottom',\n    tooltipPadding: {\n      right: 15\n    }\n  });\n\n  const handleConfirmClick = async () => {\n    setPendingTx(true);\n\n    try {\n      const tx = await callWithGasPrice(cakeVaultContract, 'harvest', undefined, {\n        gasLimit: 300000\n      });\n      const receipt = await tx.wait();\n\n      if (receipt.status) {\n        toastSuccess(t('Bounty collected!'), /*#__PURE__*/_jsxDEV(ToastDescriptionWithTx, {\n          txHash: receipt.transactionHash,\n          children: t('CAKE bounty has been sent to your wallet.')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this));\n        setPendingTx(false);\n        onDismiss();\n      }\n    } catch (error) {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));\n      setPendingTx(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: t('Claim Bounty'),\n    onDismiss: onDismiss,\n    headerBackground: theme.colors.gradients.cardHeader,\n    children: [tooltipVisible && tooltip, /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"flex-start\",\n      justifyContent: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        children: t('You’ll claim')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        flexDirection: \"column\",\n        children: [/*#__PURE__*/_jsxDEV(Balance, {\n          bold: true,\n          value: cakeBountyToDisplay,\n          decimals: 7,\n          unit: \" CAKE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"12px\",\n          color: \"textSubtle\",\n          children: /*#__PURE__*/_jsxDEV(Balance, {\n            fontSize: \"12px\",\n            color: \"textSubtle\",\n            value: dollarBountyToDisplay,\n            decimals: 2,\n            unit: \" USD\",\n            prefix: \"~\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        fontSize: \"14px\",\n        color: \"textSubtle\",\n        children: t('Pool total pending yield')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Balance, {\n        color: \"textSubtle\",\n        value: totalYieldToDisplay,\n        unit: \" CAKE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      mb: \"24px\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        fontSize: \"14px\",\n        color: \"textSubtle\",\n        children: t('Bounty')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        fontSize: \"14px\",\n        color: \"textSubtle\",\n        children: [callFeeAsDecimal, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), account ? /*#__PURE__*/_jsxDEV(Button, {\n      isLoading: pendingTx,\n      disabled: !dollarBountyToDisplay || !cakeBountyToDisplay || !callFee,\n      endIcon: pendingTx ? /*#__PURE__*/_jsxDEV(AutoRenewIcon, {\n        spin: true,\n        color: \"currentColor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 32\n      }, this) : null,\n      onClick: handleConfirmClick,\n      mb: \"28px\",\n      id: \"autoCakeConfirmBounty\",\n      children: pendingTx ? t('Confirming') : t('Confirm')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(ConnectWalletButton, {\n      mb: \"28px\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        fontSize: \"16px\",\n        bold: true,\n        color: \"textSubtle\",\n        mr: \"4px\",\n        children: t('What’s this?')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        ref: targetRef,\n        children: /*#__PURE__*/_jsxDEV(HelpIcon, {\n          color: \"textSubtle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BountyModal, \"nNew6Noo7HeuT+ErZ7jgx0Zltxo=\", false, function () {\n  return [useTranslation, useWeb3React, useTheme, useToast, useCakeVaultContract, useCakeVault, useCallWithGasPrice, usePriceCakeBusd, useTooltip];\n});\n\n_c2 = BountyModal;\nexport default BountyModal;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Divider\");\n$RefreshReg$(_c2, \"BountyModal\");","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Pools/components/BountyModal.tsx"],"names":["React","useMemo","useState","BigNumber","useWeb3React","styled","Modal","Text","Flex","Button","HelpIcon","AutoRenewIcon","useTooltip","getBalanceNumber","useCakeVaultContract","useTheme","useToast","useTranslation","ConnectWalletButton","ToastDescriptionWithTx","Balance","usePriceCakeBusd","useCakeVault","useCallWithGasPrice","Divider","div","theme","colors","backgroundDisabled","BountyModal","onDismiss","TooltipComponent","t","account","toastError","toastSuccess","cakeVaultContract","pendingTx","setPendingTx","estimatedCakeBountyReward","totalPendingCakeHarvest","fees","callFee","callWithGasPrice","cakePriceBusd","callFeeAsDecimal","totalYieldToDisplay","estimatedDollarBountyReward","multipliedBy","hasFetchedDollarBounty","gte","hasFetchedCakeBounty","dollarBountyToDisplay","cakeBountyToDisplay","targetRef","tooltip","tooltipVisible","placement","tooltipPadding","right","handleConfirmClick","tx","undefined","gasLimit","receipt","wait","status","transactionHash","error","gradients","cardHeader"],"mappings":"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","sourcesContent":["import React, { useMemo, useState } from 'react'\nimport BigNumber from 'bignumber.js'\nimport { useWeb3React } from '@web3-react/core'\nimport styled from 'styled-components'\nimport { Modal, Text, Flex, Button, HelpIcon, AutoRenewIcon, useTooltip } from '@pancakeswap/uikit'\nimport { getBalanceNumber } from 'utils/formatBalance'\nimport { useCakeVaultContract } from 'hooks/useContract'\nimport useTheme from 'hooks/useTheme'\nimport useToast from 'hooks/useToast'\nimport { useTranslation } from 'contexts/Localization'\nimport ConnectWalletButton from 'components/ConnectWalletButton'\nimport { ToastDescriptionWithTx } from 'components/Toast'\nimport Balance from 'components/Balance'\nimport { usePriceCakeBusd } from 'state/farms/hooks'\nimport { useCakeVault } from 'state/pools/hooks'\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\n\ninterface BountyModalProps {\n  onDismiss?: () => void\n  TooltipComponent: React.ElementType\n}\n\nconst Divider = styled.div`\n  background-color: ${({ theme }) => theme.colors.backgroundDisabled};\n  height: 1px;\n  margin: 16px auto;\n  width: 100%;\n`\n\nconst BountyModal: React.FC<BountyModalProps> = ({ onDismiss, TooltipComponent }) => {\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const { theme } = useTheme()\n  const { toastError, toastSuccess } = useToast()\n  const cakeVaultContract = useCakeVaultContract()\n  const [pendingTx, setPendingTx] = useState(false)\n  const {\n    estimatedCakeBountyReward,\n    totalPendingCakeHarvest,\n    fees: { callFee },\n  } = useCakeVault()\n  const { callWithGasPrice } = useCallWithGasPrice()\n  const cakePriceBusd = usePriceCakeBusd()\n  const callFeeAsDecimal = callFee / 100\n  const totalYieldToDisplay = getBalanceNumber(totalPendingCakeHarvest, 18)\n\n  const estimatedDollarBountyReward = useMemo(() => {\n    return new BigNumber(estimatedCakeBountyReward).multipliedBy(cakePriceBusd)\n  }, [cakePriceBusd, estimatedCakeBountyReward])\n\n  const hasFetchedDollarBounty = estimatedDollarBountyReward.gte(0)\n  const hasFetchedCakeBounty = estimatedCakeBountyReward ? estimatedCakeBountyReward.gte(0) : false\n  const dollarBountyToDisplay = hasFetchedDollarBounty ? getBalanceNumber(estimatedDollarBountyReward, 18) : 0\n  const cakeBountyToDisplay = hasFetchedCakeBounty ? getBalanceNumber(estimatedCakeBountyReward, 18) : 0\n\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(<TooltipComponent fee={callFee} />, {\n    placement: 'bottom',\n    tooltipPadding: { right: 15 },\n  })\n\n  const handleConfirmClick = async () => {\n    setPendingTx(true)\n    try {\n      const tx = await callWithGasPrice(cakeVaultContract, 'harvest', undefined, { gasLimit: 300000 })\n      const receipt = await tx.wait()\n      if (receipt.status) {\n        toastSuccess(\n          t('Bounty collected!'),\n          <ToastDescriptionWithTx txHash={receipt.transactionHash}>\n            {t('CAKE bounty has been sent to your wallet.')}\n          </ToastDescriptionWithTx>,\n        )\n        setPendingTx(false)\n        onDismiss()\n      }\n    } catch (error) {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\n      setPendingTx(false)\n    }\n  }\n\n  return (\n    <Modal title={t('Claim Bounty')} onDismiss={onDismiss} headerBackground={theme.colors.gradients.cardHeader}>\n      {tooltipVisible && tooltip}\n      <Flex alignItems=\"flex-start\" justifyContent=\"space-between\">\n        <Text>{t('You’ll claim')}</Text>\n        <Flex flexDirection=\"column\">\n          <Balance bold value={cakeBountyToDisplay} decimals={7} unit=\" CAKE\" />\n          <Text fontSize=\"12px\" color=\"textSubtle\">\n            <Balance\n              fontSize=\"12px\"\n              color=\"textSubtle\"\n              value={dollarBountyToDisplay}\n              decimals={2}\n              unit=\" USD\"\n              prefix=\"~\"\n            />\n          </Text>\n        </Flex>\n      </Flex>\n      <Divider />\n      <Flex alignItems=\"center\" justifyContent=\"space-between\">\n        <Text fontSize=\"14px\" color=\"textSubtle\">\n          {t('Pool total pending yield')}\n        </Text>\n        <Balance color=\"textSubtle\" value={totalYieldToDisplay} unit=\" CAKE\" />\n      </Flex>\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"24px\">\n        <Text fontSize=\"14px\" color=\"textSubtle\">\n          {t('Bounty')}\n        </Text>\n        <Text fontSize=\"14px\" color=\"textSubtle\">\n          {callFeeAsDecimal}%\n        </Text>\n      </Flex>\n      {account ? (\n        <Button\n          isLoading={pendingTx}\n          disabled={!dollarBountyToDisplay || !cakeBountyToDisplay || !callFee}\n          endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\n          onClick={handleConfirmClick}\n          mb=\"28px\"\n          id=\"autoCakeConfirmBounty\"\n        >\n          {pendingTx ? t('Confirming') : t('Confirm')}\n        </Button>\n      ) : (\n        <ConnectWalletButton mb=\"28px\" />\n      )}\n      <Flex justifyContent=\"center\" alignItems=\"center\">\n        <Text fontSize=\"16px\" bold color=\"textSubtle\" mr=\"4px\">\n          {t('What’s this?')}\n        </Text>\n        <span ref={targetRef}>\n          <HelpIcon color=\"textSubtle\" />\n        </span>\n      </Flex>\n    </Modal>\n  )\n}\n\nexport default BountyModal\n"]},"metadata":{},"sourceType":"module"}