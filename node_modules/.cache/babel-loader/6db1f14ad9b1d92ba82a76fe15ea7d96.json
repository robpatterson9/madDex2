{"ast":null,"code":"var _jsxFileName = \"/Volumes/evo970/lou/madDex-master/src/views/Pools/hooks/useApprove.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { ethers } from 'ethers';\nimport { useAppDispatch } from 'state';\nimport { updateUserAllowance } from 'state/actions';\nimport { useTranslation } from 'contexts/Localization';\nimport { useCake, useSousChef, useCakeVaultContract } from 'hooks/useContract';\nimport useToast from 'hooks/useToast';\nimport useLastUpdated from 'hooks/useLastUpdated';\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice';\nimport { ToastDescriptionWithTx } from 'components/Toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const useApprovePool = (lpContract, sousId, earningTokenSymbol) => {\n  _s();\n\n  const [requestedApproval, setRequestedApproval] = useState(false);\n  const {\n    toastSuccess,\n    toastError\n  } = useToast();\n  const {\n    callWithGasPrice\n  } = useCallWithGasPrice();\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useAppDispatch();\n  const {\n    account\n  } = useWeb3React();\n  const sousChefContract = useSousChef(sousId);\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true);\n      const tx = await callWithGasPrice(lpContract, 'approve', [sousChefContract.address, ethers.constants.MaxUint256]);\n      const receipt = await tx.wait();\n      dispatch(updateUserAllowance(sousId, account));\n\n      if (receipt.status) {\n        toastSuccess(t('Contract Enabled'), /*#__PURE__*/_jsxDEV(ToastDescriptionWithTx, {\n          txHash: receipt.transactionHash,\n          children: t('You can now stake in the %symbol% pool!', {\n            symbol: earningTokenSymbol\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this));\n        setRequestedApproval(false);\n      } else {\n        // user rejected tx or didn't go thru\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));\n        setRequestedApproval(false);\n      }\n    } catch (e) {\n      console.error(e);\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));\n    }\n  }, [account, dispatch, lpContract, sousChefContract, sousId, earningTokenSymbol, t, toastError, toastSuccess, callWithGasPrice]);\n  return {\n    handleApprove,\n    requestedApproval\n  };\n}; // Approve CAKE auto pool\n\n_s(useApprovePool, \"X+A6ECmrnRSSl/spYPJPl+cHGek=\", false, function () {\n  return [useToast, useCallWithGasPrice, useTranslation, useAppDispatch, useWeb3React, useSousChef];\n});\n\nexport const useVaultApprove = setLastUpdated => {\n  _s2();\n\n  const [requestedApproval, setRequestedApproval] = useState(false);\n  const {\n    t\n  } = useTranslation();\n  const {\n    toastSuccess,\n    toastError\n  } = useToast();\n  const cakeVaultContract = useCakeVaultContract();\n  const {\n    callWithGasPrice\n  } = useCallWithGasPrice();\n  const cakeContract = useCake();\n\n  const handleApprove = async () => {\n    const tx = await callWithGasPrice(cakeContract, 'approve', [cakeVaultContract.address, ethers.constants.MaxUint256]);\n    setRequestedApproval(true);\n    const receipt = await tx.wait();\n\n    if (receipt.status) {\n      toastSuccess(t('Contract Enabled'), /*#__PURE__*/_jsxDEV(ToastDescriptionWithTx, {\n        txHash: receipt.transactionHash,\n        children: t('You can now stake in the %symbol% vault!', {\n          symbol: 'CAKE'\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this));\n      setLastUpdated();\n      setRequestedApproval(false);\n    } else {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));\n      setRequestedApproval(false);\n    }\n  };\n\n  return {\n    handleApprove,\n    requestedApproval\n  };\n};\n\n_s2(useVaultApprove, \"ABhrpaVjXnfEoStsQaxKg4Eh8YA=\", false, function () {\n  return [useTranslation, useToast, useCakeVaultContract, useCallWithGasPrice, useCake];\n});\n\nexport const useCheckVaultApprovalStatus = () => {\n  _s3();\n\n  const [isVaultApproved, setIsVaultApproved] = useState(false);\n  const {\n    account\n  } = useWeb3React();\n  const cakeContract = useCake();\n  const cakeVaultContract = useCakeVaultContract();\n  const {\n    lastUpdated,\n    setLastUpdated\n  } = useLastUpdated();\n  useEffect(() => {\n    const checkApprovalStatus = async () => {\n      try {\n        const currentAllowance = await cakeContract.allowance(account, cakeVaultContract.address);\n        setIsVaultApproved(currentAllowance.gt(0));\n      } catch (error) {\n        setIsVaultApproved(false);\n      }\n    };\n\n    checkApprovalStatus();\n  }, [account, cakeContract, cakeVaultContract, lastUpdated]);\n  return {\n    isVaultApproved,\n    setLastUpdated\n  };\n};\n\n_s3(useCheckVaultApprovalStatus, \"DYtHZy3b2IMwKe/ETQokUhwfsfM=\", false, function () {\n  return [useWeb3React, useCake, useCakeVaultContract, useLastUpdated];\n});","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Pools/hooks/useApprove.tsx"],"names":["React","useCallback","useEffect","useState","useWeb3React","ethers","useAppDispatch","updateUserAllowance","useTranslation","useCake","useSousChef","useCakeVaultContract","useToast","useLastUpdated","useCallWithGasPrice","ToastDescriptionWithTx","useApprovePool","lpContract","sousId","earningTokenSymbol","requestedApproval","setRequestedApproval","toastSuccess","toastError","callWithGasPrice","t","dispatch","account","sousChefContract","handleApprove","tx","address","constants","MaxUint256","receipt","wait","status","transactionHash","symbol","e","console","error","useVaultApprove","setLastUpdated","cakeVaultContract","cakeContract","useCheckVaultApprovalStatus","isVaultApproved","setIsVaultApproved","lastUpdated","checkApprovalStatus","currentAllowance","allowance","gt"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { ethers, Contract } from 'ethers'\nimport { useAppDispatch } from 'state'\nimport { updateUserAllowance } from 'state/actions'\nimport { useTranslation } from 'contexts/Localization'\nimport { useCake, useSousChef, useCakeVaultContract } from 'hooks/useContract'\nimport useToast from 'hooks/useToast'\nimport useLastUpdated from 'hooks/useLastUpdated'\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\nimport { ToastDescriptionWithTx } from 'components/Toast'\n\nexport const useApprovePool = (lpContract: Contract, sousId, earningTokenSymbol) => {\n  const [requestedApproval, setRequestedApproval] = useState(false)\n  const { toastSuccess, toastError } = useToast()\n  const { callWithGasPrice } = useCallWithGasPrice()\n  const { t } = useTranslation()\n  const dispatch = useAppDispatch()\n  const { account } = useWeb3React()\n  const sousChefContract = useSousChef(sousId)\n\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true)\n      const tx = await callWithGasPrice(lpContract, 'approve', [sousChefContract.address, ethers.constants.MaxUint256])\n      const receipt = await tx.wait()\n\n      dispatch(updateUserAllowance(sousId, account))\n      if (receipt.status) {\n        toastSuccess(\n          t('Contract Enabled'),\n          <ToastDescriptionWithTx txHash={receipt.transactionHash}>\n            {t('You can now stake in the %symbol% pool!', { symbol: earningTokenSymbol })}\n          </ToastDescriptionWithTx>,\n        )\n        setRequestedApproval(false)\n      } else {\n        // user rejected tx or didn't go thru\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\n        setRequestedApproval(false)\n      }\n    } catch (e) {\n      console.error(e)\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\n    }\n  }, [\n    account,\n    dispatch,\n    lpContract,\n    sousChefContract,\n    sousId,\n    earningTokenSymbol,\n    t,\n    toastError,\n    toastSuccess,\n    callWithGasPrice,\n  ])\n\n  return { handleApprove, requestedApproval }\n}\n\n// Approve CAKE auto pool\nexport const useVaultApprove = (setLastUpdated: () => void) => {\n  const [requestedApproval, setRequestedApproval] = useState(false)\n  const { t } = useTranslation()\n  const { toastSuccess, toastError } = useToast()\n  const cakeVaultContract = useCakeVaultContract()\n  const { callWithGasPrice } = useCallWithGasPrice()\n  const cakeContract = useCake()\n\n  const handleApprove = async () => {\n    const tx = await callWithGasPrice(cakeContract, 'approve', [cakeVaultContract.address, ethers.constants.MaxUint256])\n    setRequestedApproval(true)\n    const receipt = await tx.wait()\n    if (receipt.status) {\n      toastSuccess(\n        t('Contract Enabled'),\n        <ToastDescriptionWithTx txHash={receipt.transactionHash}>\n          {t('You can now stake in the %symbol% vault!', { symbol: 'CAKE' })}\n        </ToastDescriptionWithTx>,\n      )\n      setLastUpdated()\n      setRequestedApproval(false)\n    } else {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\n      setRequestedApproval(false)\n    }\n  }\n\n  return { handleApprove, requestedApproval }\n}\n\nexport const useCheckVaultApprovalStatus = () => {\n  const [isVaultApproved, setIsVaultApproved] = useState(false)\n  const { account } = useWeb3React()\n  const cakeContract = useCake()\n  const cakeVaultContract = useCakeVaultContract()\n  const { lastUpdated, setLastUpdated } = useLastUpdated()\n  useEffect(() => {\n    const checkApprovalStatus = async () => {\n      try {\n        const currentAllowance = await cakeContract.allowance(account, cakeVaultContract.address)\n        setIsVaultApproved(currentAllowance.gt(0))\n      } catch (error) {\n        setIsVaultApproved(false)\n      }\n    }\n\n    checkApprovalStatus()\n  }, [account, cakeContract, cakeVaultContract, lastUpdated])\n\n  return { isVaultApproved, setLastUpdated }\n}\n"]},"metadata":{},"sourceType":"module"}