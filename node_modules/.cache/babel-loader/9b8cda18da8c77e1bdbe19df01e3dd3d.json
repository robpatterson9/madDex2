{"ast":null,"code":"import _toConsumableArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{format,parseISO,isValid}from'date-fns';import{MINIMUM_CHOICES}from'./Choices';export var combineDateAndTime=function combineDateAndTime(date,time){if(!isValid(date)||!isValid(time)){return null;}var dateStr=format(date,'yyyy-MM-dd');var timeStr=format(time,'HH:mm:ss');return parseISO(\"\".concat(dateStr,\"T\").concat(timeStr)).getTime()/1e3;};export var getFormErrors=function getFormErrors(formData,t){var name=formData.name,body=formData.body,choices=formData.choices,startDate=formData.startDate,startTime=formData.startTime,endDate=formData.endDate,endTime=formData.endTime,snapshot=formData.snapshot;var errors={};if(!name){errors.name=[t('%field% is required',{field:'Title'})];}if(!body){errors.body=[t('%field% is required',{field:'Body'})];}if(choices.length<MINIMUM_CHOICES){errors.choices=[t('Please create a minimum of %num% choices',{num:MINIMUM_CHOICES})];}var hasEmptyChoice=choices.some(function(choice){return!choice.value;});if(choices.length===MINIMUM_CHOICES&&hasEmptyChoice){errors.choices=Array.isArray(errors.choices)?[].concat(_toConsumableArray(errors.choices),[t('Choices must not be empty')]):errors.choices=[t('Choices must not be empty')];}if(!isValid(startDate)){errors.startDate=[t('Please select a valid date')];}if(!isValid(startTime)){errors.startTime=[t('Please select a valid time')];}if(!isValid(endDate)){errors.endDate=[t('Please select a valid date')];}if(!isValid(endTime)){errors.endTime=[t('Please select a valid time')];}var startDateTimestamp=combineDateAndTime(startDate,startTime);var endDateTimestamp=combineDateAndTime(endDate,endTime);if(endDateTimestamp<startDateTimestamp){errors.endDate=Array.isArray(errors.endDate)?[].concat(_toConsumableArray(errors.endDate),[t('End date must be after the start date')]):errors.endDate=[t('End date must be after the start date')];}if(snapshot===0){errors.snapshot=[t('Invalid snapshot')];}return errors;};","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Voting/CreateProposal/helpers.ts"],"names":["format","parseISO","isValid","MINIMUM_CHOICES","combineDateAndTime","date","time","dateStr","timeStr","getTime","getFormErrors","formData","t","name","body","choices","startDate","startTime","endDate","endTime","snapshot","errors","field","length","num","hasEmptyChoice","some","choice","value","Array","isArray","startDateTimestamp","endDateTimestamp"],"mappings":"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","sourcesContent":["import { ContextApi } from 'contexts/Localization/types'\nimport { format, parseISO, isValid } from 'date-fns'\nimport { MINIMUM_CHOICES } from './Choices'\nimport { FormState } from './types'\n\nexport const combineDateAndTime = (date: Date, time: Date) => {\n  if (!isValid(date) || !isValid(time)) {\n    return null\n  }\n\n  const dateStr = format(date, 'yyyy-MM-dd')\n  const timeStr = format(time, 'HH:mm:ss')\n\n  return parseISO(`${dateStr}T${timeStr}`).getTime() / 1e3\n}\n\nexport const getFormErrors = (formData: FormState, t: ContextApi['t']) => {\n  const { name, body, choices, startDate, startTime, endDate, endTime, snapshot } = formData\n  const errors: { [key: string]: string[] } = {}\n\n  if (!name) {\n    errors.name = [t('%field% is required', { field: 'Title' })]\n  }\n\n  if (!body) {\n    errors.body = [t('%field% is required', { field: 'Body' })]\n  }\n\n  if (choices.length < MINIMUM_CHOICES) {\n    errors.choices = [t('Please create a minimum of %num% choices', { num: MINIMUM_CHOICES })]\n  }\n\n  const hasEmptyChoice = choices.some((choice) => !choice.value)\n  if (choices.length === MINIMUM_CHOICES && hasEmptyChoice) {\n    errors.choices = Array.isArray(errors.choices)\n      ? [...errors.choices, t('Choices must not be empty')]\n      : (errors.choices = [t('Choices must not be empty')])\n  }\n\n  if (!isValid(startDate)) {\n    errors.startDate = [t('Please select a valid date')]\n  }\n\n  if (!isValid(startTime)) {\n    errors.startTime = [t('Please select a valid time')]\n  }\n\n  if (!isValid(endDate)) {\n    errors.endDate = [t('Please select a valid date')]\n  }\n\n  if (!isValid(endTime)) {\n    errors.endTime = [t('Please select a valid time')]\n  }\n\n  const startDateTimestamp = combineDateAndTime(startDate, startTime)\n  const endDateTimestamp = combineDateAndTime(endDate, endTime)\n\n  if (endDateTimestamp < startDateTimestamp) {\n    errors.endDate = Array.isArray(errors.endDate)\n      ? [...errors.endDate, t('End date must be after the start date')]\n      : (errors.endDate = [t('End date must be after the start date')])\n  }\n\n  if (snapshot === 0) {\n    errors.snapshot = [t('Invalid snapshot')]\n  }\n\n  return errors\n}\n"]},"metadata":{},"sourceType":"module"}