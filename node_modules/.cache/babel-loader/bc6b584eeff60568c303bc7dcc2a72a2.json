{"ast":null,"code":"var _jsxFileName = \"/Volumes/evo970/lou/madDex-master/src/components/RoiCalculatorModal/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Modal, Text, Button, Flex, ButtonMenu, Checkbox, BalanceInput, HelpIcon, ButtonMenuItem, useTooltip } from '@pancakeswap/uikit';\nimport { useTranslation } from 'contexts/Localization';\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport useActiveWeb3React from 'hooks/useActiveWeb3React';\nimport RoiCalculatorFooter from './RoiCalculatorFooter';\nimport RoiCard from './RoiCard';\nimport useRoiCalculatorReducer, { CalculatorMode, EditingCurrency } from './useRoiCalculatorReducer';\nimport AnimatedArrow from './AnimatedArrow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledModal = styled(Modal)`\n  width: 345px;\n  & > :nth-child(2) {\n    padding: 0;\n  }\n`;\n_c = StyledModal;\nconst ScrollableContainer = styled.div`\n  padding: 24px;\n  max-height: 500px;\n  overflow-y: auto;\n  ${({\n  theme\n}) => theme.mediaQueries.sm} {\n    max-height: none;\n  }\n`;\n_c2 = ScrollableContainer;\nconst FullWidthButtonMenu = styled(ButtonMenu)`\n  width: 100%;\n\n  & > button {\n    width: 100%;\n  }\n\n  opacity: ${({\n  disabled\n}) => disabled ? 0.5 : 1};\n`;\n_c3 = FullWidthButtonMenu;\n\nconst RoiCalculatorModal = ({\n  onDismiss,\n  onBack,\n  earningTokenPrice,\n  apr,\n  displayApr,\n  linkLabel,\n  linkHref,\n  stakingTokenBalance,\n  stakingTokenSymbol,\n  stakingTokenPrice,\n  multiplier,\n  initialValue,\n  earningTokenSymbol = 'CAKE',\n  autoCompoundFrequency = 0,\n  performanceFee = 0,\n  isFarm = false\n}) => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useActiveWeb3React();\n  const balanceInputRef = useRef(null);\n  const {\n    state,\n    setPrincipalFromUSDValue,\n    setPrincipalFromTokenValue,\n    setStakingDuration,\n    toggleCompounding,\n    toggleEditingCurrency,\n    setCompoundingFrequency,\n    setCalculatorMode,\n    setTargetRoi\n  } = useRoiCalculatorReducer(stakingTokenPrice, earningTokenPrice, apr, autoCompoundFrequency, performanceFee);\n  const {\n    compounding,\n    activeCompoundingIndex,\n    stakingDuration,\n    editingCurrency\n  } = state.controls;\n  const {\n    principalAsUSD,\n    principalAsToken\n  } = state.data; // Auto-focus input on opening modal\n\n  useEffect(() => {\n    if (balanceInputRef.current) {\n      balanceInputRef.current.focus();\n    }\n  }, []); // If user comes to calculator from staking modal - initialize with whatever they put in there\n\n  useEffect(() => {\n    if (initialValue) {\n      setPrincipalFromTokenValue(initialValue);\n    }\n  }, [initialValue, setPrincipalFromTokenValue]);\n  const {\n    targetRef,\n    tooltip,\n    tooltipVisible\n  } = useTooltip(isFarm ? t('“My Balance” here includes both LP Tokens in your wallet, and LP Tokens already staked in this farm.') : t('“My Balance” here includes both %assetSymbol% in your wallet, and %assetSymbol% already staked in this pool.', {\n    assetSymbol: stakingTokenSymbol\n  }), {\n    placement: 'top-end',\n    tooltipOffset: [20, 10]\n  });\n\n  const onBalanceFocus = () => {\n    setCalculatorMode(CalculatorMode.ROI_BASED_ON_PRINCIPAL);\n  };\n\n  const editingUnit = editingCurrency === EditingCurrency.TOKEN ? stakingTokenSymbol : 'USD';\n  const editingValue = editingCurrency === EditingCurrency.TOKEN ? principalAsToken : principalAsUSD;\n  const conversionUnit = editingCurrency === EditingCurrency.TOKEN ? 'USD' : stakingTokenSymbol;\n  const conversionValue = editingCurrency === EditingCurrency.TOKEN ? principalAsUSD : principalAsToken;\n  const onUserInput = editingCurrency === EditingCurrency.TOKEN ? setPrincipalFromTokenValue : setPrincipalFromUSDValue;\n  return /*#__PURE__*/_jsxDEV(StyledModal, {\n    title: t('ROI Calculator'),\n    onDismiss: onBack || onDismiss,\n    onBack: onBack !== null && onBack !== void 0 ? onBack : null,\n    headerBackground: \"gradients.cardHeader\",\n    children: [/*#__PURE__*/_jsxDEV(ScrollableContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        flexDirection: \"column\",\n        mb: \"8px\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          color: \"secondary\",\n          bold: true,\n          fontSize: \"12px\",\n          textTransform: \"uppercase\",\n          children: t('%asset% staked', {\n            asset: stakingTokenSymbol\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BalanceInput, {\n          currencyValue: `${conversionValue} ${conversionUnit}`,\n          innerRef: balanceInputRef,\n          placeholder: \"0.00\",\n          value: editingValue,\n          unit: editingUnit,\n          onUserInput: onUserInput,\n          switchEditingUnits: toggleEditingCurrency,\n          onFocus: onBalanceFocus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          justifyContent: \"space-between\",\n          mt: \"8px\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            scale: \"xs\",\n            p: \"4px 16px\",\n            width: \"68px\",\n            variant: \"tertiary\",\n            onClick: () => setPrincipalFromUSDValue('100'),\n            children: \"$100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            scale: \"xs\",\n            p: \"4px 16px\",\n            width: \"68px\",\n            variant: \"tertiary\",\n            onClick: () => setPrincipalFromUSDValue('1000'),\n            children: \"$1000\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            disabled: stakingTokenBalance.lte(0) || !account,\n            scale: \"xs\",\n            p: \"4px 16px\",\n            width: \"128px\",\n            variant: \"tertiary\",\n            onClick: () => setPrincipalFromUSDValue(getBalanceNumber(stakingTokenBalance.times(stakingTokenPrice)).toString()),\n            children: t('My Balance').toLocaleUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            ref: targetRef,\n            children: /*#__PURE__*/_jsxDEV(HelpIcon, {\n              width: \"16px\",\n              height: \"16px\",\n              color: \"textSubtle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), tooltipVisible && tooltip]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          mt: \"24px\",\n          color: \"secondary\",\n          bold: true,\n          fontSize: \"12px\",\n          textTransform: \"uppercase\",\n          children: t('Staked for')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FullWidthButtonMenu, {\n          activeIndex: stakingDuration,\n          onItemClick: setStakingDuration,\n          scale: \"sm\",\n          children: [/*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('1D')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('7D')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('30D')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('1Y')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('5Y')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), autoCompoundFrequency === 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            mt: \"24px\",\n            color: \"secondary\",\n            bold: true,\n            fontSize: \"12px\",\n            textTransform: \"uppercase\",\n            children: t('Compounding every')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            alignItems: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(Flex, {\n              flex: \"1\",\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                scale: \"sm\",\n                checked: compounding,\n                onChange: toggleCompounding\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Flex, {\n              flex: \"6\",\n              children: /*#__PURE__*/_jsxDEV(FullWidthButtonMenu, {\n                disabled: !compounding,\n                activeIndex: activeCompoundingIndex,\n                onItemClick: setCompoundingFrequency,\n                scale: \"sm\",\n                children: [/*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n                  children: t('1D')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n                  children: t('7D')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n                  children: t('14D')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n                  children: t('30D')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnimatedArrow, {\n        calculatorState: state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        children: /*#__PURE__*/_jsxDEV(RoiCard, {\n          earningTokenSymbol: earningTokenSymbol,\n          calculatorState: state,\n          setTargetRoi: setTargetRoi,\n          setCalculatorMode: setCalculatorMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RoiCalculatorFooter, {\n      isFarm: isFarm,\n      apr: apr,\n      displayApr: displayApr,\n      autoCompoundFrequency: autoCompoundFrequency,\n      multiplier: multiplier,\n      linkLabel: linkLabel,\n      linkHref: linkHref,\n      performanceFee: performanceFee\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RoiCalculatorModal, \"O5+WE9BJUVJqCUjlcbroxaAYfoU=\", false, function () {\n  return [useTranslation, useActiveWeb3React, useRoiCalculatorReducer, useTooltip];\n});\n\n_c4 = RoiCalculatorModal;\nexport default RoiCalculatorModal;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"StyledModal\");\n$RefreshReg$(_c2, \"ScrollableContainer\");\n$RefreshReg$(_c3, \"FullWidthButtonMenu\");\n$RefreshReg$(_c4, \"RoiCalculatorModal\");","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/components/RoiCalculatorModal/index.tsx"],"names":["React","useRef","useEffect","styled","Modal","Text","Button","Flex","ButtonMenu","Checkbox","BalanceInput","HelpIcon","ButtonMenuItem","useTooltip","useTranslation","getBalanceNumber","useActiveWeb3React","RoiCalculatorFooter","RoiCard","useRoiCalculatorReducer","CalculatorMode","EditingCurrency","AnimatedArrow","StyledModal","ScrollableContainer","div","theme","mediaQueries","sm","FullWidthButtonMenu","disabled","RoiCalculatorModal","onDismiss","onBack","earningTokenPrice","apr","displayApr","linkLabel","linkHref","stakingTokenBalance","stakingTokenSymbol","stakingTokenPrice","multiplier","initialValue","earningTokenSymbol","autoCompoundFrequency","performanceFee","isFarm","t","account","balanceInputRef","state","setPrincipalFromUSDValue","setPrincipalFromTokenValue","setStakingDuration","toggleCompounding","toggleEditingCurrency","setCompoundingFrequency","setCalculatorMode","setTargetRoi","compounding","activeCompoundingIndex","stakingDuration","editingCurrency","controls","principalAsUSD","principalAsToken","data","current","focus","targetRef","tooltip","tooltipVisible","assetSymbol","placement","tooltipOffset","onBalanceFocus","ROI_BASED_ON_PRINCIPAL","editingUnit","TOKEN","editingValue","conversionUnit","conversionValue","onUserInput","asset","lte","times","toString","toLocaleUpperCase"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react'\nimport styled from 'styled-components'\nimport {\n  Modal,\n  Text,\n  Button,\n  Flex,\n  ButtonMenu,\n  Checkbox,\n  BalanceInput,\n  HelpIcon,\n  ButtonMenuItem,\n  useTooltip,\n} from '@pancakeswap/uikit'\nimport BigNumber from 'bignumber.js'\nimport { useTranslation } from 'contexts/Localization'\nimport { getBalanceNumber } from 'utils/formatBalance'\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\nimport RoiCalculatorFooter from './RoiCalculatorFooter'\nimport RoiCard from './RoiCard'\nimport useRoiCalculatorReducer, { CalculatorMode, EditingCurrency } from './useRoiCalculatorReducer'\nimport AnimatedArrow from './AnimatedArrow'\n\ninterface RoiCalculatorModalProps {\n  onDismiss?: () => void\n  onBack?: () => void\n  earningTokenPrice: number\n  apr: number\n  displayApr?: string\n  linkLabel: string\n  linkHref: string\n  stakingTokenBalance: BigNumber\n  stakingTokenSymbol: string\n  stakingTokenPrice: number\n  earningTokenSymbol?: string\n  multiplier?: string\n  autoCompoundFrequency?: number\n  performanceFee?: number\n  isFarm?: boolean\n  initialValue?: string\n}\n\nconst StyledModal = styled(Modal)`\n  width: 345px;\n  & > :nth-child(2) {\n    padding: 0;\n  }\n`\n\nconst ScrollableContainer = styled.div`\n  padding: 24px;\n  max-height: 500px;\n  overflow-y: auto;\n  ${({ theme }) => theme.mediaQueries.sm} {\n    max-height: none;\n  }\n`\n\nconst FullWidthButtonMenu = styled(ButtonMenu)<{ disabled?: boolean }>`\n  width: 100%;\n\n  & > button {\n    width: 100%;\n  }\n\n  opacity: ${({ disabled }) => (disabled ? 0.5 : 1)};\n`\n\nconst RoiCalculatorModal: React.FC<RoiCalculatorModalProps> = ({\n  onDismiss,\n  onBack,\n  earningTokenPrice,\n  apr,\n  displayApr,\n  linkLabel,\n  linkHref,\n  stakingTokenBalance,\n  stakingTokenSymbol,\n  stakingTokenPrice,\n  multiplier,\n  initialValue,\n  earningTokenSymbol = 'CAKE',\n  autoCompoundFrequency = 0,\n  performanceFee = 0,\n  isFarm = false,\n}) => {\n  const { t } = useTranslation()\n  const { account } = useActiveWeb3React()\n  const balanceInputRef = useRef<HTMLInputElement | null>(null)\n\n  const {\n    state,\n    setPrincipalFromUSDValue,\n    setPrincipalFromTokenValue,\n    setStakingDuration,\n    toggleCompounding,\n    toggleEditingCurrency,\n    setCompoundingFrequency,\n    setCalculatorMode,\n    setTargetRoi,\n  } = useRoiCalculatorReducer(stakingTokenPrice, earningTokenPrice, apr, autoCompoundFrequency, performanceFee)\n\n  const { compounding, activeCompoundingIndex, stakingDuration, editingCurrency } = state.controls\n  const { principalAsUSD, principalAsToken } = state.data\n\n  // Auto-focus input on opening modal\n  useEffect(() => {\n    if (balanceInputRef.current) {\n      balanceInputRef.current.focus()\n    }\n  }, [])\n\n  // If user comes to calculator from staking modal - initialize with whatever they put in there\n  useEffect(() => {\n    if (initialValue) {\n      setPrincipalFromTokenValue(initialValue)\n    }\n  }, [initialValue, setPrincipalFromTokenValue])\n\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\n    isFarm\n      ? t('“My Balance” here includes both LP Tokens in your wallet, and LP Tokens already staked in this farm.')\n      : t(\n          '“My Balance” here includes both %assetSymbol% in your wallet, and %assetSymbol% already staked in this pool.',\n          { assetSymbol: stakingTokenSymbol },\n        ),\n    { placement: 'top-end', tooltipOffset: [20, 10] },\n  )\n\n  const onBalanceFocus = () => {\n    setCalculatorMode(CalculatorMode.ROI_BASED_ON_PRINCIPAL)\n  }\n\n  const editingUnit = editingCurrency === EditingCurrency.TOKEN ? stakingTokenSymbol : 'USD'\n  const editingValue = editingCurrency === EditingCurrency.TOKEN ? principalAsToken : principalAsUSD\n  const conversionUnit = editingCurrency === EditingCurrency.TOKEN ? 'USD' : stakingTokenSymbol\n  const conversionValue = editingCurrency === EditingCurrency.TOKEN ? principalAsUSD : principalAsToken\n  const onUserInput = editingCurrency === EditingCurrency.TOKEN ? setPrincipalFromTokenValue : setPrincipalFromUSDValue\n\n  return (\n    <StyledModal\n      title={t('ROI Calculator')}\n      onDismiss={onBack || onDismiss}\n      onBack={onBack ?? null}\n      headerBackground=\"gradients.cardHeader\"\n    >\n      <ScrollableContainer>\n        <Flex flexDirection=\"column\" mb=\"8px\">\n          <Text color=\"secondary\" bold fontSize=\"12px\" textTransform=\"uppercase\">\n            {t('%asset% staked', { asset: stakingTokenSymbol })}\n          </Text>\n          <BalanceInput\n            currencyValue={`${conversionValue} ${conversionUnit}`}\n            innerRef={balanceInputRef}\n            placeholder=\"0.00\"\n            value={editingValue}\n            unit={editingUnit}\n            onUserInput={onUserInput}\n            switchEditingUnits={toggleEditingCurrency}\n            onFocus={onBalanceFocus}\n          />\n          <Flex justifyContent=\"space-between\" mt=\"8px\">\n            <Button\n              scale=\"xs\"\n              p=\"4px 16px\"\n              width=\"68px\"\n              variant=\"tertiary\"\n              onClick={() => setPrincipalFromUSDValue('100')}\n            >\n              $100\n            </Button>\n            <Button\n              scale=\"xs\"\n              p=\"4px 16px\"\n              width=\"68px\"\n              variant=\"tertiary\"\n              onClick={() => setPrincipalFromUSDValue('1000')}\n            >\n              $1000\n            </Button>\n            <Button\n              disabled={stakingTokenBalance.lte(0) || !account}\n              scale=\"xs\"\n              p=\"4px 16px\"\n              width=\"128px\"\n              variant=\"tertiary\"\n              onClick={() =>\n                setPrincipalFromUSDValue(getBalanceNumber(stakingTokenBalance.times(stakingTokenPrice)).toString())\n              }\n            >\n              {t('My Balance').toLocaleUpperCase()}\n            </Button>\n            <span ref={targetRef}>\n              <HelpIcon width=\"16px\" height=\"16px\" color=\"textSubtle\" />\n            </span>\n            {tooltipVisible && tooltip}\n          </Flex>\n          <Text mt=\"24px\" color=\"secondary\" bold fontSize=\"12px\" textTransform=\"uppercase\">\n            {t('Staked for')}\n          </Text>\n          <FullWidthButtonMenu activeIndex={stakingDuration} onItemClick={setStakingDuration} scale=\"sm\">\n            <ButtonMenuItem variant=\"tertiary\">{t('1D')}</ButtonMenuItem>\n            <ButtonMenuItem variant=\"tertiary\">{t('7D')}</ButtonMenuItem>\n            <ButtonMenuItem variant=\"tertiary\">{t('30D')}</ButtonMenuItem>\n            <ButtonMenuItem variant=\"tertiary\">{t('1Y')}</ButtonMenuItem>\n            <ButtonMenuItem variant=\"tertiary\">{t('5Y')}</ButtonMenuItem>\n          </FullWidthButtonMenu>\n          {autoCompoundFrequency === 0 && (\n            <>\n              <Text mt=\"24px\" color=\"secondary\" bold fontSize=\"12px\" textTransform=\"uppercase\">\n                {t('Compounding every')}\n              </Text>\n              <Flex alignItems=\"center\">\n                <Flex flex=\"1\">\n                  <Checkbox scale=\"sm\" checked={compounding} onChange={toggleCompounding} />\n                </Flex>\n                <Flex flex=\"6\">\n                  <FullWidthButtonMenu\n                    disabled={!compounding}\n                    activeIndex={activeCompoundingIndex}\n                    onItemClick={setCompoundingFrequency}\n                    scale=\"sm\"\n                  >\n                    <ButtonMenuItem>{t('1D')}</ButtonMenuItem>\n                    <ButtonMenuItem>{t('7D')}</ButtonMenuItem>\n                    <ButtonMenuItem>{t('14D')}</ButtonMenuItem>\n                    <ButtonMenuItem>{t('30D')}</ButtonMenuItem>\n                  </FullWidthButtonMenu>\n                </Flex>\n              </Flex>\n            </>\n          )}\n        </Flex>\n        <AnimatedArrow calculatorState={state} />\n        <Flex>\n          <RoiCard\n            earningTokenSymbol={earningTokenSymbol}\n            calculatorState={state}\n            setTargetRoi={setTargetRoi}\n            setCalculatorMode={setCalculatorMode}\n          />\n        </Flex>\n      </ScrollableContainer>\n      <RoiCalculatorFooter\n        isFarm={isFarm}\n        apr={apr}\n        displayApr={displayApr}\n        autoCompoundFrequency={autoCompoundFrequency}\n        multiplier={multiplier}\n        linkLabel={linkLabel}\n        linkHref={linkHref}\n        performanceFee={performanceFee}\n      />\n    </StyledModal>\n  )\n}\n\nexport default RoiCalculatorModal\n"]},"metadata":{},"sourceType":"module"}