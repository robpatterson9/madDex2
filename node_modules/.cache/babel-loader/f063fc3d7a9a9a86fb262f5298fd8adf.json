{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useMemo}from'react';import styled from'styled-components';import{Text,Flex,CardBody,CardFooter,Button,AddIcon}from'@pancakeswap/uikit';import{Link}from'react-router-dom';import{useTranslation}from'contexts/Localization';import useActiveWeb3React from'hooks/useActiveWeb3React';import FullPositionCard from'../../components/PositionCard';import{useTokenBalancesWithLoadingIndicator}from'../../state/wallet/hooks';import{usePairs}from'../../hooks/usePairs';import{toV2LiquidityToken,useTrackedTokenPairs}from'../../state/user/hooks';import Dots from'../../components/Loader/Dots';import{AppHeader,AppBody}from'../../components/App';import Page from'../Page';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Body=styled(CardBody)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n\"])),function(_ref){var theme=_ref.theme;return theme.colors.dropdownDeep;});export default function Pool(){var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;var _useTranslation=useTranslation(),t=_useTranslation.t;// fetch the user's balances of all tracked V2 LP tokens\nvar trackedTokenPairs=useTrackedTokenPairs();var tokenPairsWithLiquidityTokens=useMemo(function(){return trackedTokenPairs.map(function(tokens){return{liquidityToken:toV2LiquidityToken(tokens),tokens:tokens};});},[trackedTokenPairs]);var liquidityTokens=useMemo(function(){return tokenPairsWithLiquidityTokens.map(function(tpwlt){return tpwlt.liquidityToken;});},[tokenPairsWithLiquidityTokens]);var _useTokenBalancesWith=useTokenBalancesWithLoadingIndicator(account!==null&&account!==void 0?account:undefined,liquidityTokens),_useTokenBalancesWith2=_slicedToArray(_useTokenBalancesWith,2),v2PairsBalances=_useTokenBalancesWith2[0],fetchingV2PairBalances=_useTokenBalancesWith2[1];// fetch the reserves for all V2 pools in which the user has a balance\nvar liquidityTokensWithBalances=useMemo(function(){return tokenPairsWithLiquidityTokens.filter(function(_ref2){var _v2PairsBalances$liqu;var liquidityToken=_ref2.liquidityToken;return(_v2PairsBalances$liqu=v2PairsBalances[liquidityToken.address])===null||_v2PairsBalances$liqu===void 0?void 0:_v2PairsBalances$liqu.greaterThan('0');});},[tokenPairsWithLiquidityTokens,v2PairsBalances]);var v2Pairs=usePairs(liquidityTokensWithBalances.map(function(_ref3){var tokens=_ref3.tokens;return tokens;}));var v2IsLoading=fetchingV2PairBalances||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.length)<liquidityTokensWithBalances.length||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.some(function(V2Pair){return!V2Pair;}));var allV2PairsWithLiquidity=v2Pairs.map(function(_ref4){var _ref5=_slicedToArray(_ref4,2),pair=_ref5[1];return pair;}).filter(function(v2Pair){return Boolean(v2Pair);});var renderBody=function renderBody(){if(!account){return/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",textAlign:\"center\",children:t('Connect to a wallet to view your liquidity.')});}if(v2IsLoading){return/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",textAlign:\"center\",children:/*#__PURE__*/_jsx(Dots,{children:t('Loading')})});}if((allV2PairsWithLiquidity===null||allV2PairsWithLiquidity===void 0?void 0:allV2PairsWithLiquidity.length)>0){return allV2PairsWithLiquidity.map(function(v2Pair,index){return/*#__PURE__*/_jsx(FullPositionCard,{pair:v2Pair,mb:index<allV2PairsWithLiquidity.length-1?'16px':0},v2Pair.liquidityToken.address);});}return/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",textAlign:\"center\",children:t('No liquidity found.')});};return/*#__PURE__*/_jsx(Page,{children:/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(AppHeader,{title:t('Your Liquidity'),subtitle:t('Remove liquidity to receive tokens back')}),/*#__PURE__*/_jsxs(Body,{children:[renderBody(),account&&!v2IsLoading&&/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",alignItems:\"center\",mt:\"24px\",children:[/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",mb:\"8px\",children:t(\"Don't see a pool you joined?\")}),/*#__PURE__*/_jsx(Button,{id:\"import-pool-link\",variant:\"secondary\",scale:\"sm\",as:Link,to:\"/find\",children:t('Find other LP tokens')})]})]}),/*#__PURE__*/_jsx(CardFooter,{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(Button,{id:\"join-pool-button\",as:Link,to:\"/add\",width:\"100%\",startIcon:/*#__PURE__*/_jsx(AddIcon,{color:\"white\"}),children:t('Add Liquidity')})})]})});}","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Pool/index.tsx"],"names":["React","useMemo","styled","Text","Flex","CardBody","CardFooter","Button","AddIcon","Link","useTranslation","useActiveWeb3React","FullPositionCard","useTokenBalancesWithLoadingIndicator","usePairs","toV2LiquidityToken","useTrackedTokenPairs","Dots","AppHeader","AppBody","Page","Body","theme","colors","dropdownDeep","Pool","account","t","trackedTokenPairs","tokenPairsWithLiquidityTokens","map","tokens","liquidityToken","liquidityTokens","tpwlt","undefined","v2PairsBalances","fetchingV2PairBalances","liquidityTokensWithBalances","filter","address","greaterThan","v2Pairs","v2IsLoading","length","some","V2Pair","allV2PairsWithLiquidity","pair","v2Pair","Boolean","renderBody","index","textAlign"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react'\nimport styled from 'styled-components'\nimport { Pair } from '@pancakeswap/sdk'\nimport { Text, Flex, CardBody, CardFooter, Button, AddIcon } from '@pancakeswap/uikit'\nimport { Link } from 'react-router-dom'\nimport { useTranslation } from 'contexts/Localization'\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\nimport FullPositionCard from '../../components/PositionCard'\nimport { useTokenBalancesWithLoadingIndicator } from '../../state/wallet/hooks'\nimport { usePairs } from '../../hooks/usePairs'\nimport { toV2LiquidityToken, useTrackedTokenPairs } from '../../state/user/hooks'\nimport Dots from '../../components/Loader/Dots'\nimport { AppHeader, AppBody } from '../../components/App'\nimport Page from '../Page'\n\nconst Body = styled(CardBody)`\n  background-color: ${({ theme }) => theme.colors.dropdownDeep};\n`\n\nexport default function Pool() {\n  const { account } = useActiveWeb3React()\n  const { t } = useTranslation()\n\n  // fetch the user's balances of all tracked V2 LP tokens\n  const trackedTokenPairs = useTrackedTokenPairs()\n  const tokenPairsWithLiquidityTokens = useMemo(\n    () => trackedTokenPairs.map((tokens) => ({ liquidityToken: toV2LiquidityToken(tokens), tokens })),\n    [trackedTokenPairs],\n  )\n  const liquidityTokens = useMemo(\n    () => tokenPairsWithLiquidityTokens.map((tpwlt) => tpwlt.liquidityToken),\n    [tokenPairsWithLiquidityTokens],\n  )\n  const [v2PairsBalances, fetchingV2PairBalances] = useTokenBalancesWithLoadingIndicator(\n    account ?? undefined,\n    liquidityTokens,\n  )\n\n  // fetch the reserves for all V2 pools in which the user has a balance\n  const liquidityTokensWithBalances = useMemo(\n    () =>\n      tokenPairsWithLiquidityTokens.filter(({ liquidityToken }) =>\n        v2PairsBalances[liquidityToken.address]?.greaterThan('0'),\n      ),\n    [tokenPairsWithLiquidityTokens, v2PairsBalances],\n  )\n\n  const v2Pairs = usePairs(liquidityTokensWithBalances.map(({ tokens }) => tokens))\n  const v2IsLoading =\n    fetchingV2PairBalances || v2Pairs?.length < liquidityTokensWithBalances.length || v2Pairs?.some((V2Pair) => !V2Pair)\n\n  const allV2PairsWithLiquidity = v2Pairs.map(([, pair]) => pair).filter((v2Pair): v2Pair is Pair => Boolean(v2Pair))\n\n  const renderBody = () => {\n    if (!account) {\n      return (\n        <Text color=\"textSubtle\" textAlign=\"center\">\n          {t('Connect to a wallet to view your liquidity.')}\n        </Text>\n      )\n    }\n    if (v2IsLoading) {\n      return (\n        <Text color=\"textSubtle\" textAlign=\"center\">\n          <Dots>{t('Loading')}</Dots>\n        </Text>\n      )\n    }\n    if (allV2PairsWithLiquidity?.length > 0) {\n      return allV2PairsWithLiquidity.map((v2Pair, index) => (\n        <FullPositionCard\n          key={v2Pair.liquidityToken.address}\n          pair={v2Pair}\n          mb={index < allV2PairsWithLiquidity.length - 1 ? '16px' : 0}\n        />\n      ))\n    }\n    return (\n      <Text color=\"textSubtle\" textAlign=\"center\">\n        {t('No liquidity found.')}\n      </Text>\n    )\n  }\n\n  return (\n    <Page>\n      <AppBody>\n        <AppHeader title={t('Your Liquidity')} subtitle={t('Remove liquidity to receive tokens back')} />\n        <Body>\n          {renderBody()}\n          {account && !v2IsLoading && (\n            <Flex flexDirection=\"column\" alignItems=\"center\" mt=\"24px\">\n              <Text color=\"textSubtle\" mb=\"8px\">\n                {t(\"Don't see a pool you joined?\")}\n              </Text>\n              <Button id=\"import-pool-link\" variant=\"secondary\" scale=\"sm\" as={Link} to=\"/find\">\n                {t('Find other LP tokens')}\n              </Button>\n            </Flex>\n          )}\n        </Body>\n        <CardFooter style={{ textAlign: 'center' }}>\n          <Button id=\"join-pool-button\" as={Link} to=\"/add\" width=\"100%\" startIcon={<AddIcon color=\"white\" />}>\n            {t('Add Liquidity')}\n          </Button>\n        </CardFooter>\n      </AppBody>\n    </Page>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}