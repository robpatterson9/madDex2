{"ast":null,"code":"import _objectSpread from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useEffect,useState}from'react';import styled from'styled-components';import{useMatchBreakpoints}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import useDelayedUnmount from'hooks/useDelayedUnmount';import{useFarmUser}from'state/farms/hooks';import Apr from'./Apr';import Farm from'./Farm';import Earned from'./Earned';import Details from'./Details';import Multiplier from'./Multiplier';import Liquidity from'./Liquidity';import ActionPanel from'./Actions/ActionPanel';import CellLayout from'./CellLayout';import{DesktopColumnSchema,MobileColumnSchema}from'../types';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var cells={apr:Apr,farm:Farm,earned:Earned,details:Details,multiplier:Multiplier,liquidity:Liquidity};var CellInner=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 24px 0px;\\n  display: flex;\\n  width: 100%;\\n  align-items: center;\\n  padding-right: 8px;\\n\\n  \",\" {\\n    padding-right: 32px;\\n  }\\n\"])),function(_ref){var theme=_ref.theme;return theme.mediaQueries.xl;});var StyledTr=styled.tr(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n  border-bottom: 2px solid \",\";\\n\"])),function(_ref2){var theme=_ref2.theme;return theme.colors.cardBorder;});var EarnedMobileCell=styled.td(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  padding: 16px 0 24px 16px;\\n\"])));var AprMobileCell=styled.td(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  padding-top: 16px;\\n  padding-bottom: 24px;\\n\"])));var FarmMobileCell=styled.td(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  padding-top: 24px;\\n\"])));var Row=function Row(props){var details=props.details,userDataReady=props.userDataReady;var hasStakedAmount=!!useFarmUser(details.pid).stakedBalance.toNumber();var _useState=useState(hasStakedAmount),_useState2=_slicedToArray(_useState,2),actionPanelExpanded=_useState2[0],setActionPanelExpanded=_useState2[1];var shouldRenderChild=useDelayedUnmount(actionPanelExpanded,300);var _useTranslation=useTranslation(),t=_useTranslation.t;var toggleActionPanel=function toggleActionPanel(){setActionPanelExpanded(!actionPanelExpanded);};useEffect(function(){setActionPanelExpanded(hasStakedAmount);},[hasStakedAmount]);var _useMatchBreakpoints=useMatchBreakpoints(),isDesktop=_useMatchBreakpoints.isDesktop,isMobile=_useMatchBreakpoints.isMobile;var isSmallerScreen=!isDesktop;var tableSchema=isSmallerScreen?MobileColumnSchema:DesktopColumnSchema;var columnNames=tableSchema.map(function(column){return column.name;});var handleRenderRow=function handleRenderRow(){if(!isMobile){return/*#__PURE__*/_jsx(StyledTr,{onClick:toggleActionPanel,children:Object.keys(props).map(function(key){var columnIndex=columnNames.indexOf(key);if(columnIndex===-1){return null;}switch(key){case'details':return/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(CellInner,{children:/*#__PURE__*/_jsx(CellLayout,{children:/*#__PURE__*/_jsx(Details,{actionPanelToggled:actionPanelExpanded})})})},key);case'apr':return/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(CellInner,{children:/*#__PURE__*/_jsx(CellLayout,{label:t('APR'),children:/*#__PURE__*/_jsx(Apr,_objectSpread(_objectSpread({},props.apr),{},{hideButton:isSmallerScreen}))})})},key);default:return/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(CellInner,{children:/*#__PURE__*/_jsx(CellLayout,{label:t(tableSchema[columnIndex].label),children:/*#__PURE__*/React.createElement(cells[key],_objectSpread(_objectSpread({},props[key]),{},{userDataReady:userDataReady}))})})},key);}})});}return/*#__PURE__*/_jsxs(StyledTr,{onClick:toggleActionPanel,children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(FarmMobileCell,{children:/*#__PURE__*/_jsx(CellLayout,{children:/*#__PURE__*/_jsx(Farm,_objectSpread({},props.farm))})})}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(EarnedMobileCell,{children:/*#__PURE__*/_jsx(CellLayout,{label:t('Earned'),children:/*#__PURE__*/_jsx(Earned,_objectSpread(_objectSpread({},props.earned),{},{userDataReady:userDataReady}))})}),/*#__PURE__*/_jsx(AprMobileCell,{children:/*#__PURE__*/_jsx(CellLayout,{label:t('APR'),children:/*#__PURE__*/_jsx(Apr,_objectSpread(_objectSpread({},props.apr),{},{hideButton:true}))})})]})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(CellInner,{children:/*#__PURE__*/_jsx(CellLayout,{children:/*#__PURE__*/_jsx(Details,{actionPanelToggled:actionPanelExpanded})})})})]});};return/*#__PURE__*/_jsxs(_Fragment,{children:[handleRenderRow(),shouldRenderChild&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:6,children:/*#__PURE__*/_jsx(ActionPanel,_objectSpread(_objectSpread({},props),{},{expanded:actionPanelExpanded}))})})]});};export default Row;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Farms/components/FarmTable/Row.tsx"],"names":["React","useEffect","useState","styled","useMatchBreakpoints","useTranslation","useDelayedUnmount","useFarmUser","Apr","Farm","Earned","Details","Multiplier","Liquidity","ActionPanel","CellLayout","DesktopColumnSchema","MobileColumnSchema","cells","apr","farm","earned","details","multiplier","liquidity","CellInner","div","theme","mediaQueries","xl","StyledTr","tr","colors","cardBorder","EarnedMobileCell","td","AprMobileCell","FarmMobileCell","Row","props","userDataReady","hasStakedAmount","pid","stakedBalance","toNumber","actionPanelExpanded","setActionPanelExpanded","shouldRenderChild","t","toggleActionPanel","isDesktop","isMobile","isSmallerScreen","tableSchema","columnNames","map","column","name","handleRenderRow","Object","keys","key","columnIndex","indexOf","label","createElement"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { FarmWithStakedValue } from 'views/Farms/components/FarmCard/FarmCard'\nimport { useMatchBreakpoints } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport useDelayedUnmount from 'hooks/useDelayedUnmount'\nimport { useFarmUser } from 'state/farms/hooks'\n\nimport Apr, { AprProps } from './Apr'\nimport Farm, { FarmProps } from './Farm'\nimport Earned, { EarnedProps } from './Earned'\nimport Details from './Details'\nimport Multiplier, { MultiplierProps } from './Multiplier'\nimport Liquidity, { LiquidityProps } from './Liquidity'\nimport ActionPanel from './Actions/ActionPanel'\nimport CellLayout from './CellLayout'\nimport { DesktopColumnSchema, MobileColumnSchema } from '../types'\n\nexport interface RowProps {\n  apr: AprProps\n  farm: FarmProps\n  earned: EarnedProps\n  multiplier: MultiplierProps\n  liquidity: LiquidityProps\n  details: FarmWithStakedValue\n}\n\ninterface RowPropsWithLoading extends RowProps {\n  userDataReady: boolean\n}\n\nconst cells = {\n  apr: Apr,\n  farm: Farm,\n  earned: Earned,\n  details: Details,\n  multiplier: Multiplier,\n  liquidity: Liquidity,\n}\n\nconst CellInner = styled.div`\n  padding: 24px 0px;\n  display: flex;\n  width: 100%;\n  align-items: center;\n  padding-right: 8px;\n\n  ${({ theme }) => theme.mediaQueries.xl} {\n    padding-right: 32px;\n  }\n`\n\nconst StyledTr = styled.tr`\n  cursor: pointer;\n  border-bottom: 2px solid ${({ theme }) => theme.colors.cardBorder};\n`\n\nconst EarnedMobileCell = styled.td`\n  padding: 16px 0 24px 16px;\n`\n\nconst AprMobileCell = styled.td`\n  padding-top: 16px;\n  padding-bottom: 24px;\n`\n\nconst FarmMobileCell = styled.td`\n  padding-top: 24px;\n`\n\nconst Row: React.FunctionComponent<RowPropsWithLoading> = (props) => {\n  const { details, userDataReady } = props\n  const hasStakedAmount = !!useFarmUser(details.pid).stakedBalance.toNumber()\n  const [actionPanelExpanded, setActionPanelExpanded] = useState(hasStakedAmount)\n  const shouldRenderChild = useDelayedUnmount(actionPanelExpanded, 300)\n  const { t } = useTranslation()\n\n  const toggleActionPanel = () => {\n    setActionPanelExpanded(!actionPanelExpanded)\n  }\n\n  useEffect(() => {\n    setActionPanelExpanded(hasStakedAmount)\n  }, [hasStakedAmount])\n\n  const { isDesktop, isMobile } = useMatchBreakpoints()\n\n  const isSmallerScreen = !isDesktop\n  const tableSchema = isSmallerScreen ? MobileColumnSchema : DesktopColumnSchema\n  const columnNames = tableSchema.map((column) => column.name)\n\n  const handleRenderRow = () => {\n    if (!isMobile) {\n      return (\n        <StyledTr onClick={toggleActionPanel}>\n          {Object.keys(props).map((key) => {\n            const columnIndex = columnNames.indexOf(key)\n            if (columnIndex === -1) {\n              return null\n            }\n\n            switch (key) {\n              case 'details':\n                return (\n                  <td key={key}>\n                    <CellInner>\n                      <CellLayout>\n                        <Details actionPanelToggled={actionPanelExpanded} />\n                      </CellLayout>\n                    </CellInner>\n                  </td>\n                )\n              case 'apr':\n                return (\n                  <td key={key}>\n                    <CellInner>\n                      <CellLayout label={t('APR')}>\n                        <Apr {...props.apr} hideButton={isSmallerScreen} />\n                      </CellLayout>\n                    </CellInner>\n                  </td>\n                )\n              default:\n                return (\n                  <td key={key}>\n                    <CellInner>\n                      <CellLayout label={t(tableSchema[columnIndex].label)}>\n                        {React.createElement(cells[key], { ...props[key], userDataReady })}\n                      </CellLayout>\n                    </CellInner>\n                  </td>\n                )\n            }\n          })}\n        </StyledTr>\n      )\n    }\n\n    return (\n      <StyledTr onClick={toggleActionPanel}>\n        <td>\n          <tr>\n            <FarmMobileCell>\n              <CellLayout>\n                <Farm {...props.farm} />\n              </CellLayout>\n            </FarmMobileCell>\n          </tr>\n          <tr>\n            <EarnedMobileCell>\n              <CellLayout label={t('Earned')}>\n                <Earned {...props.earned} userDataReady={userDataReady} />\n              </CellLayout>\n            </EarnedMobileCell>\n            <AprMobileCell>\n              <CellLayout label={t('APR')}>\n                <Apr {...props.apr} hideButton />\n              </CellLayout>\n            </AprMobileCell>\n          </tr>\n        </td>\n        <td>\n          <CellInner>\n            <CellLayout>\n              <Details actionPanelToggled={actionPanelExpanded} />\n            </CellLayout>\n          </CellInner>\n        </td>\n      </StyledTr>\n    )\n  }\n\n  return (\n    <>\n      {handleRenderRow()}\n      {shouldRenderChild && (\n        <tr>\n          <td colSpan={6}>\n            <ActionPanel {...props} expanded={actionPanelExpanded} />\n          </td>\n        </tr>\n      )}\n    </>\n  )\n}\n\nexport default Row\n"]},"metadata":{},"sourceType":"module"}