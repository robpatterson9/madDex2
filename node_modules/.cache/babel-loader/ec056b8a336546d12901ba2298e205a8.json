{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import React,{useEffect,useState}from'react';import styled from'styled-components';import{Card,CardHeader,CardBody,CardFooter,CardRibbon,ExpandableButton,Progress,Button,ChevronUpIcon}from'@pancakeswap/uikit';import BigNumber from'bignumber.js';import{useWeb3React}from'@web3-react/core';import{PoolIds}from'config/constants/types';import{useERC20}from'hooks/useContract';import useToast from'hooks/useToast';import{useTranslation}from'contexts/Localization';import{ToastDescriptionWithTx}from'components/Toast';import{EnableStatus}from'./types';import IfoPoolCard from'./IfoPoolCard';import Timer from'./Timer';import Achievement from'./Achievement';import useIfoApprove from'../../hooks/useIfoApprove';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getRibbonComponent=function getRibbonComponent(ifo,status,t){if(status==='coming_soon'){return/*#__PURE__*/_jsx(CardRibbon,{variantColor:\"textDisabled\",ribbonPosition:\"left\",text:t('Coming Soon')});}if(status==='live'||status==='finished'&&ifo.isActive){return/*#__PURE__*/_jsx(CardRibbon,{variantColor:\"primary\",ribbonPosition:\"left\",style:{textTransform:'uppercase'},text:status==='live'?\"\".concat(t('Live'),\"!\"):\"\".concat(t('Finished'),\"!\")});}return null;};var StyledCard=styled(Card)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 736px;\\n  width: 100%;\\n  margin: auto;\\n\"])));var Header=styled(CardHeader)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center;\\n  height: 112px;\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n  background-position: center;\\n  background-image: \",\";\\n\"])),function(_ref){var ifoId=_ref.ifoId;return\"url('/images/ifos/\".concat(ifoId,\"-bg.svg')\");});var FoldableContent=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: \",\";\\n  background: \",\";\\n\"])),function(_ref2){var isVisible=_ref2.isVisible;return isVisible?'block':'none';},function(_ref3){var isActive=_ref3.isActive,theme=_ref3.theme;return isActive?theme.colors.gradients.bubblegum:theme.colors.dropdown;});var CardsWrapper=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-gap: 32px;\\n  grid-template-columns: 1fr;\\n  margin-bottom: 32px;\\n  \",\" {\\n    grid-template-columns: \",\";\\n    justify-items: \",\";\\n  }\\n\"])),function(_ref4){var theme=_ref4.theme;return theme.mediaQueries.md;},function(_ref5){var singleCard=_ref5.singleCard;return singleCard?'1fr':'1fr 1fr';},function(_ref6){var singleCard=_ref6.singleCard;return singleCard?'center':'unset';});var StyledCardBody=styled(CardBody)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  padding: 24px 16px;\\n  \",\" {\\n    padding: 24px;\\n  }\\n\"])),function(_ref7){var theme=_ref7.theme;return theme.mediaQueries.md;});var StyledCardFooter=styled(CardFooter)(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 8px;\\n  background: \",\";\\n\"])),function(_ref8){var theme=_ref8.theme;return theme.colors.backgroundAlt;});var IfoFoldableCard=function IfoFoldableCard(_ref9){var ifo=_ref9.ifo,publicIfoData=_ref9.publicIfoData,walletIfoData=_ref9.walletIfoData,isInitiallyVisible=_ref9.isInitiallyVisible;var _useState=useState(isInitiallyVisible),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var _useState3=useState(EnableStatus.DISABLED),_useState4=_slicedToArray(_useState3,2),enableStatus=_useState4[0],setEnableStatus=_useState4[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var raisingTokenContract=useERC20(ifo.currency.address);var Ribbon=getRibbonComponent(ifo,publicIfoData.status,t);var isActive=publicIfoData.status!=='finished'&&ifo.isActive;var contract=walletIfoData.contract;var onApprove=useIfoApprove(raisingTokenContract,contract.address);var _useToast=useToast(),toastSuccess=_useToast.toastSuccess;var handleApprove=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var receipt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setEnableStatus(EnableStatus.IS_ENABLING);_context.next=4;return onApprove();case 4:receipt=_context.sent;setEnableStatus(EnableStatus.ENABLED);toastSuccess(t('Successfully Enabled!'),/*#__PURE__*/_jsx(ToastDescriptionWithTx,{txHash:receipt.transactionHash,children:t('You can now participate in the %symbol% IFO.',{symbol:ifo.token.symbol})}));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setEnableStatus(EnableStatus.DISABLED);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function handleApprove(){return _ref10.apply(this,arguments);};}();useEffect(function(){var checkAllowance=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,currentAllowance;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return raisingTokenContract.allowance(account,contract.address);case 3:response=_context2.sent;currentAllowance=new BigNumber(response.toString());setEnableStatus(currentAllowance.lte(0)?EnableStatus.DISABLED:EnableStatus.ENABLED);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);setEnableStatus(EnableStatus.DISABLED);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function checkAllowance(){return _ref11.apply(this,arguments);};}();if(account){checkAllowance();}},[account,raisingTokenContract,contract,setEnableStatus]);return/*#__PURE__*/_jsxs(StyledCard,{ribbon:Ribbon,children:[/*#__PURE__*/_jsx(Header,{ifoId:ifo.id,children:/*#__PURE__*/_jsx(ExpandableButton,{expanded:isVisible,onClick:function onClick(){return setIsVisible(function(prev){return!prev;});}})}),/*#__PURE__*/_jsxs(FoldableContent,{isVisible:isVisible,isActive:publicIfoData.status!=='idle'&&isActive,children:[isActive&&/*#__PURE__*/_jsx(Progress,{variant:\"flat\",primaryStep:publicIfoData.progress}),/*#__PURE__*/_jsxs(StyledCardBody,{children:[isActive&&/*#__PURE__*/_jsx(Timer,{publicIfoData:publicIfoData}),/*#__PURE__*/_jsxs(CardsWrapper,{singleCard:!publicIfoData.poolBasic||!walletIfoData.poolBasic,children:[publicIfoData.poolBasic&&walletIfoData.poolBasic&&/*#__PURE__*/_jsx(IfoPoolCard,{poolId:PoolIds.poolBasic,ifo:ifo,publicIfoData:publicIfoData,walletIfoData:walletIfoData,onApprove:handleApprove,enableStatus:enableStatus}),/*#__PURE__*/_jsx(IfoPoolCard,{poolId:PoolIds.poolUnlimited,ifo:ifo,publicIfoData:publicIfoData,walletIfoData:walletIfoData,onApprove:handleApprove,enableStatus:enableStatus})]}),/*#__PURE__*/_jsx(Achievement,{ifo:ifo,publicIfoData:publicIfoData})]}),/*#__PURE__*/_jsx(StyledCardFooter,{children:/*#__PURE__*/_jsx(Button,{variant:\"text\",endIcon:/*#__PURE__*/_jsx(ChevronUpIcon,{color:\"primary\"}),onClick:function onClick(){return setIsVisible(false);},children:t('Close')})})]})]});};export default IfoFoldableCard;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Ifos/components/IfoFoldableCard/index.tsx"],"names":["React","useEffect","useState","styled","Card","CardHeader","CardBody","CardFooter","CardRibbon","ExpandableButton","Progress","Button","ChevronUpIcon","BigNumber","useWeb3React","PoolIds","useERC20","useToast","useTranslation","ToastDescriptionWithTx","EnableStatus","IfoPoolCard","Timer","Achievement","useIfoApprove","getRibbonComponent","ifo","status","t","isActive","textTransform","StyledCard","Header","ifoId","FoldableContent","div","isVisible","theme","colors","gradients","bubblegum","dropdown","CardsWrapper","mediaQueries","md","singleCard","StyledCardBody","StyledCardFooter","backgroundAlt","IfoFoldableCard","publicIfoData","walletIfoData","isInitiallyVisible","setIsVisible","DISABLED","enableStatus","setEnableStatus","account","raisingTokenContract","currency","address","Ribbon","contract","onApprove","toastSuccess","handleApprove","IS_ENABLING","receipt","ENABLED","transactionHash","symbol","token","checkAllowance","allowance","response","currentAllowance","toString","lte","id","prev","progress","poolBasic","poolUnlimited"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  CardRibbon,\n  ExpandableButton,\n  Progress,\n  Button,\n  ChevronUpIcon,\n} from '@pancakeswap/uikit'\nimport BigNumber from 'bignumber.js'\nimport { useWeb3React } from '@web3-react/core'\nimport { Ifo, IfoStatus, PoolIds } from 'config/constants/types'\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\nimport { useERC20 } from 'hooks/useContract'\nimport useToast from 'hooks/useToast'\nimport { useTranslation } from 'contexts/Localization'\nimport { ToastDescriptionWithTx } from 'components/Toast'\nimport { EnableStatus } from './types'\nimport IfoPoolCard from './IfoPoolCard'\nimport Timer from './Timer'\nimport Achievement from './Achievement'\nimport useIfoApprove from '../../hooks/useIfoApprove'\n\ninterface IfoFoldableCardProps {\n  ifo: Ifo\n  publicIfoData: PublicIfoData\n  walletIfoData: WalletIfoData\n  isInitiallyVisible: boolean\n}\n\nconst getRibbonComponent = (ifo: Ifo, status: IfoStatus, t: any) => {\n  if (status === 'coming_soon') {\n    return <CardRibbon variantColor=\"textDisabled\" ribbonPosition=\"left\" text={t('Coming Soon')} />\n  }\n\n  if (status === 'live' || (status === 'finished' && ifo.isActive)) {\n    return (\n      <CardRibbon\n        variantColor=\"primary\"\n        ribbonPosition=\"left\"\n        style={{ textTransform: 'uppercase' }}\n        text={status === 'live' ? `${t('Live')}!` : `${t('Finished')}!`}\n      />\n    )\n  }\n\n  return null\n}\n\nconst StyledCard = styled(Card)`\n  max-width: 736px;\n  width: 100%;\n  margin: auto;\n`\n\nconst Header = styled(CardHeader)<{ ifoId: string }>`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  height: 112px;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n  background-image: ${({ ifoId }) => `url('/images/ifos/${ifoId}-bg.svg')`};\n`\n\nconst FoldableContent = styled.div<{ isVisible: boolean; isActive: boolean }>`\n  display: ${({ isVisible }) => (isVisible ? 'block' : 'none')};\n  background: ${({ isActive, theme }) => (isActive ? theme.colors.gradients.bubblegum : theme.colors.dropdown)};\n`\n\nconst CardsWrapper = styled.div<{ singleCard: boolean }>`\n  display: grid;\n  grid-gap: 32px;\n  grid-template-columns: 1fr;\n  margin-bottom: 32px;\n  ${({ theme }) => theme.mediaQueries.md} {\n    grid-template-columns: ${({ singleCard }) => (singleCard ? '1fr' : '1fr 1fr')};\n    justify-items: ${({ singleCard }) => (singleCard ? 'center' : 'unset')};\n  }\n`\n\nconst StyledCardBody = styled(CardBody)`\n  padding: 24px 16px;\n  ${({ theme }) => theme.mediaQueries.md} {\n    padding: 24px;\n  }\n`\n\nconst StyledCardFooter = styled(CardFooter)`\n  text-align: center;\n  padding: 8px;\n  background: ${({ theme }) => theme.colors.backgroundAlt};\n`\n\nconst IfoFoldableCard: React.FC<IfoFoldableCardProps> = ({ ifo, publicIfoData, walletIfoData, isInitiallyVisible }) => {\n  const [isVisible, setIsVisible] = useState(isInitiallyVisible)\n  const [enableStatus, setEnableStatus] = useState(EnableStatus.DISABLED)\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const raisingTokenContract = useERC20(ifo.currency.address)\n  const Ribbon = getRibbonComponent(ifo, publicIfoData.status, t)\n  const isActive = publicIfoData.status !== 'finished' && ifo.isActive\n  const { contract } = walletIfoData\n  const onApprove = useIfoApprove(raisingTokenContract, contract.address)\n  const { toastSuccess } = useToast()\n\n  const handleApprove = async () => {\n    try {\n      setEnableStatus(EnableStatus.IS_ENABLING)\n\n      const receipt = await onApprove()\n\n      setEnableStatus(EnableStatus.ENABLED)\n      toastSuccess(\n        t('Successfully Enabled!'),\n        <ToastDescriptionWithTx txHash={receipt.transactionHash}>\n          {t('You can now participate in the %symbol% IFO.', { symbol: ifo.token.symbol })}\n        </ToastDescriptionWithTx>,\n      )\n    } catch (error) {\n      setEnableStatus(EnableStatus.DISABLED)\n    }\n  }\n\n  useEffect(() => {\n    const checkAllowance = async () => {\n      try {\n        const response = await raisingTokenContract.allowance(account, contract.address)\n        const currentAllowance = new BigNumber(response.toString())\n        setEnableStatus(currentAllowance.lte(0) ? EnableStatus.DISABLED : EnableStatus.ENABLED)\n      } catch (error) {\n        setEnableStatus(EnableStatus.DISABLED)\n      }\n    }\n\n    if (account) {\n      checkAllowance()\n    }\n  }, [account, raisingTokenContract, contract, setEnableStatus])\n\n  return (\n    <StyledCard ribbon={Ribbon}>\n      <Header ifoId={ifo.id}>\n        <ExpandableButton expanded={isVisible} onClick={() => setIsVisible((prev) => !prev)} />\n      </Header>\n      <FoldableContent isVisible={isVisible} isActive={publicIfoData.status !== 'idle' && isActive}>\n        {isActive && <Progress variant=\"flat\" primaryStep={publicIfoData.progress} />}\n        <StyledCardBody>\n          {isActive && <Timer publicIfoData={publicIfoData} />}\n          <CardsWrapper singleCard={!publicIfoData.poolBasic || !walletIfoData.poolBasic}>\n            {publicIfoData.poolBasic && walletIfoData.poolBasic && (\n              <IfoPoolCard\n                poolId={PoolIds.poolBasic}\n                ifo={ifo}\n                publicIfoData={publicIfoData}\n                walletIfoData={walletIfoData}\n                onApprove={handleApprove}\n                enableStatus={enableStatus}\n              />\n            )}\n            <IfoPoolCard\n              poolId={PoolIds.poolUnlimited}\n              ifo={ifo}\n              publicIfoData={publicIfoData}\n              walletIfoData={walletIfoData}\n              onApprove={handleApprove}\n              enableStatus={enableStatus}\n            />\n          </CardsWrapper>\n          <Achievement ifo={ifo} publicIfoData={publicIfoData} />\n        </StyledCardBody>\n        <StyledCardFooter>\n          <Button variant=\"text\" endIcon={<ChevronUpIcon color=\"primary\" />} onClick={() => setIsVisible(false)}>\n            {t('Close')}\n          </Button>\n        </StyledCardFooter>\n      </FoldableContent>\n    </StyledCard>\n  )\n}\n\nexport default IfoFoldableCard\n"]},"metadata":{},"sourceType":"module"}