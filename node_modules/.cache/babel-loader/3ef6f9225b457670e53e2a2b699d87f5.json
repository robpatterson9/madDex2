{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import BigNumber from'bignumber.js';import React,{useCallback,useMemo,useState}from'react';import{Button,Modal}from'@pancakeswap/uikit';import{ModalActions,ModalInput}from'components/Modal';import{useTranslation}from'contexts/Localization';import{getFullDisplayBalance}from'utils/formatBalance';import useToast from'hooks/useToast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WithdrawModal=function WithdrawModal(_ref){var onConfirm=_ref.onConfirm,onDismiss=_ref.onDismiss,max=_ref.max,_ref$tokenName=_ref.tokenName,tokenName=_ref$tokenName===void 0?'':_ref$tokenName;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),val=_useState2[0],setVal=_useState2[1];var _useToast=useToast(),toastSuccess=_useToast.toastSuccess,toastError=_useToast.toastError;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),pendingTx=_useState4[0],setPendingTx=_useState4[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var fullBalance=useMemo(function(){return getFullDisplayBalance(max);},[max]);var valNumber=new BigNumber(val);var fullBalanceNumber=new BigNumber(fullBalance);var handleChange=useCallback(function(e){if(e.currentTarget.validity.valid){setVal(e.currentTarget.value.replace(/,/g,'.'));}},[setVal]);var handleSelectMax=useCallback(function(){setVal(fullBalance);},[fullBalance,setVal]);return/*#__PURE__*/_jsxs(Modal,{title:t('Unstake LP tokens'),onDismiss:onDismiss,children:[/*#__PURE__*/_jsx(ModalInput,{onSelectMax:handleSelectMax,onChange:handleChange,value:val,max:fullBalance,symbol:tokenName,inputTitle:t('Unstake')}),/*#__PURE__*/_jsxs(ModalActions,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onDismiss,width:\"100%\",disabled:pendingTx,children:t('Cancel')}),/*#__PURE__*/_jsx(Button,{disabled:pendingTx||!valNumber.isFinite()||valNumber.eq(0)||valNumber.gt(fullBalanceNumber),onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setPendingTx(true);_context.prev=1;_context.next=4;return onConfirm(val);case 4:toastSuccess(t('Unstaked!'),t('Your earnings have also been harvested to your wallet'));onDismiss();_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);toastError(t('Error'),t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));console.error(_context.t0);case 12:_context.prev=12;setPendingTx(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,8,12,15]]);})),width:\"100%\",children:pendingTx?t('Confirming'):t('Confirm')})]})]});};export default WithdrawModal;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Farms/components/WithdrawModal.tsx"],"names":["BigNumber","React","useCallback","useMemo","useState","Button","Modal","ModalActions","ModalInput","useTranslation","getFullDisplayBalance","useToast","WithdrawModal","onConfirm","onDismiss","max","tokenName","val","setVal","toastSuccess","toastError","pendingTx","setPendingTx","t","fullBalance","valNumber","fullBalanceNumber","handleChange","e","currentTarget","validity","valid","value","replace","handleSelectMax","isFinite","eq","gt","console","error"],"mappings":"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","sourcesContent":["import BigNumber from 'bignumber.js'\nimport React, { useCallback, useMemo, useState } from 'react'\nimport { Button, Modal } from '@pancakeswap/uikit'\nimport { ModalActions, ModalInput } from 'components/Modal'\nimport { useTranslation } from 'contexts/Localization'\nimport { getFullDisplayBalance } from 'utils/formatBalance'\nimport useToast from 'hooks/useToast'\n\ninterface WithdrawModalProps {\n  max: BigNumber\n  onConfirm: (amount: string) => void\n  onDismiss?: () => void\n  tokenName?: string\n}\n\nconst WithdrawModal: React.FC<WithdrawModalProps> = ({ onConfirm, onDismiss, max, tokenName = '' }) => {\n  const [val, setVal] = useState('')\n  const { toastSuccess, toastError } = useToast()\n  const [pendingTx, setPendingTx] = useState(false)\n  const { t } = useTranslation()\n  const fullBalance = useMemo(() => {\n    return getFullDisplayBalance(max)\n  }, [max])\n\n  const valNumber = new BigNumber(val)\n  const fullBalanceNumber = new BigNumber(fullBalance)\n\n  const handleChange = useCallback(\n    (e: React.FormEvent<HTMLInputElement>) => {\n      if (e.currentTarget.validity.valid) {\n        setVal(e.currentTarget.value.replace(/,/g, '.'))\n      }\n    },\n    [setVal],\n  )\n\n  const handleSelectMax = useCallback(() => {\n    setVal(fullBalance)\n  }, [fullBalance, setVal])\n\n  return (\n    <Modal title={t('Unstake LP tokens')} onDismiss={onDismiss}>\n      <ModalInput\n        onSelectMax={handleSelectMax}\n        onChange={handleChange}\n        value={val}\n        max={fullBalance}\n        symbol={tokenName}\n        inputTitle={t('Unstake')}\n      />\n      <ModalActions>\n        <Button variant=\"secondary\" onClick={onDismiss} width=\"100%\" disabled={pendingTx}>\n          {t('Cancel')}\n        </Button>\n        <Button\n          disabled={pendingTx || !valNumber.isFinite() || valNumber.eq(0) || valNumber.gt(fullBalanceNumber)}\n          onClick={async () => {\n            setPendingTx(true)\n            try {\n              await onConfirm(val)\n              toastSuccess(t('Unstaked!'), t('Your earnings have also been harvested to your wallet'))\n              onDismiss()\n            } catch (e) {\n              toastError(\n                t('Error'),\n                t('Please try again. Confirm the transaction and make sure you are paying enough gas!'),\n              )\n              console.error(e)\n            } finally {\n              setPendingTx(false)\n            }\n          }}\n          width=\"100%\"\n        >\n          {pendingTx ? t('Confirming') : t('Confirm')}\n        </Button>\n      </ModalActions>\n    </Modal>\n  )\n}\n\nexport default WithdrawModal\n"]},"metadata":{},"sourceType":"module"}