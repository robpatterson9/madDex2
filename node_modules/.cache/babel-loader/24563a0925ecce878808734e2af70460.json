{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useCallback,useState,useMemo,useEffect}from'react';import styled from'styled-components';import{Link}from'react-router-dom';import{Text,Flex,Box,Skeleton,ArrowBackIcon,ArrowForwardIcon}from'@pancakeswap/uikit';import{formatAmount}from'views/Info/utils/formatInfoNumbers';import{ITEMS_PER_INFO_TABLE_PAGE}from'config/constants/info';import{DoubleCurrencyLogo}from'views/Info/components/CurrencyLogo';import{useTranslation}from'contexts/Localization';import{ClickableColumnHeader,TableWrapper,PageButtons,Arrow,Break}from'./shared';/**\n *  Columns on different layouts\n *  5 = | # | Pool | TVL | Volume 24H | Volume 7D |\n *  4 = | # | Pool |     | Volume 24H | Volume 7D |\n *  3 = | # | Pool |     | Volume 24H |           |\n *  2 = |   | Pool |     | Volume 24H |           |\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ResponsiveGrid=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-gap: 1em;\\n  align-items: center;\\n  grid-template-columns: 20px 3.5fr repeat(5, 1fr);\\n\\n  padding: 0 24px;\\n  @media screen and (max-width: 900px) {\\n    grid-template-columns: 20px 1.5fr repeat(3, 1fr);\\n    & :nth-child(4),\\n    & :nth-child(5) {\\n      display: none;\\n    }\\n  }\\n  @media screen and (max-width: 500px) {\\n    grid-template-columns: 20px 1.5fr repeat(1, 1fr);\\n    & :nth-child(4),\\n    & :nth-child(5),\\n    & :nth-child(6),\\n    & :nth-child(7) {\\n      display: none;\\n    }\\n  }\\n  @media screen and (max-width: 480px) {\\n    grid-template-columns: 2.5fr repeat(1, 1fr);\\n    > *:nth-child(1) {\\n      display: none;\\n    }\\n  }\\n\"])));var LinkWrapper=styled(Link)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  text-decoration: none;\\n  :hover {\\n    cursor: pointer;\\n    opacity: 0.7;\\n  }\\n\"])));var SORT_FIELD={volumeUSD:'volumeUSD',tvlUSD:'tvlUSD',volumeUSDWeek:'volumeUSDWeek',lpFees24h:'lpFees24h',lpApr7d:'lpApr7d'};var LoadingRow=function LoadingRow(){return/*#__PURE__*/_jsxs(ResponsiveGrid,{children:[/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{})]});};var TableLoader=function TableLoader(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LoadingRow,{}),/*#__PURE__*/_jsx(LoadingRow,{}),/*#__PURE__*/_jsx(LoadingRow,{})]});};var DataRow=function DataRow(_ref){var poolData=_ref.poolData,index=_ref.index;return/*#__PURE__*/_jsx(LinkWrapper,{to:\"/info/pool/\".concat(poolData.address),children:/*#__PURE__*/_jsxs(ResponsiveGrid,{children:[/*#__PURE__*/_jsx(Text,{children:index+1}),/*#__PURE__*/_jsxs(Flex,{children:[/*#__PURE__*/_jsx(DoubleCurrencyLogo,{address0:poolData.token0.address,address1:poolData.token1.address}),/*#__PURE__*/_jsxs(Text,{ml:\"8px\",children:[poolData.token0.symbol,\"/\",poolData.token1.symbol]})]}),/*#__PURE__*/_jsxs(Text,{children:[\"$\",formatAmount(poolData.volumeUSD)]}),/*#__PURE__*/_jsxs(Text,{children:[\"$\",formatAmount(poolData.volumeUSDWeek)]}),/*#__PURE__*/_jsxs(Text,{children:[\"$\",formatAmount(poolData.lpFees24h)]}),/*#__PURE__*/_jsxs(Text,{children:[formatAmount(poolData.lpApr7d),\"%\"]}),/*#__PURE__*/_jsxs(Text,{children:[\"$\",formatAmount(poolData.liquidityUSD)]})]})});};var PoolTable=function PoolTable(_ref2){var poolDatas=_ref2.poolDatas,loading=_ref2.loading;// for sorting\nvar _useState=useState(SORT_FIELD.volumeUSD),_useState2=_slicedToArray(_useState,2),sortField=_useState2[0],setSortField=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),sortDirection=_useState4[0],setSortDirection=_useState4[1];var _useTranslation=useTranslation(),t=_useTranslation.t;// pagination\nvar _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),maxPage=_useState8[0],setMaxPage=_useState8[1];useEffect(function(){var extraPages=1;if(poolDatas.length%ITEMS_PER_INFO_TABLE_PAGE===0){extraPages=0;}setMaxPage(Math.floor(poolDatas.length/ITEMS_PER_INFO_TABLE_PAGE)+extraPages);},[poolDatas]);var sortedPools=useMemo(function(){return poolDatas?poolDatas.sort(function(a,b){if(a&&b){return a[sortField]>b[sortField]?(sortDirection?-1:1)*1:(sortDirection?-1:1)*-1;}return-1;}).slice(ITEMS_PER_INFO_TABLE_PAGE*(page-1),page*ITEMS_PER_INFO_TABLE_PAGE):[];},[page,poolDatas,sortDirection,sortField]);var handleSort=useCallback(function(newField){setSortField(newField);setSortDirection(sortField!==newField?true:!sortDirection);},[sortDirection,sortField]);var arrow=useCallback(function(field){var directionArrow=!sortDirection?'↑':'↓';return sortField===field?directionArrow:'';},[sortDirection,sortField]);return/*#__PURE__*/_jsxs(TableWrapper,{children:[/*#__PURE__*/_jsxs(ResponsiveGrid,{children:[/*#__PURE__*/_jsx(Text,{color:\"secondary\",fontSize:\"12px\",bold:true,children:\"#\"}),/*#__PURE__*/_jsx(Text,{color:\"secondary\",fontSize:\"12px\",bold:true,textTransform:\"uppercase\",children:t('Pool')}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.volumeUSD);},textTransform:\"uppercase\",children:[t('Volume 24H'),\" \",arrow(SORT_FIELD.volumeUSD)]}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.volumeUSDWeek);},textTransform:\"uppercase\",children:[t('Volume 7D'),\" \",arrow(SORT_FIELD.volumeUSDWeek)]}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.lpFees24h);},textTransform:\"uppercase\",children:[t('LP reward fees 24H'),\" \",arrow(SORT_FIELD.lpFees24h)]}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.lpApr7d);},textTransform:\"uppercase\",children:[t('LP reward APR'),\" \",arrow(SORT_FIELD.lpApr7d)]}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.tvlUSD);},textTransform:\"uppercase\",children:[t('Liquidity'),\" \",arrow(SORT_FIELD.tvlUSD)]})]}),/*#__PURE__*/_jsx(Break,{}),sortedPools.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[sortedPools.map(function(poolData,i){if(poolData){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(DataRow,{index:(page-1)*ITEMS_PER_INFO_TABLE_PAGE+i,poolData:poolData}),/*#__PURE__*/_jsx(Break,{})]},poolData.address);}return null;}),loading&&/*#__PURE__*/_jsx(LoadingRow,{}),/*#__PURE__*/_jsxs(PageButtons,{children:[/*#__PURE__*/_jsx(Arrow,{onClick:function onClick(){setPage(page===1?page:page-1);},children:/*#__PURE__*/_jsx(ArrowBackIcon,{color:page===1?'textDisabled':'primary'})}),/*#__PURE__*/_jsx(Text,{children:t('Page %page% of %maxPage%',{page:page,maxPage:maxPage})}),/*#__PURE__*/_jsx(Arrow,{onClick:function onClick(){setPage(page===maxPage?page:page+1);},children:/*#__PURE__*/_jsx(ArrowForwardIcon,{color:page===maxPage?'textDisabled':'primary'})})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TableLoader,{}),/*#__PURE__*/_jsx(Box,{})]})]});};export default PoolTable;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Info/components/InfoTables/PoolsTable.tsx"],"names":["React","useCallback","useState","useMemo","useEffect","styled","Link","Text","Flex","Box","Skeleton","ArrowBackIcon","ArrowForwardIcon","formatAmount","ITEMS_PER_INFO_TABLE_PAGE","DoubleCurrencyLogo","useTranslation","ClickableColumnHeader","TableWrapper","PageButtons","Arrow","Break","ResponsiveGrid","div","LinkWrapper","SORT_FIELD","volumeUSD","tvlUSD","volumeUSDWeek","lpFees24h","lpApr7d","LoadingRow","TableLoader","DataRow","poolData","index","address","token0","token1","symbol","liquidityUSD","PoolTable","poolDatas","loading","sortField","setSortField","sortDirection","setSortDirection","t","page","setPage","maxPage","setMaxPage","extraPages","length","Math","floor","sortedPools","sort","a","b","slice","handleSort","newField","arrow","field","directionArrow","map","i"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useMemo, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { Link } from 'react-router-dom'\nimport { Text, Flex, Box, Skeleton, ArrowBackIcon, ArrowForwardIcon } from '@pancakeswap/uikit'\nimport { formatAmount } from 'views/Info/utils/formatInfoNumbers'\nimport { PoolData } from 'state/info/types'\nimport { ITEMS_PER_INFO_TABLE_PAGE } from 'config/constants/info'\nimport { DoubleCurrencyLogo } from 'views/Info/components/CurrencyLogo'\nimport { useTranslation } from 'contexts/Localization'\nimport { ClickableColumnHeader, TableWrapper, PageButtons, Arrow, Break } from './shared'\n\n/**\n *  Columns on different layouts\n *  5 = | # | Pool | TVL | Volume 24H | Volume 7D |\n *  4 = | # | Pool |     | Volume 24H | Volume 7D |\n *  3 = | # | Pool |     | Volume 24H |           |\n *  2 = |   | Pool |     | Volume 24H |           |\n */\nconst ResponsiveGrid = styled.div`\n  display: grid;\n  grid-gap: 1em;\n  align-items: center;\n  grid-template-columns: 20px 3.5fr repeat(5, 1fr);\n\n  padding: 0 24px;\n  @media screen and (max-width: 900px) {\n    grid-template-columns: 20px 1.5fr repeat(3, 1fr);\n    & :nth-child(4),\n    & :nth-child(5) {\n      display: none;\n    }\n  }\n  @media screen and (max-width: 500px) {\n    grid-template-columns: 20px 1.5fr repeat(1, 1fr);\n    & :nth-child(4),\n    & :nth-child(5),\n    & :nth-child(6),\n    & :nth-child(7) {\n      display: none;\n    }\n  }\n  @media screen and (max-width: 480px) {\n    grid-template-columns: 2.5fr repeat(1, 1fr);\n    > *:nth-child(1) {\n      display: none;\n    }\n  }\n`\n\nconst LinkWrapper = styled(Link)`\n  text-decoration: none;\n  :hover {\n    cursor: pointer;\n    opacity: 0.7;\n  }\n`\n\nconst SORT_FIELD = {\n  volumeUSD: 'volumeUSD',\n  tvlUSD: 'tvlUSD',\n  volumeUSDWeek: 'volumeUSDWeek',\n  lpFees24h: 'lpFees24h',\n  lpApr7d: 'lpApr7d',\n}\n\nconst LoadingRow: React.FC = () => (\n  <ResponsiveGrid>\n    <Skeleton />\n    <Skeleton />\n    <Skeleton />\n    <Skeleton />\n    <Skeleton />\n    <Skeleton />\n    <Skeleton />\n  </ResponsiveGrid>\n)\n\nconst TableLoader: React.FC = () => (\n  <>\n    <LoadingRow />\n    <LoadingRow />\n    <LoadingRow />\n  </>\n)\n\nconst DataRow = ({ poolData, index }: { poolData: PoolData; index: number }) => {\n  return (\n    <LinkWrapper to={`/info/pool/${poolData.address}`}>\n      <ResponsiveGrid>\n        <Text>{index + 1}</Text>\n        <Flex>\n          <DoubleCurrencyLogo address0={poolData.token0.address} address1={poolData.token1.address} />\n          <Text ml=\"8px\">\n            {poolData.token0.symbol}/{poolData.token1.symbol}\n          </Text>\n        </Flex>\n        <Text>${formatAmount(poolData.volumeUSD)}</Text>\n        <Text>${formatAmount(poolData.volumeUSDWeek)}</Text>\n        <Text>${formatAmount(poolData.lpFees24h)}</Text>\n        <Text>{formatAmount(poolData.lpApr7d)}%</Text>\n        <Text>${formatAmount(poolData.liquidityUSD)}</Text>\n      </ResponsiveGrid>\n    </LinkWrapper>\n  )\n}\n\ninterface PoolTableProps {\n  poolDatas: PoolData[]\n  loading?: boolean // If true shows indication that SOME pools are loading, but the ones already fetched will be shown\n}\n\nconst PoolTable: React.FC<PoolTableProps> = ({ poolDatas, loading }) => {\n  // for sorting\n  const [sortField, setSortField] = useState(SORT_FIELD.volumeUSD)\n  const [sortDirection, setSortDirection] = useState<boolean>(true)\n  const { t } = useTranslation()\n\n  // pagination\n  const [page, setPage] = useState(1)\n  const [maxPage, setMaxPage] = useState(1)\n  useEffect(() => {\n    let extraPages = 1\n    if (poolDatas.length % ITEMS_PER_INFO_TABLE_PAGE === 0) {\n      extraPages = 0\n    }\n    setMaxPage(Math.floor(poolDatas.length / ITEMS_PER_INFO_TABLE_PAGE) + extraPages)\n  }, [poolDatas])\n\n  const sortedPools = useMemo(() => {\n    return poolDatas\n      ? poolDatas\n          .sort((a, b) => {\n            if (a && b) {\n              return a[sortField as keyof PoolData] > b[sortField as keyof PoolData]\n                ? (sortDirection ? -1 : 1) * 1\n                : (sortDirection ? -1 : 1) * -1\n            }\n            return -1\n          })\n          .slice(ITEMS_PER_INFO_TABLE_PAGE * (page - 1), page * ITEMS_PER_INFO_TABLE_PAGE)\n      : []\n  }, [page, poolDatas, sortDirection, sortField])\n\n  const handleSort = useCallback(\n    (newField: string) => {\n      setSortField(newField)\n      setSortDirection(sortField !== newField ? true : !sortDirection)\n    },\n    [sortDirection, sortField],\n  )\n\n  const arrow = useCallback(\n    (field: string) => {\n      const directionArrow = !sortDirection ? '↑' : '↓'\n      return sortField === field ? directionArrow : ''\n    },\n    [sortDirection, sortField],\n  )\n\n  return (\n    <TableWrapper>\n      <ResponsiveGrid>\n        <Text color=\"secondary\" fontSize=\"12px\" bold>\n          #\n        </Text>\n        <Text color=\"secondary\" fontSize=\"12px\" bold textTransform=\"uppercase\">\n          {t('Pool')}\n        </Text>\n        <ClickableColumnHeader\n          color=\"secondary\"\n          fontSize=\"12px\"\n          bold\n          onClick={() => handleSort(SORT_FIELD.volumeUSD)}\n          textTransform=\"uppercase\"\n        >\n          {t('Volume 24H')} {arrow(SORT_FIELD.volumeUSD)}\n        </ClickableColumnHeader>\n        <ClickableColumnHeader\n          color=\"secondary\"\n          fontSize=\"12px\"\n          bold\n          onClick={() => handleSort(SORT_FIELD.volumeUSDWeek)}\n          textTransform=\"uppercase\"\n        >\n          {t('Volume 7D')} {arrow(SORT_FIELD.volumeUSDWeek)}\n        </ClickableColumnHeader>\n        <ClickableColumnHeader\n          color=\"secondary\"\n          fontSize=\"12px\"\n          bold\n          onClick={() => handleSort(SORT_FIELD.lpFees24h)}\n          textTransform=\"uppercase\"\n        >\n          {t('LP reward fees 24H')} {arrow(SORT_FIELD.lpFees24h)}\n        </ClickableColumnHeader>\n        <ClickableColumnHeader\n          color=\"secondary\"\n          fontSize=\"12px\"\n          bold\n          onClick={() => handleSort(SORT_FIELD.lpApr7d)}\n          textTransform=\"uppercase\"\n        >\n          {t('LP reward APR')} {arrow(SORT_FIELD.lpApr7d)}\n        </ClickableColumnHeader>\n        <ClickableColumnHeader\n          color=\"secondary\"\n          fontSize=\"12px\"\n          bold\n          onClick={() => handleSort(SORT_FIELD.tvlUSD)}\n          textTransform=\"uppercase\"\n        >\n          {t('Liquidity')} {arrow(SORT_FIELD.tvlUSD)}\n        </ClickableColumnHeader>\n      </ResponsiveGrid>\n      <Break />\n      {sortedPools.length > 0 ? (\n        <>\n          {sortedPools.map((poolData, i) => {\n            if (poolData) {\n              return (\n                <React.Fragment key={poolData.address}>\n                  <DataRow index={(page - 1) * ITEMS_PER_INFO_TABLE_PAGE + i} poolData={poolData} />\n                  <Break />\n                </React.Fragment>\n              )\n            }\n            return null\n          })}\n          {loading && <LoadingRow />}\n          <PageButtons>\n            <Arrow\n              onClick={() => {\n                setPage(page === 1 ? page : page - 1)\n              }}\n            >\n              <ArrowBackIcon color={page === 1 ? 'textDisabled' : 'primary'} />\n            </Arrow>\n\n            <Text>{t('Page %page% of %maxPage%', { page, maxPage })}</Text>\n\n            <Arrow\n              onClick={() => {\n                setPage(page === maxPage ? page : page + 1)\n              }}\n            >\n              <ArrowForwardIcon color={page === maxPage ? 'textDisabled' : 'primary'} />\n            </Arrow>\n          </PageButtons>\n        </>\n      ) : (\n        <>\n          <TableLoader />\n          {/* spacer */}\n          <Box />\n        </>\n      )}\n    </TableWrapper>\n  )\n}\n\nexport default PoolTable\n"]},"metadata":{},"sourceType":"module"}