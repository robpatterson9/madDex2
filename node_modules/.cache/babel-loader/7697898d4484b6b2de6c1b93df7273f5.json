{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef}from'react';import{useWeb3React}from'@web3-react/core';import{Helmet}from'react-helmet-async';import{useMatchBreakpoints,useModal}from'@pancakeswap/uikit';import{useAppDispatch}from'state';import{useGetPredictionsStatus,useIsChartPaneOpen}from'state/predictions/hooks';import{useInitialBlock}from'state/block/hooks';import{initializePredictions}from'state/predictions';import{PredictionStatus}from'state/types';import{useUserPredictionAcceptedRisk,useUserPredictionChartDisclaimerShow}from'state/user/hooks';import PageLoader from'components/Loader/PageLoader';import{PageMeta}from'components/Layout/Page';import usePollOraclePrice from'./hooks/usePollOraclePrice';import usePollPredictions from'./hooks/usePollPredictions';import Container from'./components/Container';import CollectWinningsPopup from'./components/CollectWinningsPopup';import SwiperProvider from'./context/SwiperProvider';import Desktop from'./Desktop';import Mobile from'./Mobile';import RiskDisclaimer from'./components/RiskDisclaimer';import ChartDisclaimer from'./components/ChartDisclaimer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Predictions=function Predictions(){var _useMatchBreakpoints=useMatchBreakpoints(),isDesktop=_useMatchBreakpoints.isDesktop;var _useUserPredictionAcc=useUserPredictionAcceptedRisk(),_useUserPredictionAcc2=_slicedToArray(_useUserPredictionAcc,2),hasAcceptedRisk=_useUserPredictionAcc2[0],setHasAcceptedRisk=_useUserPredictionAcc2[1];var _useUserPredictionCha=useUserPredictionChartDisclaimerShow(),_useUserPredictionCha2=_slicedToArray(_useUserPredictionCha,1),showDisclaimer=_useUserPredictionCha2[0];var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var status=useGetPredictionsStatus();var isChartPaneOpen=useIsChartPaneOpen();var dispatch=useAppDispatch();var initialBlock=useInitialBlock();var handleAcceptRiskSuccess=function handleAcceptRiskSuccess(){return setHasAcceptedRisk(true);};var _useModal=useModal(/*#__PURE__*/_jsx(RiskDisclaimer,{onSuccess:handleAcceptRiskSuccess}),false),_useModal2=_slicedToArray(_useModal,1),onPresentRiskDisclaimer=_useModal2[0];var _useModal3=useModal(/*#__PURE__*/_jsx(ChartDisclaimer,{}),false),_useModal4=_slicedToArray(_useModal3,1),onPresentChartDisclaimer=_useModal4[0];// TODO: memoize modal's handlers\nvar onPresentRiskDisclaimerRef=useRef(onPresentRiskDisclaimer);var onPresentChartDisclaimerRef=useRef(onPresentChartDisclaimer);// Disclaimer\nuseEffect(function(){if(!hasAcceptedRisk){onPresentRiskDisclaimerRef.current();}},[hasAcceptedRisk,onPresentRiskDisclaimerRef]);// Chart Disclaimer\nuseEffect(function(){if(isChartPaneOpen&&showDisclaimer){onPresentChartDisclaimerRef.current();}},[onPresentChartDisclaimerRef,isChartPaneOpen,showDisclaimer]);useEffect(function(){if(initialBlock>0){// Do not start initialization until the first block has been retrieved\ndispatch(initializePredictions(account));}},[initialBlock,dispatch,account]);usePollPredictions();usePollOraclePrice();if(status===PredictionStatus.INITIAL){return/*#__PURE__*/_jsx(PageLoader,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"script\",{src:\"https://s3.tradingview.com/tv.js\",type:\"text/javascript\",id:\"tradingViewWidget\"})}),/*#__PURE__*/_jsx(PageMeta,{}),/*#__PURE__*/_jsx(SwiperProvider,{children:/*#__PURE__*/_jsxs(Container,{children:[isDesktop?/*#__PURE__*/_jsx(Desktop,{}):/*#__PURE__*/_jsx(Mobile,{}),/*#__PURE__*/_jsx(CollectWinningsPopup,{})]})})]});};export default Predictions;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Predictions/index.tsx"],"names":["React","useEffect","useRef","useWeb3React","Helmet","useMatchBreakpoints","useModal","useAppDispatch","useGetPredictionsStatus","useIsChartPaneOpen","useInitialBlock","initializePredictions","PredictionStatus","useUserPredictionAcceptedRisk","useUserPredictionChartDisclaimerShow","PageLoader","PageMeta","usePollOraclePrice","usePollPredictions","Container","CollectWinningsPopup","SwiperProvider","Desktop","Mobile","RiskDisclaimer","ChartDisclaimer","Predictions","isDesktop","hasAcceptedRisk","setHasAcceptedRisk","showDisclaimer","account","status","isChartPaneOpen","dispatch","initialBlock","handleAcceptRiskSuccess","onPresentRiskDisclaimer","onPresentChartDisclaimer","onPresentRiskDisclaimerRef","onPresentChartDisclaimerRef","current","INITIAL"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { Helmet } from 'react-helmet-async'\nimport { useMatchBreakpoints, useModal } from '@pancakeswap/uikit'\nimport { useAppDispatch } from 'state'\nimport { useGetPredictionsStatus, useIsChartPaneOpen } from 'state/predictions/hooks'\nimport { useInitialBlock } from 'state/block/hooks'\nimport { initializePredictions } from 'state/predictions'\nimport { PredictionStatus } from 'state/types'\nimport { useUserPredictionAcceptedRisk, useUserPredictionChartDisclaimerShow } from 'state/user/hooks'\nimport PageLoader from 'components/Loader/PageLoader'\nimport { PageMeta } from 'components/Layout/Page'\nimport usePollOraclePrice from './hooks/usePollOraclePrice'\nimport usePollPredictions from './hooks/usePollPredictions'\nimport Container from './components/Container'\nimport CollectWinningsPopup from './components/CollectWinningsPopup'\nimport SwiperProvider from './context/SwiperProvider'\nimport Desktop from './Desktop'\nimport Mobile from './Mobile'\nimport RiskDisclaimer from './components/RiskDisclaimer'\nimport ChartDisclaimer from './components/ChartDisclaimer'\n\nconst Predictions = () => {\n  const { isDesktop } = useMatchBreakpoints()\n  const [hasAcceptedRisk, setHasAcceptedRisk] = useUserPredictionAcceptedRisk()\n  const [showDisclaimer] = useUserPredictionChartDisclaimerShow()\n  const { account } = useWeb3React()\n  const status = useGetPredictionsStatus()\n  const isChartPaneOpen = useIsChartPaneOpen()\n  const dispatch = useAppDispatch()\n  const initialBlock = useInitialBlock()\n  const handleAcceptRiskSuccess = () => setHasAcceptedRisk(true)\n  const [onPresentRiskDisclaimer] = useModal(<RiskDisclaimer onSuccess={handleAcceptRiskSuccess} />, false)\n  const [onPresentChartDisclaimer] = useModal(<ChartDisclaimer />, false)\n\n  // TODO: memoize modal's handlers\n  const onPresentRiskDisclaimerRef = useRef(onPresentRiskDisclaimer)\n  const onPresentChartDisclaimerRef = useRef(onPresentChartDisclaimer)\n\n  // Disclaimer\n  useEffect(() => {\n    if (!hasAcceptedRisk) {\n      onPresentRiskDisclaimerRef.current()\n    }\n  }, [hasAcceptedRisk, onPresentRiskDisclaimerRef])\n\n  // Chart Disclaimer\n  useEffect(() => {\n    if (isChartPaneOpen && showDisclaimer) {\n      onPresentChartDisclaimerRef.current()\n    }\n  }, [onPresentChartDisclaimerRef, isChartPaneOpen, showDisclaimer])\n\n  useEffect(() => {\n    if (initialBlock > 0) {\n      // Do not start initialization until the first block has been retrieved\n      dispatch(initializePredictions(account))\n    }\n  }, [initialBlock, dispatch, account])\n\n  usePollPredictions()\n  usePollOraclePrice()\n\n  if (status === PredictionStatus.INITIAL) {\n    return <PageLoader />\n  }\n\n  return (\n    <>\n      <Helmet>\n        <script src=\"https://s3.tradingview.com/tv.js\" type=\"text/javascript\" id=\"tradingViewWidget\" />\n      </Helmet>\n      <PageMeta />\n      <SwiperProvider>\n        <Container>\n          {isDesktop ? <Desktop /> : <Mobile />}\n          <CollectWinningsPopup />\n        </Container>\n      </SwiperProvider>\n    </>\n  )\n}\n\nexport default Predictions\n"]},"metadata":{},"sourceType":"module"}