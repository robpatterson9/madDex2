{"ast":null,"code":"import BigNumber from 'bignumber.js';\nimport { deserializeToken } from 'state/user/hooks/helpers';\nimport { BIG_ZERO } from 'utils/bigNumber';\nexport const transformUserData = userData => {\n  return {\n    allowance: userData ? new BigNumber(userData.allowance) : BIG_ZERO,\n    stakingTokenBalance: userData ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO,\n    stakedBalance: userData ? new BigNumber(userData.stakedBalance) : BIG_ZERO,\n    pendingReward: userData ? new BigNumber(userData.pendingReward) : BIG_ZERO\n  };\n};\nexport const transformPool = pool => {\n  const {\n    totalStaked,\n    stakingLimit,\n    userData,\n    stakingToken,\n    earningToken,\n    ...rest\n  } = pool;\n  return { ...rest,\n    stakingToken: deserializeToken(stakingToken),\n    earningToken: deserializeToken(earningToken),\n    userData: transformUserData(userData),\n    totalStaked: new BigNumber(totalStaked),\n    stakingLimit: new BigNumber(stakingLimit)\n  };\n};\nexport const getTokenPricesFromFarm = farms => {\n  return farms.reduce((prices, farm) => {\n    const quoteTokenAddress = farm.quoteToken.address.toLocaleLowerCase();\n    const tokenAddress = farm.token.address.toLocaleLowerCase();\n    /* eslint-disable no-param-reassign */\n\n    if (!prices[quoteTokenAddress]) {\n      prices[quoteTokenAddress] = new BigNumber(farm.quoteTokenPriceBusd).toNumber();\n    }\n\n    if (!prices[tokenAddress]) {\n      prices[tokenAddress] = new BigNumber(farm.tokenPriceBusd).toNumber();\n    }\n    /* eslint-enable no-param-reassign */\n\n\n    return prices;\n  }, {});\n};","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/state/pools/helpers.ts"],"names":["BigNumber","deserializeToken","BIG_ZERO","transformUserData","userData","allowance","stakingTokenBalance","stakedBalance","pendingReward","transformPool","pool","totalStaked","stakingLimit","stakingToken","earningToken","rest","getTokenPricesFromFarm","farms","reduce","prices","farm","quoteTokenAddress","quoteToken","address","toLocaleLowerCase","tokenAddress","token","quoteTokenPriceBusd","toNumber","tokenPriceBusd"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,cAAtB;AAEA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,SAASC,QAAT,QAAyB,iBAAzB;AAWA,OAAO,MAAMC,iBAAiB,GAAIC,QAAD,IAAwB;AACvD,SAAO;AACLC,IAAAA,SAAS,EAAED,QAAQ,GAAG,IAAIJ,SAAJ,CAAcI,QAAQ,CAACC,SAAvB,CAAH,GAAuCH,QADrD;AAELI,IAAAA,mBAAmB,EAAEF,QAAQ,GAAG,IAAIJ,SAAJ,CAAcI,QAAQ,CAACE,mBAAvB,CAAH,GAAiDJ,QAFzE;AAGLK,IAAAA,aAAa,EAAEH,QAAQ,GAAG,IAAIJ,SAAJ,CAAcI,QAAQ,CAACG,aAAvB,CAAH,GAA2CL,QAH7D;AAILM,IAAAA,aAAa,EAAEJ,QAAQ,GAAG,IAAIJ,SAAJ,CAAcI,QAAQ,CAACI,aAAvB,CAAH,GAA2CN;AAJ7D,GAAP;AAMD,CAPM;AASP,OAAO,MAAMO,aAAa,GAAIC,IAAD,IAA4C;AACvE,QAAM;AAAEC,IAAAA,WAAF;AAAeC,IAAAA,YAAf;AAA6BR,IAAAA,QAA7B;AAAuCS,IAAAA,YAAvC;AAAqDC,IAAAA,YAArD;AAAmE,OAAGC;AAAtE,MAA+EL,IAArF;AAEA,SAAO,EACL,GAAGK,IADE;AAELF,IAAAA,YAAY,EAAEZ,gBAAgB,CAACY,YAAD,CAFzB;AAGLC,IAAAA,YAAY,EAAEb,gBAAgB,CAACa,YAAD,CAHzB;AAILV,IAAAA,QAAQ,EAAED,iBAAiB,CAACC,QAAD,CAJtB;AAKLO,IAAAA,WAAW,EAAE,IAAIX,SAAJ,CAAcW,WAAd,CALR;AAMLC,IAAAA,YAAY,EAAE,IAAIZ,SAAJ,CAAcY,YAAd;AANT,GAAP;AAQD,CAXM;AAaP,OAAO,MAAMI,sBAAsB,GAAIC,KAAD,IAA6B;AACjE,SAAOA,KAAK,CAACC,MAAN,CAAa,CAACC,MAAD,EAASC,IAAT,KAAkB;AACpC,UAAMC,iBAAiB,GAAGD,IAAI,CAACE,UAAL,CAAgBC,OAAhB,CAAwBC,iBAAxB,EAA1B;AACA,UAAMC,YAAY,GAAGL,IAAI,CAACM,KAAL,CAAWH,OAAX,CAAmBC,iBAAnB,EAArB;AACA;;AACA,QAAI,CAACL,MAAM,CAACE,iBAAD,CAAX,EAAgC;AAC9BF,MAAAA,MAAM,CAACE,iBAAD,CAAN,GAA4B,IAAIrB,SAAJ,CAAcoB,IAAI,CAACO,mBAAnB,EAAwCC,QAAxC,EAA5B;AACD;;AACD,QAAI,CAACT,MAAM,CAACM,YAAD,CAAX,EAA2B;AACzBN,MAAAA,MAAM,CAACM,YAAD,CAAN,GAAuB,IAAIzB,SAAJ,CAAcoB,IAAI,CAACS,cAAnB,EAAmCD,QAAnC,EAAvB;AACD;AACD;;;AACA,WAAOT,MAAP;AACD,GAZM,EAYJ,EAZI,CAAP;AAaD,CAdM","sourcesContent":["import BigNumber from 'bignumber.js'\nimport { SerializedFarm, DeserializedPool, SerializedPool } from 'state/types'\nimport { deserializeToken } from 'state/user/hooks/helpers'\nimport { BIG_ZERO } from 'utils/bigNumber'\n\ntype UserData =\n  | DeserializedPool['userData']\n  | {\n      allowance: number | string\n      stakingTokenBalance: number | string\n      stakedBalance: number | string\n      pendingReward: number | string\n    }\n\nexport const transformUserData = (userData: UserData) => {\n  return {\n    allowance: userData ? new BigNumber(userData.allowance) : BIG_ZERO,\n    stakingTokenBalance: userData ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO,\n    stakedBalance: userData ? new BigNumber(userData.stakedBalance) : BIG_ZERO,\n    pendingReward: userData ? new BigNumber(userData.pendingReward) : BIG_ZERO,\n  }\n}\n\nexport const transformPool = (pool: SerializedPool): DeserializedPool => {\n  const { totalStaked, stakingLimit, userData, stakingToken, earningToken, ...rest } = pool\n\n  return {\n    ...rest,\n    stakingToken: deserializeToken(stakingToken),\n    earningToken: deserializeToken(earningToken),\n    userData: transformUserData(userData),\n    totalStaked: new BigNumber(totalStaked),\n    stakingLimit: new BigNumber(stakingLimit),\n  }\n}\n\nexport const getTokenPricesFromFarm = (farms: SerializedFarm[]) => {\n  return farms.reduce((prices, farm) => {\n    const quoteTokenAddress = farm.quoteToken.address.toLocaleLowerCase()\n    const tokenAddress = farm.token.address.toLocaleLowerCase()\n    /* eslint-disable no-param-reassign */\n    if (!prices[quoteTokenAddress]) {\n      prices[quoteTokenAddress] = new BigNumber(farm.quoteTokenPriceBusd).toNumber()\n    }\n    if (!prices[tokenAddress]) {\n      prices[tokenAddress] = new BigNumber(farm.tokenPriceBusd).toNumber()\n    }\n    /* eslint-enable no-param-reassign */\n    return prices\n  }, {})\n}\n"]},"metadata":{},"sourceType":"module"}