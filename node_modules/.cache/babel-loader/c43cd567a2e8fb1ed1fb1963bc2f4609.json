{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{useEffect,useMemo,useState}from'react';import{Skeleton,Table,Td,Th,Image,Flex,Text,ArrowUpIcon,ArrowDownIcon}from'@pancakeswap/uikit';import{useHistory}from'react-router';import styled from'styled-components';import times from'lodash/times';import sum from'lodash/sum';import{formatNumber}from'utils/formatBalance';import{getNftsFromCollectionApi}from'state/nftMarket/helpers';import{useTranslation}from'contexts/Localization';import CollapsibleCard from'components/CollapsibleCard';import{useGetLowestPriceFromBunnyId}from'../../hooks/useGetLowestPrice';import{BNBAmountLabel}from'../../components/CollectibleCard/styles';import{StyledSortButton}from'./styles';import{sortBunniesByRarityBuilder}from'./utils';import{nftsBaseUrl}from'../../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NftImage=styled(Image)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  flex: none;\\n  & > img {\\n    border-radius: 8px;\\n  }\\n\"])));var ClickableRow=styled.tr(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n\\n  &:hover {\\n    td {\\n      opacity: 0.65;\\n    }\\n  }\\n\"])));var TableWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  -webkit-overflow-scrolling: touch;\\n  min-width: 320px;\\n  overflow-x: auto;\\n\"])));var NftName=function NftName(_ref){var thumbnailSrc=_ref.thumbnailSrc,name=_ref.name;return/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(NftImage,{src:thumbnailSrc,width:48,height:48,mr:\"8px\"}),/*#__PURE__*/_jsx(Text,{children:name})]});};var LowestPriceCell=function LowestPriceCell(_ref2){var bunnyId=_ref2.bunnyId;var _useGetLowestPriceFro=useGetLowestPriceFromBunnyId(bunnyId),isFetching=_useGetLowestPriceFro.isFetching,lowestPrice=_useGetLowestPriceFro.lowestPrice;if(isFetching){return/*#__PURE__*/_jsx(Flex,{justifyContent:\"flex-end\",width:\"100px\",children:/*#__PURE__*/_jsx(Skeleton,{height:\"24px\",width:\"48px\"})});}if(!lowestPrice){return null;}return/*#__PURE__*/_jsx(BNBAmountLabel,{justifyContent:\"flex-end\",amount:lowestPrice,width:\"100px\"});};var PancakeBunniesTraits=function PancakeBunniesTraits(_ref3){var collectionAddress=_ref3.collectionAddress;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),tokenApiResponse=_useState2[0],setTokenApiResponse=_useState2[1];var _useState3=useState('asc'),_useState4=_slicedToArray(_useState3,2),raritySort=_useState4[0],setRaritySort=_useState4[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useHistory=useHistory(),push=_useHistory.push;useEffect(function(){var fetchTokens=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var apiResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getNftsFromCollectionApi(collectionAddress);case 2:apiResponse=_context.sent;setTokenApiResponse(apiResponse);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchTokens(){return _ref4.apply(this,arguments);};}();fetchTokens();},[collectionAddress,setTokenApiResponse]);var totalMinted=tokenApiResponse?sum(Object.values(tokenApiResponse.attributesDistribution)):0;var sortedBunnieKeys=useMemo(function(){if(!tokenApiResponse)return[];return Object.keys(tokenApiResponse.data).sort(sortBunniesByRarityBuilder({raritySort:raritySort,data:tokenApiResponse}));},[raritySort,tokenApiResponse]);var toggleRaritySort=function toggleRaritySort(){setRaritySort(function(currentValue){return currentValue==='asc'?'desc':'asc';});};return/*#__PURE__*/_jsx(_Fragment,{children:tokenApiResponse?/*#__PURE__*/_jsx(CollapsibleCard,{title:\"Bunny Id\",children:/*#__PURE__*/_jsx(TableWrapper,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(Th,{textAlign:\"left\",children:t('Name')}),/*#__PURE__*/_jsx(Th,{children:t('Count')}),/*#__PURE__*/_jsx(Th,{children:/*#__PURE__*/_jsx(StyledSortButton,{type:\"button\",onClick:toggleRaritySort,children:/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[t('Rarity'),raritySort==='asc'?/*#__PURE__*/_jsx(ArrowUpIcon,{color:\"secondary\"}):/*#__PURE__*/_jsx(ArrowDownIcon,{color:\"secondary\"})]})})}),/*#__PURE__*/_jsx(Th,{textAlign:\"right\",children:t('Lowest')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedBunnieKeys.map(function(bunnyId){var _tokenApiResponse$att;var nft=tokenApiResponse.data[bunnyId];if(!nft){// Some bunnies don't exist on testnet\nreturn null;}var count=(_tokenApiResponse$att=tokenApiResponse.attributesDistribution[bunnyId])!==null&&_tokenApiResponse$att!==void 0?_tokenApiResponse$att:0;var percentage=count/totalMinted*100;var handleClick=function handleClick(){push(\"\".concat(nftsBaseUrl,\"/collections/\").concat(collectionAddress,\"/\").concat(bunnyId));};return/*#__PURE__*/_jsxs(ClickableRow,{onClick:handleClick,title:t('Click to view NFT'),children:[/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(NftName,{thumbnailSrc:nft.image.thumbnail,name:nft.name})}),/*#__PURE__*/_jsx(Td,{textAlign:\"center\",children:formatNumber(count,0,0)}),/*#__PURE__*/_jsx(Td,{textAlign:\"center\",children:\"\".concat(formatNumber(percentage,0,2),\"%\")}),/*#__PURE__*/_jsx(Td,{textAlign:\"right\",width:\"100px\",children:/*#__PURE__*/_jsx(LowestPriceCell,{bunnyId:bunnyId})})]},bunnyId);})})]})})}):/*#__PURE__*/_jsx(CollapsibleCard,{title:t('Loading...'),children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(Th,{textAlign:\"left\",children:t('Name')}),/*#__PURE__*/_jsx(Th,{children:t('Count')}),/*#__PURE__*/_jsx(Th,{children:t('Rarity')}),/*#__PURE__*/_jsx(Th,{children:t('Lowest')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:times(19).map(function(bunnyCnt){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Skeleton,{height:\"48px\",width:\"48px\",mr:\"8px\"}),/*#__PURE__*/_jsx(Skeleton,{width:\"100px\"})]})}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(Skeleton,{})}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(Skeleton,{})})]},bunnyCnt);})})]})})});};export default PancakeBunniesTraits;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Nft/market/Collection/Traits/PancakeBunniesTraits.tsx"],"names":["React","useEffect","useMemo","useState","Skeleton","Table","Td","Th","Image","Flex","Text","ArrowUpIcon","ArrowDownIcon","useHistory","styled","times","sum","formatNumber","getNftsFromCollectionApi","useTranslation","CollapsibleCard","useGetLowestPriceFromBunnyId","BNBAmountLabel","StyledSortButton","sortBunniesByRarityBuilder","nftsBaseUrl","NftImage","ClickableRow","tr","TableWrapper","div","NftName","thumbnailSrc","name","LowestPriceCell","bunnyId","isFetching","lowestPrice","PancakeBunniesTraits","collectionAddress","tokenApiResponse","setTokenApiResponse","raritySort","setRaritySort","t","push","fetchTokens","apiResponse","totalMinted","Object","values","attributesDistribution","sortedBunnieKeys","keys","data","sort","toggleRaritySort","currentValue","map","nft","count","percentage","handleClick","image","thumbnail","bunnyCnt"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from 'react'\nimport { Skeleton, Table, Td, Th, Image, Flex, Text, ArrowUpIcon, ArrowDownIcon } from '@pancakeswap/uikit'\nimport { useHistory } from 'react-router'\nimport styled from 'styled-components'\nimport times from 'lodash/times'\nimport sum from 'lodash/sum'\nimport { formatNumber } from 'utils/formatBalance'\nimport { getNftsFromCollectionApi } from 'state/nftMarket/helpers'\nimport { ApiResponseCollectionTokens } from 'state/nftMarket/types'\nimport { useTranslation } from 'contexts/Localization'\nimport CollapsibleCard from 'components/CollapsibleCard'\nimport { useGetLowestPriceFromBunnyId } from '../../hooks/useGetLowestPrice'\nimport { BNBAmountLabel } from '../../components/CollectibleCard/styles'\nimport { StyledSortButton } from './styles'\nimport { sortBunniesByRarityBuilder } from './utils'\nimport { nftsBaseUrl } from '../../constants'\nimport { SortType } from '../../types'\n\ninterface PancakeBunniesTraitsProps {\n  collectionAddress: string\n}\n\nconst NftImage = styled(Image)`\n  flex: none;\n  & > img {\n    border-radius: 8px;\n  }\n`\n\nconst ClickableRow = styled.tr`\n  cursor: pointer;\n\n  &:hover {\n    td {\n      opacity: 0.65;\n    }\n  }\n`\n\nconst TableWrapper = styled.div`\n  -webkit-overflow-scrolling: touch;\n  min-width: 320px;\n  overflow-x: auto;\n`\n\nconst NftName: React.FC<{ thumbnailSrc: string; name: string }> = ({ thumbnailSrc, name }) => (\n  <Flex alignItems=\"center\">\n    <NftImage src={thumbnailSrc} width={48} height={48} mr=\"8px\" />\n    <Text>{name}</Text>\n  </Flex>\n)\n\nconst LowestPriceCell: React.FC<{ bunnyId: string }> = ({ bunnyId }) => {\n  const { isFetching, lowestPrice } = useGetLowestPriceFromBunnyId(bunnyId)\n\n  if (isFetching) {\n    return (\n      <Flex justifyContent=\"flex-end\" width=\"100px\">\n        <Skeleton height=\"24px\" width=\"48px\" />\n      </Flex>\n    )\n  }\n\n  if (!lowestPrice) {\n    return null\n  }\n\n  return <BNBAmountLabel justifyContent=\"flex-end\" amount={lowestPrice} width=\"100px\" />\n}\n\nconst PancakeBunniesTraits: React.FC<PancakeBunniesTraitsProps> = ({ collectionAddress }) => {\n  const [tokenApiResponse, setTokenApiResponse] = useState<ApiResponseCollectionTokens>(null)\n  const [raritySort, setRaritySort] = useState<SortType>('asc')\n  const { t } = useTranslation()\n  const { push } = useHistory()\n\n  useEffect(() => {\n    const fetchTokens = async () => {\n      const apiResponse = await getNftsFromCollectionApi(collectionAddress)\n      setTokenApiResponse(apiResponse)\n    }\n\n    fetchTokens()\n  }, [collectionAddress, setTokenApiResponse])\n\n  const totalMinted = tokenApiResponse ? sum(Object.values(tokenApiResponse.attributesDistribution)) : 0\n\n  const sortedBunnieKeys = useMemo(() => {\n    if (!tokenApiResponse) return []\n\n    return Object.keys(tokenApiResponse.data).sort(sortBunniesByRarityBuilder({ raritySort, data: tokenApiResponse }))\n  }, [raritySort, tokenApiResponse])\n\n  const toggleRaritySort = () => {\n    setRaritySort((currentValue) => (currentValue === 'asc' ? 'desc' : 'asc'))\n  }\n\n  return (\n    <>\n      {tokenApiResponse ? (\n        <CollapsibleCard title=\"Bunny Id\">\n          <TableWrapper>\n            <Table>\n              <thead>\n                <tr>\n                  <Th textAlign=\"left\">{t('Name')}</Th>\n                  <Th>{t('Count')}</Th>\n                  <Th>\n                    <StyledSortButton type=\"button\" onClick={toggleRaritySort}>\n                      <Flex alignItems=\"center\">\n                        {t('Rarity')}\n                        {raritySort === 'asc' ? <ArrowUpIcon color=\"secondary\" /> : <ArrowDownIcon color=\"secondary\" />}\n                      </Flex>\n                    </StyledSortButton>\n                  </Th>\n                  <Th textAlign=\"right\">{t('Lowest')}</Th>\n                </tr>\n              </thead>\n              <tbody>\n                {sortedBunnieKeys.map((bunnyId) => {\n                  const nft = tokenApiResponse.data[bunnyId]\n                  if (!nft) {\n                    // Some bunnies don't exist on testnet\n                    return null\n                  }\n                  const count: number = tokenApiResponse.attributesDistribution[bunnyId] ?? 0\n                  const percentage = (count / totalMinted) * 100\n                  const handleClick = () => {\n                    push(`${nftsBaseUrl}/collections/${collectionAddress}/${bunnyId}`)\n                  }\n\n                  return (\n                    <ClickableRow key={bunnyId} onClick={handleClick} title={t('Click to view NFT')}>\n                      <Td>\n                        <NftName thumbnailSrc={nft.image.thumbnail} name={nft.name} />\n                      </Td>\n                      <Td textAlign=\"center\">{formatNumber(count, 0, 0)}</Td>\n                      <Td textAlign=\"center\">{`${formatNumber(percentage, 0, 2)}%`}</Td>\n                      <Td textAlign=\"right\" width=\"100px\">\n                        <LowestPriceCell bunnyId={bunnyId} />\n                      </Td>\n                    </ClickableRow>\n                  )\n                })}\n              </tbody>\n            </Table>\n          </TableWrapper>\n        </CollapsibleCard>\n      ) : (\n        <CollapsibleCard title={t('Loading...')}>\n          <Table>\n            <thead>\n              <tr>\n                <Th textAlign=\"left\">{t('Name')}</Th>\n                <Th>{t('Count')}</Th>\n                <Th>{t('Rarity')}</Th>\n                <Th>{t('Lowest')}</Th>\n              </tr>\n            </thead>\n            <tbody>\n              {times(19).map((bunnyCnt) => (\n                <tr key={bunnyCnt}>\n                  <Td>\n                    <Flex alignItems=\"center\">\n                      <Skeleton height=\"48px\" width=\"48px\" mr=\"8px\" />\n                      <Skeleton width=\"100px\" />\n                    </Flex>\n                  </Td>\n                  <Td>\n                    <Skeleton />\n                  </Td>\n                  <Td>\n                    <Skeleton />\n                  </Td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        </CollapsibleCard>\n      )}\n    </>\n  )\n}\n\nexport default PancakeBunniesTraits\n"]},"metadata":{},"sourceType":"module"}