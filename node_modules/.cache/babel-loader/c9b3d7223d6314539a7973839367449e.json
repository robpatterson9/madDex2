{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useRef,useCallback,useState,useMemo}from'react';import{Text,Button,CloseIcon,IconButton,LinkExternal,Input,Link}from'@pancakeswap/uikit';import styled from'styled-components';import Row,{RowBetween,RowFixed}from'components/Layout/Row';import{useToken}from'hooks/Tokens';import{useRemoveUserAddedToken}from'state/user/hooks';import useUserAddedTokens from'state/user/hooks/useUserAddedTokens';import{CurrencyLogo}from'components/Logo';import{getBscScanLink,isAddress}from'utils';import useActiveWeb3React from'hooks/useActiveWeb3React';import{useTranslation}from'contexts/Localization';import Column,{AutoColumn}from'../Layout/Column';import ImportRow from'./ImportRow';import{CurrencyModalView}from'./types';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: calc(100% - 60px);\\n  position: relative;\\n  padding-bottom: 60px;\\n\"])));var Footer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n\"])));export default function ManageTokens(_ref){var setModalView=_ref.setModalView,setImportToken=_ref.setImportToken;var _useActiveWeb3React=useActiveWeb3React(),chainId=_useActiveWeb3React.chainId;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1];// manage focus on modal show\nvar inputRef=useRef();var handleInput=useCallback(function(event){var input=event.target.value;var checksummedInput=isAddress(input);setSearchQuery(checksummedInput||input);},[]);// if they input an address, use it\nvar searchToken=useToken(searchQuery);// all tokens for local list\nvar userAddedTokens=useUserAddedTokens();var removeToken=useRemoveUserAddedToken();var handleRemoveAll=useCallback(function(){if(chainId&&userAddedTokens){userAddedTokens.map(function(token){return removeToken(chainId,token.address);});}},[removeToken,userAddedTokens,chainId]);var tokenList=useMemo(function(){return chainId&&userAddedTokens.map(function(token){return/*#__PURE__*/_jsxs(RowBetween,{width:\"100%\",children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:token,size:\"20px\"}),/*#__PURE__*/_jsx(Link,{external:true,href:getBscScanLink(token.address,'address',chainId),color:\"textSubtle\",ml:\"10px\",children:token.symbol})]}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(IconButton,{variant:\"text\",onClick:function onClick(){return removeToken(chainId,token.address);},children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(LinkExternal,{href:getBscScanLink(token.address,'address',chainId)})]})]},token.address);});},[userAddedTokens,chainId,removeToken]);var isAddressValid=searchQuery===''||isAddress(searchQuery);return/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsxs(Column,{style:{width:'100%',flex:'1 1'},children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"14px\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Input,{id:\"token-search-input\",scale:\"lg\",placeholder:\"0x0000\",value:searchQuery,autoComplete:\"off\",ref:inputRef,onChange:handleInput,isWarning:!isAddressValid})}),!isAddressValid&&/*#__PURE__*/_jsx(Text,{color:\"failure\",children:t('Enter valid token address')}),searchToken&&/*#__PURE__*/_jsx(ImportRow,{token:searchToken,showImportView:function showImportView(){return setModalView(CurrencyModalView.importToken);},setImportToken:setImportToken,style:{height:'fit-content'}})]}),tokenList,/*#__PURE__*/_jsxs(Footer,{children:[/*#__PURE__*/_jsxs(Text,{bold:true,color:\"textSubtle\",children:[userAddedTokens===null||userAddedTokens===void 0?void 0:userAddedTokens.length,\" \",userAddedTokens.length===1?t('Custom Token'):t('Custom Tokens')]}),userAddedTokens.length>0&&/*#__PURE__*/_jsx(Button,{variant:\"tertiary\",onClick:handleRemoveAll,children:t('Clear all')})]})]})});}","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/components/SearchModal/ManageTokens.tsx"],"names":["React","useRef","useCallback","useState","useMemo","Text","Button","CloseIcon","IconButton","LinkExternal","Input","Link","styled","Row","RowBetween","RowFixed","useToken","useRemoveUserAddedToken","useUserAddedTokens","CurrencyLogo","getBscScanLink","isAddress","useActiveWeb3React","useTranslation","Column","AutoColumn","ImportRow","CurrencyModalView","Wrapper","div","Footer","ManageTokens","setModalView","setImportToken","chainId","t","searchQuery","setSearchQuery","inputRef","handleInput","event","input","target","value","checksummedInput","searchToken","userAddedTokens","removeToken","handleRemoveAll","map","token","address","tokenList","symbol","isAddressValid","width","flex","importToken","height","length"],"mappings":"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","sourcesContent":["import React, { useRef, RefObject, useCallback, useState, useMemo } from 'react'\nimport { Token } from '@pancakeswap/sdk'\nimport { Text, Button, CloseIcon, IconButton, LinkExternal, Input, Link } from '@pancakeswap/uikit'\nimport styled from 'styled-components'\nimport Row, { RowBetween, RowFixed } from 'components/Layout/Row'\nimport { useToken } from 'hooks/Tokens'\nimport { useRemoveUserAddedToken } from 'state/user/hooks'\nimport useUserAddedTokens from 'state/user/hooks/useUserAddedTokens'\nimport { CurrencyLogo } from 'components/Logo'\nimport { getBscScanLink, isAddress } from 'utils'\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\nimport { useTranslation } from 'contexts/Localization'\nimport Column, { AutoColumn } from '../Layout/Column'\nimport ImportRow from './ImportRow'\nimport { CurrencyModalView } from './types'\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: calc(100% - 60px);\n  position: relative;\n  padding-bottom: 60px;\n`\n\nconst Footer = styled.div`\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`\n\nexport default function ManageTokens({\n  setModalView,\n  setImportToken,\n}: {\n  setModalView: (view: CurrencyModalView) => void\n  setImportToken: (token: Token) => void\n}) {\n  const { chainId } = useActiveWeb3React()\n\n  const { t } = useTranslation()\n\n  const [searchQuery, setSearchQuery] = useState<string>('')\n\n  // manage focus on modal show\n  const inputRef = useRef<HTMLInputElement>()\n  const handleInput = useCallback((event) => {\n    const input = event.target.value\n    const checksummedInput = isAddress(input)\n    setSearchQuery(checksummedInput || input)\n  }, [])\n\n  // if they input an address, use it\n  const searchToken = useToken(searchQuery)\n\n  // all tokens for local list\n  const userAddedTokens: Token[] = useUserAddedTokens()\n  const removeToken = useRemoveUserAddedToken()\n\n  const handleRemoveAll = useCallback(() => {\n    if (chainId && userAddedTokens) {\n      userAddedTokens.map((token) => {\n        return removeToken(chainId, token.address)\n      })\n    }\n  }, [removeToken, userAddedTokens, chainId])\n\n  const tokenList = useMemo(() => {\n    return (\n      chainId &&\n      userAddedTokens.map((token) => (\n        <RowBetween key={token.address} width=\"100%\">\n          <RowFixed>\n            <CurrencyLogo currency={token} size=\"20px\" />\n            <Link external href={getBscScanLink(token.address, 'address', chainId)} color=\"textSubtle\" ml=\"10px\">\n              {token.symbol}\n            </Link>\n          </RowFixed>\n          <RowFixed>\n            <IconButton variant=\"text\" onClick={() => removeToken(chainId, token.address)}>\n              <CloseIcon />\n            </IconButton>\n            <LinkExternal href={getBscScanLink(token.address, 'address', chainId)} />\n          </RowFixed>\n        </RowBetween>\n      ))\n    )\n  }, [userAddedTokens, chainId, removeToken])\n\n  const isAddressValid = searchQuery === '' || isAddress(searchQuery)\n\n  return (\n    <Wrapper>\n      <Column style={{ width: '100%', flex: '1 1' }}>\n        <AutoColumn gap=\"14px\">\n          <Row>\n            <Input\n              id=\"token-search-input\"\n              scale=\"lg\"\n              placeholder=\"0x0000\"\n              value={searchQuery}\n              autoComplete=\"off\"\n              ref={inputRef as RefObject<HTMLInputElement>}\n              onChange={handleInput}\n              isWarning={!isAddressValid}\n            />\n          </Row>\n          {!isAddressValid && <Text color=\"failure\">{t('Enter valid token address')}</Text>}\n          {searchToken && (\n            <ImportRow\n              token={searchToken}\n              showImportView={() => setModalView(CurrencyModalView.importToken)}\n              setImportToken={setImportToken}\n              style={{ height: 'fit-content' }}\n            />\n          )}\n        </AutoColumn>\n        {tokenList}\n        <Footer>\n          <Text bold color=\"textSubtle\">\n            {userAddedTokens?.length} {userAddedTokens.length === 1 ? t('Custom Token') : t('Custom Tokens')}\n          </Text>\n          {userAddedTokens.length > 0 && (\n            <Button variant=\"tertiary\" onClick={handleRemoveAll}>\n              {t('Clear all')}\n            </Button>\n          )}\n        </Footer>\n      </Column>\n    </Wrapper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}