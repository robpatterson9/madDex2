{"ast":null,"code":"import _toConsumableArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{createReducer}from'@reduxjs/toolkit';import{DEFAULT_DEADLINE_FROM_NOW,INITIAL_ALLOWED_SLIPPAGE}from'../../config/constants';import{updateVersion}from'../global/actions';import{addSerializedPair,addSerializedToken,addWatchlistPool,addWatchlistToken,FarmStakedOnly,removeSerializedPair,removeSerializedToken,muteAudio,toggleTheme,unmuteAudio,updateGasPrice,updateUserDeadline,updateUserExpertMode,updateUserFarmStakedOnly,updateUserFarmsViewMode,updateUserPoolStakedOnly,updateUserPoolsViewMode,updateUserSingleHopOnly,updateUserSlippageTolerance,ViewMode,updateUserPredictionAcceptedRisk,updateUserPredictionChartDisclaimerShow,updateUserUsernameVisibility,updateUserExpertModeAcknowledgementShow}from'./actions';import{GAS_PRICE_GWEI}from'./hooks/helpers';var currentTimestamp=function currentTimestamp(){return new Date().getTime();};function pairKey(token0Address,token1Address){return\"\".concat(token0Address,\";\").concat(token1Address);}export var initialState={userExpertMode:false,userSingleHopOnly:false,userSlippageTolerance:INITIAL_ALLOWED_SLIPPAGE,userDeadline:DEFAULT_DEADLINE_FROM_NOW,tokens:{},pairs:{},timestamp:currentTimestamp(),audioPlay:true,isDark:false,userFarmStakedOnly:FarmStakedOnly.ON_FINISHED,userPoolStakedOnly:false,userPoolsViewMode:ViewMode.TABLE,userFarmsViewMode:ViewMode.TABLE,userPredictionAcceptedRisk:false,userPredictionChartDisclaimerShow:true,userExpertModeAcknowledgementShow:true,userUsernameVisibility:false,gasPrice:GAS_PRICE_GWEI.default,watchlistTokens:[],watchlistPools:[]};export default createReducer(initialState,function(builder){return builder.addCase(updateVersion,function(state){// slippage isnt being tracked in local storage, reset to default\n// noinspection SuspiciousTypeOfGuard\nif(typeof state.userSlippageTolerance!=='number'){state.userSlippageTolerance=INITIAL_ALLOWED_SLIPPAGE;}// deadline isnt being tracked in local storage, reset to default\n// noinspection SuspiciousTypeOfGuard\nif(typeof state.userDeadline!=='number'){state.userDeadline=DEFAULT_DEADLINE_FROM_NOW;}state.lastUpdateVersionTimestamp=currentTimestamp();}).addCase(updateUserExpertMode,function(state,action){state.userExpertMode=action.payload.userExpertMode;state.timestamp=currentTimestamp();}).addCase(updateUserSlippageTolerance,function(state,action){state.userSlippageTolerance=action.payload.userSlippageTolerance;state.timestamp=currentTimestamp();}).addCase(updateUserDeadline,function(state,action){state.userDeadline=action.payload.userDeadline;state.timestamp=currentTimestamp();}).addCase(updateUserSingleHopOnly,function(state,action){state.userSingleHopOnly=action.payload.userSingleHopOnly;}).addCase(addSerializedToken,function(state,_ref){var serializedToken=_ref.payload.serializedToken;if(!state.tokens){state.tokens={};}state.tokens[serializedToken.chainId]=state.tokens[serializedToken.chainId]||{};state.tokens[serializedToken.chainId][serializedToken.address]=serializedToken;state.timestamp=currentTimestamp();}).addCase(removeSerializedToken,function(state,_ref2){var _ref2$payload=_ref2.payload,address=_ref2$payload.address,chainId=_ref2$payload.chainId;if(!state.tokens){state.tokens={};}state.tokens[chainId]=state.tokens[chainId]||{};delete state.tokens[chainId][address];state.timestamp=currentTimestamp();}).addCase(addSerializedPair,function(state,_ref3){var serializedPair=_ref3.payload.serializedPair;if(serializedPair.token0.chainId===serializedPair.token1.chainId&&serializedPair.token0.address!==serializedPair.token1.address){var _chainId=serializedPair.token0.chainId;state.pairs[_chainId]=state.pairs[_chainId]||{};state.pairs[_chainId][pairKey(serializedPair.token0.address,serializedPair.token1.address)]=serializedPair;}state.timestamp=currentTimestamp();}).addCase(removeSerializedPair,function(state,_ref4){var _ref4$payload=_ref4.payload,chainId=_ref4$payload.chainId,tokenAAddress=_ref4$payload.tokenAAddress,tokenBAddress=_ref4$payload.tokenBAddress;if(state.pairs[chainId]){// just delete both keys if either exists\ndelete state.pairs[chainId][pairKey(tokenAAddress,tokenBAddress)];delete state.pairs[chainId][pairKey(tokenBAddress,tokenAAddress)];}state.timestamp=currentTimestamp();}).addCase(muteAudio,function(state){state.audioPlay=false;}).addCase(unmuteAudio,function(state){state.audioPlay=true;}).addCase(toggleTheme,function(state){state.isDark=!state.isDark;}).addCase(updateUserFarmStakedOnly,function(state,_ref5){var userFarmStakedOnly=_ref5.payload.userFarmStakedOnly;state.userFarmStakedOnly=userFarmStakedOnly;}).addCase(updateUserPoolStakedOnly,function(state,_ref6){var userPoolStakedOnly=_ref6.payload.userPoolStakedOnly;state.userPoolStakedOnly=userPoolStakedOnly;}).addCase(updateUserPoolsViewMode,function(state,_ref7){var userPoolsViewMode=_ref7.payload.userPoolsViewMode;state.userPoolsViewMode=userPoolsViewMode;}).addCase(updateUserFarmsViewMode,function(state,_ref8){var userFarmsViewMode=_ref8.payload.userFarmsViewMode;state.userFarmsViewMode=userFarmsViewMode;}).addCase(updateUserPredictionAcceptedRisk,function(state,_ref9){var userAcceptedRisk=_ref9.payload.userAcceptedRisk;state.userPredictionAcceptedRisk=userAcceptedRisk;}).addCase(updateUserPredictionChartDisclaimerShow,function(state,_ref10){var userShowDisclaimer=_ref10.payload.userShowDisclaimer;state.userPredictionChartDisclaimerShow=userShowDisclaimer;}).addCase(updateUserExpertModeAcknowledgementShow,function(state,_ref11){var userExpertModeAcknowledgementShow=_ref11.payload.userExpertModeAcknowledgementShow;state.userExpertModeAcknowledgementShow=userExpertModeAcknowledgementShow;}).addCase(updateUserUsernameVisibility,function(state,_ref12){var userUsernameVisibility=_ref12.payload.userUsernameVisibility;state.userUsernameVisibility=userUsernameVisibility;}).addCase(updateGasPrice,function(state,action){state.gasPrice=action.payload.gasPrice;}).addCase(addWatchlistToken,function(state,_ref13){var _state$watchlistToken;var address=_ref13.payload.address;// state.watchlistTokens can be undefined for pre-loaded localstorage user state\nvar tokenWatchlist=(_state$watchlistToken=state.watchlistTokens)!==null&&_state$watchlistToken!==void 0?_state$watchlistToken:[];if(!tokenWatchlist.includes(address)){state.watchlistTokens=[].concat(_toConsumableArray(tokenWatchlist),[address]);}else{// Remove token from watchlist\nvar newTokens=state.watchlistTokens.filter(function(x){return x!==address;});state.watchlistTokens=newTokens;}}).addCase(addWatchlistPool,function(state,_ref14){var _state$watchlistPools;var address=_ref14.payload.address;// state.watchlistPools can be undefined for pre-loaded localstorage user state\nvar poolsWatchlist=(_state$watchlistPools=state.watchlistPools)!==null&&_state$watchlistPools!==void 0?_state$watchlistPools:[];if(!poolsWatchlist.includes(address)){state.watchlistPools=[].concat(_toConsumableArray(poolsWatchlist),[address]);}else{// Remove pool from watchlist\nvar newPools=state.watchlistPools.filter(function(x){return x!==address;});state.watchlistPools=newPools;}});});","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/state/user/reducer.ts"],"names":["createReducer","DEFAULT_DEADLINE_FROM_NOW","INITIAL_ALLOWED_SLIPPAGE","updateVersion","addSerializedPair","addSerializedToken","addWatchlistPool","addWatchlistToken","FarmStakedOnly","removeSerializedPair","removeSerializedToken","muteAudio","toggleTheme","unmuteAudio","updateGasPrice","updateUserDeadline","updateUserExpertMode","updateUserFarmStakedOnly","updateUserFarmsViewMode","updateUserPoolStakedOnly","updateUserPoolsViewMode","updateUserSingleHopOnly","updateUserSlippageTolerance","ViewMode","updateUserPredictionAcceptedRisk","updateUserPredictionChartDisclaimerShow","updateUserUsernameVisibility","updateUserExpertModeAcknowledgementShow","GAS_PRICE_GWEI","currentTimestamp","Date","getTime","pairKey","token0Address","token1Address","initialState","userExpertMode","userSingleHopOnly","userSlippageTolerance","userDeadline","tokens","pairs","timestamp","audioPlay","isDark","userFarmStakedOnly","ON_FINISHED","userPoolStakedOnly","userPoolsViewMode","TABLE","userFarmsViewMode","userPredictionAcceptedRisk","userPredictionChartDisclaimerShow","userExpertModeAcknowledgementShow","userUsernameVisibility","gasPrice","default","watchlistTokens","watchlistPools","builder","addCase","state","lastUpdateVersionTimestamp","action","payload","serializedToken","chainId","address","serializedPair","token0","token1","tokenAAddress","tokenBAddress","userAcceptedRisk","userShowDisclaimer","tokenWatchlist","includes","newTokens","filter","x","poolsWatchlist","newPools"],"mappings":"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","sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\nimport { SerializedToken } from 'config/constants/types'\nimport { DEFAULT_DEADLINE_FROM_NOW, INITIAL_ALLOWED_SLIPPAGE } from '../../config/constants'\nimport { updateVersion } from '../global/actions'\nimport {\n  addSerializedPair,\n  addSerializedToken,\n  addWatchlistPool,\n  addWatchlistToken,\n  FarmStakedOnly,\n  removeSerializedPair,\n  removeSerializedToken,\n  SerializedPair,\n  muteAudio,\n  toggleTheme,\n  unmuteAudio,\n  updateGasPrice,\n  updateUserDeadline,\n  updateUserExpertMode,\n  updateUserFarmStakedOnly,\n  updateUserFarmsViewMode,\n  updateUserPoolStakedOnly,\n  updateUserPoolsViewMode,\n  updateUserSingleHopOnly,\n  updateUserSlippageTolerance,\n  ViewMode,\n  updateUserPredictionAcceptedRisk,\n  updateUserPredictionChartDisclaimerShow,\n  updateUserUsernameVisibility,\n  updateUserExpertModeAcknowledgementShow,\n} from './actions'\nimport { GAS_PRICE_GWEI } from './hooks/helpers'\n\nconst currentTimestamp = () => new Date().getTime()\n\nexport interface UserState {\n  // the timestamp of the last updateVersion action\n  lastUpdateVersionTimestamp?: number\n\n  userExpertMode: boolean\n\n  // only allow swaps on direct pairs\n  userSingleHopOnly: boolean\n\n  // user defined slippage tolerance in bips, used in all txns\n  userSlippageTolerance: number\n\n  // deadline set by user in minutes, used in all txns\n  userDeadline: number\n\n  tokens: {\n    [chainId: number]: {\n      [address: string]: SerializedToken\n    }\n  }\n\n  pairs: {\n    [chainId: number]: {\n      // keyed by token0Address:token1Address\n      [key: string]: SerializedPair\n    }\n  }\n\n  timestamp: number\n  audioPlay: boolean\n  isDark: boolean\n  userFarmStakedOnly: FarmStakedOnly\n  userPoolStakedOnly: boolean\n  userPoolsViewMode: ViewMode\n  userFarmsViewMode: ViewMode\n  userPredictionAcceptedRisk: boolean\n  userPredictionChartDisclaimerShow: boolean\n  userExpertModeAcknowledgementShow: boolean\n  userUsernameVisibility: boolean\n  gasPrice: string\n  watchlistTokens: string[]\n  watchlistPools: string[]\n}\n\nfunction pairKey(token0Address: string, token1Address: string) {\n  return `${token0Address};${token1Address}`\n}\n\nexport const initialState: UserState = {\n  userExpertMode: false,\n  userSingleHopOnly: false,\n  userSlippageTolerance: INITIAL_ALLOWED_SLIPPAGE,\n  userDeadline: DEFAULT_DEADLINE_FROM_NOW,\n  tokens: {},\n  pairs: {},\n  timestamp: currentTimestamp(),\n  audioPlay: true,\n  isDark: false,\n  userFarmStakedOnly: FarmStakedOnly.ON_FINISHED,\n  userPoolStakedOnly: false,\n  userPoolsViewMode: ViewMode.TABLE,\n  userFarmsViewMode: ViewMode.TABLE,\n  userPredictionAcceptedRisk: false,\n  userPredictionChartDisclaimerShow: true,\n  userExpertModeAcknowledgementShow: true,\n  userUsernameVisibility: false,\n  gasPrice: GAS_PRICE_GWEI.default,\n  watchlistTokens: [],\n  watchlistPools: [],\n}\n\nexport default createReducer(initialState, (builder) =>\n  builder\n    .addCase(updateVersion, (state) => {\n      // slippage isnt being tracked in local storage, reset to default\n      // noinspection SuspiciousTypeOfGuard\n      if (typeof state.userSlippageTolerance !== 'number') {\n        state.userSlippageTolerance = INITIAL_ALLOWED_SLIPPAGE\n      }\n\n      // deadline isnt being tracked in local storage, reset to default\n      // noinspection SuspiciousTypeOfGuard\n      if (typeof state.userDeadline !== 'number') {\n        state.userDeadline = DEFAULT_DEADLINE_FROM_NOW\n      }\n\n      state.lastUpdateVersionTimestamp = currentTimestamp()\n    })\n    .addCase(updateUserExpertMode, (state, action) => {\n      state.userExpertMode = action.payload.userExpertMode\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserSlippageTolerance, (state, action) => {\n      state.userSlippageTolerance = action.payload.userSlippageTolerance\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserDeadline, (state, action) => {\n      state.userDeadline = action.payload.userDeadline\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserSingleHopOnly, (state, action) => {\n      state.userSingleHopOnly = action.payload.userSingleHopOnly\n    })\n    .addCase(addSerializedToken, (state, { payload: { serializedToken } }) => {\n      if (!state.tokens) {\n        state.tokens = {}\n      }\n      state.tokens[serializedToken.chainId] = state.tokens[serializedToken.chainId] || {}\n      state.tokens[serializedToken.chainId][serializedToken.address] = serializedToken\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(removeSerializedToken, (state, { payload: { address, chainId } }) => {\n      if (!state.tokens) {\n        state.tokens = {}\n      }\n      state.tokens[chainId] = state.tokens[chainId] || {}\n      delete state.tokens[chainId][address]\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(addSerializedPair, (state, { payload: { serializedPair } }) => {\n      if (\n        serializedPair.token0.chainId === serializedPair.token1.chainId &&\n        serializedPair.token0.address !== serializedPair.token1.address\n      ) {\n        const { chainId } = serializedPair.token0\n        state.pairs[chainId] = state.pairs[chainId] || {}\n        state.pairs[chainId][pairKey(serializedPair.token0.address, serializedPair.token1.address)] = serializedPair\n      }\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(removeSerializedPair, (state, { payload: { chainId, tokenAAddress, tokenBAddress } }) => {\n      if (state.pairs[chainId]) {\n        // just delete both keys if either exists\n        delete state.pairs[chainId][pairKey(tokenAAddress, tokenBAddress)]\n        delete state.pairs[chainId][pairKey(tokenBAddress, tokenAAddress)]\n      }\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(muteAudio, (state) => {\n      state.audioPlay = false\n    })\n    .addCase(unmuteAudio, (state) => {\n      state.audioPlay = true\n    })\n    .addCase(toggleTheme, (state) => {\n      state.isDark = !state.isDark\n    })\n    .addCase(updateUserFarmStakedOnly, (state, { payload: { userFarmStakedOnly } }) => {\n      state.userFarmStakedOnly = userFarmStakedOnly\n    })\n    .addCase(updateUserPoolStakedOnly, (state, { payload: { userPoolStakedOnly } }) => {\n      state.userPoolStakedOnly = userPoolStakedOnly\n    })\n    .addCase(updateUserPoolsViewMode, (state, { payload: { userPoolsViewMode } }) => {\n      state.userPoolsViewMode = userPoolsViewMode\n    })\n    .addCase(updateUserFarmsViewMode, (state, { payload: { userFarmsViewMode } }) => {\n      state.userFarmsViewMode = userFarmsViewMode\n    })\n    .addCase(updateUserPredictionAcceptedRisk, (state, { payload: { userAcceptedRisk } }) => {\n      state.userPredictionAcceptedRisk = userAcceptedRisk\n    })\n    .addCase(updateUserPredictionChartDisclaimerShow, (state, { payload: { userShowDisclaimer } }) => {\n      state.userPredictionChartDisclaimerShow = userShowDisclaimer\n    })\n    .addCase(updateUserExpertModeAcknowledgementShow, (state, { payload: { userExpertModeAcknowledgementShow } }) => {\n      state.userExpertModeAcknowledgementShow = userExpertModeAcknowledgementShow\n    })\n    .addCase(updateUserUsernameVisibility, (state, { payload: { userUsernameVisibility } }) => {\n      state.userUsernameVisibility = userUsernameVisibility\n    })\n    .addCase(updateGasPrice, (state, action) => {\n      state.gasPrice = action.payload.gasPrice\n    })\n    .addCase(addWatchlistToken, (state, { payload: { address } }) => {\n      // state.watchlistTokens can be undefined for pre-loaded localstorage user state\n      const tokenWatchlist = state.watchlistTokens ?? []\n      if (!tokenWatchlist.includes(address)) {\n        state.watchlistTokens = [...tokenWatchlist, address]\n      } else {\n        // Remove token from watchlist\n        const newTokens = state.watchlistTokens.filter((x) => x !== address)\n        state.watchlistTokens = newTokens\n      }\n    })\n    .addCase(addWatchlistPool, (state, { payload: { address } }) => {\n      // state.watchlistPools can be undefined for pre-loaded localstorage user state\n      const poolsWatchlist = state.watchlistPools ?? []\n      if (!poolsWatchlist.includes(address)) {\n        state.watchlistPools = [...poolsWatchlist, address]\n      } else {\n        // Remove pool from watchlist\n        const newPools = state.watchlistPools.filter((x) => x !== address)\n        state.watchlistPools = newPools\n      }\n    }),\n)\n"]},"metadata":{},"sourceType":"module"}