{"ast":null,"code":"var _jsxFileName = \"/Volumes/evo970/lou/madDex-master/src/views/Nft/market/Profile/components/EditProfileModal/StartView.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useWeb3React } from '@web3-react/core';\nimport { Button, Flex, Text } from '@pancakeswap/uikit';\nimport { formatBigNumber } from 'utils/formatBalance';\nimport { getPancakeProfileAddress } from 'utils/addressHelpers';\nimport { useCake } from 'hooks/useContract';\nimport { FetchStatus, useGetCakeBalance } from 'hooks/useTokenBalance';\nimport { useTranslation } from 'contexts/Localization';\nimport useGetProfileCosts from 'views/Nft/market/Profile/hooks/useGetProfileCosts';\nimport { useProfile } from 'state/profile/hooks';\nimport ProfileAvatarWithTeam from 'components/ProfileAvatarWithTeam';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DangerOutline = styled(Button).attrs({\n  variant: 'secondary'\n})`\n  border-color: ${({\n  theme\n}) => theme.colors.failure};\n  color: ${({\n  theme\n}) => theme.colors.failure};\n  margin-bottom: 24px;\n\n  &:hover:not(:disabled):not(.button--disabled):not(:active) {\n    border-color: ${({\n  theme\n}) => theme.colors.failure};\n    opacity: 0.8;\n  }\n`;\n_c = DangerOutline;\nconst AvatarWrapper = styled.div`\n  height: 64px;\n  width: 64px;\n\n  ${({\n  theme\n}) => theme.mediaQueries.sm} {\n    height: 128px;\n    width: 128px;\n  }\n`;\n_c2 = AvatarWrapper;\n\nconst StartPage = ({\n  goToApprove,\n  goToChange,\n  goToRemove,\n  onDismiss\n}) => {\n  _s();\n\n  const [needsApproval, setNeedsApproval] = useState(null);\n  const {\n    profile\n  } = useProfile();\n  const {\n    numberCakeToUpdate,\n    numberCakeToReactivate\n  } = useGetProfileCosts();\n  const minimumCakeRequired = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate;\n  const {\n    balance: cakeBalance,\n    fetchStatus\n  } = useGetCakeBalance();\n  const hasMinimumCakeRequired = fetchStatus === FetchStatus.SUCCESS && cakeBalance.gte(minimumCakeRequired);\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useWeb3React();\n  const cakeContract = useCake();\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate;\n  /**\n   * Check if the wallet has the required CAKE allowance to change their profile pic or reactivate\n   * If they don't, we send them to the approval screen first\n   */\n\n  useEffect(() => {\n    const checkApprovalStatus = async () => {\n      const response = await cakeContract.allowance(account, getPancakeProfileAddress());\n      setNeedsApproval(response.lt(cost));\n    };\n\n    if (account) {\n      checkApprovalStatus();\n    }\n  }, [account, cost, setNeedsApproval, cakeContract]);\n\n  if (!profile) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Flex, {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    children: [/*#__PURE__*/_jsxDEV(AvatarWrapper, {\n      children: /*#__PURE__*/_jsxDEV(ProfileAvatarWithTeam, {\n        profile: profile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      style: {\n        height: '48px'\n      },\n      justifyContent: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        as: \"p\",\n        color: \"failure\",\n        children: !hasMinimumCakeRequired && t('%minimum% CAKE required to change profile pic', {\n          minimum: formatBigNumber(minimumCakeRequired)\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), profile.isActive ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        width: \"100%\",\n        mb: \"8px\",\n        onClick: needsApproval === true ? goToApprove : goToChange,\n        disabled: !hasMinimumCakeRequired || needsApproval === null,\n        children: t('Change Profile Pic')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(DangerOutline, {\n        width: \"100%\",\n        onClick: goToRemove,\n        children: t('Remove Profile Pic')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(Button, {\n      width: \"100%\",\n      mb: \"8px\",\n      onClick: needsApproval === true ? goToApprove : goToChange,\n      disabled: !hasMinimumCakeRequired || needsApproval === null,\n      children: t('Reactivate Profile')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"text\",\n      width: \"100%\",\n      onClick: onDismiss,\n      children: t('Close Window')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(StartPage, \"pNJfjoiAXamlYZkNKZiL+Syq1jc=\", false, function () {\n  return [useProfile, useGetProfileCosts, useGetCakeBalance, useTranslation, useWeb3React, useCake];\n});\n\n_c3 = StartPage;\nexport default StartPage;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"DangerOutline\");\n$RefreshReg$(_c2, \"AvatarWrapper\");\n$RefreshReg$(_c3, \"StartPage\");","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Nft/market/Profile/components/EditProfileModal/StartView.tsx"],"names":["React","useEffect","useState","styled","useWeb3React","Button","Flex","Text","formatBigNumber","getPancakeProfileAddress","useCake","FetchStatus","useGetCakeBalance","useTranslation","useGetProfileCosts","useProfile","ProfileAvatarWithTeam","DangerOutline","attrs","variant","theme","colors","failure","AvatarWrapper","div","mediaQueries","sm","StartPage","goToApprove","goToChange","goToRemove","onDismiss","needsApproval","setNeedsApproval","profile","numberCakeToUpdate","numberCakeToReactivate","minimumCakeRequired","isActive","balance","cakeBalance","fetchStatus","hasMinimumCakeRequired","SUCCESS","gte","t","account","cakeContract","cost","checkApprovalStatus","response","allowance","lt","height","minimum"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { useWeb3React } from '@web3-react/core'\nimport { Button, Flex, Text, InjectedModalProps } from '@pancakeswap/uikit'\nimport { formatBigNumber } from 'utils/formatBalance'\nimport { getPancakeProfileAddress } from 'utils/addressHelpers'\nimport { useCake } from 'hooks/useContract'\nimport { FetchStatus, useGetCakeBalance } from 'hooks/useTokenBalance'\nimport { useTranslation } from 'contexts/Localization'\nimport useGetProfileCosts from 'views/Nft/market/Profile/hooks/useGetProfileCosts'\nimport { useProfile } from 'state/profile/hooks'\nimport ProfileAvatarWithTeam from 'components/ProfileAvatarWithTeam'\nimport { UseEditProfileResponse } from './reducer'\n\ninterface StartPageProps extends InjectedModalProps {\n  goToChange: UseEditProfileResponse['goToChange']\n  goToRemove: UseEditProfileResponse['goToRemove']\n  goToApprove: UseEditProfileResponse['goToApprove']\n}\n\nconst DangerOutline = styled(Button).attrs({ variant: 'secondary' })`\n  border-color: ${({ theme }) => theme.colors.failure};\n  color: ${({ theme }) => theme.colors.failure};\n  margin-bottom: 24px;\n\n  &:hover:not(:disabled):not(.button--disabled):not(:active) {\n    border-color: ${({ theme }) => theme.colors.failure};\n    opacity: 0.8;\n  }\n`\n\nconst AvatarWrapper = styled.div`\n  height: 64px;\n  width: 64px;\n\n  ${({ theme }) => theme.mediaQueries.sm} {\n    height: 128px;\n    width: 128px;\n  }\n`\n\nconst StartPage: React.FC<StartPageProps> = ({ goToApprove, goToChange, goToRemove, onDismiss }) => {\n  const [needsApproval, setNeedsApproval] = useState(null)\n  const { profile } = useProfile()\n  const { numberCakeToUpdate, numberCakeToReactivate } = useGetProfileCosts()\n  const minimumCakeRequired = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate\n  const { balance: cakeBalance, fetchStatus } = useGetCakeBalance()\n  const hasMinimumCakeRequired = fetchStatus === FetchStatus.SUCCESS && cakeBalance.gte(minimumCakeRequired)\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const cakeContract = useCake()\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate\n\n  /**\n   * Check if the wallet has the required CAKE allowance to change their profile pic or reactivate\n   * If they don't, we send them to the approval screen first\n   */\n  useEffect(() => {\n    const checkApprovalStatus = async () => {\n      const response = await cakeContract.allowance(account, getPancakeProfileAddress())\n      setNeedsApproval(response.lt(cost))\n    }\n\n    if (account) {\n      checkApprovalStatus()\n    }\n  }, [account, cost, setNeedsApproval, cakeContract])\n\n  if (!profile) {\n    return null\n  }\n\n  return (\n    <Flex alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\">\n      <AvatarWrapper>\n        <ProfileAvatarWithTeam profile={profile} />\n      </AvatarWrapper>\n      <Flex alignItems=\"center\" style={{ height: '48px' }} justifyContent=\"center\">\n        <Text as=\"p\" color=\"failure\">\n          {!hasMinimumCakeRequired &&\n            t('%minimum% CAKE required to change profile pic', { minimum: formatBigNumber(minimumCakeRequired) })}\n        </Text>\n      </Flex>\n      {profile.isActive ? (\n        <>\n          <Button\n            width=\"100%\"\n            mb=\"8px\"\n            onClick={needsApproval === true ? goToApprove : goToChange}\n            disabled={!hasMinimumCakeRequired || needsApproval === null}\n          >\n            {t('Change Profile Pic')}\n          </Button>\n          <DangerOutline width=\"100%\" onClick={goToRemove}>\n            {t('Remove Profile Pic')}\n          </DangerOutline>\n        </>\n      ) : (\n        <Button\n          width=\"100%\"\n          mb=\"8px\"\n          onClick={needsApproval === true ? goToApprove : goToChange}\n          disabled={!hasMinimumCakeRequired || needsApproval === null}\n        >\n          {t('Reactivate Profile')}\n        </Button>\n      )}\n      <Button variant=\"text\" width=\"100%\" onClick={onDismiss}>\n        {t('Close Window')}\n      </Button>\n    </Flex>\n  )\n}\n\nexport default StartPage\n"]},"metadata":{},"sourceType":"module"}