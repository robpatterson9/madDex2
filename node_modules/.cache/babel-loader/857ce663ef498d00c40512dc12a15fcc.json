{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useEffect,useRef}from'react';import{useSelector}from'react-redux';import{useAppDispatch}from'state';import useIsWindowVisible from'hooks/useIsWindowVisible';import{simpleRpcProvider}from'utils/providers';import{setBlock}from'.';export var usePollBlockNumber=function usePollBlockNumber(){var timer=useRef(null);var dispatch=useAppDispatch();var isWindowVisible=useIsWindowVisible();useEffect(function(){if(isWindowVisible){timer.current=setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var blockNumber;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return simpleRpcProvider.getBlockNumber();case 2:blockNumber=_context.sent;dispatch(setBlock(blockNumber));case 4:case\"end\":return _context.stop();}}},_callee);})),6000);}else{clearInterval(timer.current);}return function(){return clearInterval(timer.current);};},[dispatch,timer,isWindowVisible]);};export var useBlock=function useBlock(){return useSelector(function(state){return state.block;});};export var useInitialBlock=function useInitialBlock(){return useSelector(function(state){return state.block.initialBlock;});};","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/state/block/hooks.ts"],"names":["useEffect","useRef","useSelector","useAppDispatch","useIsWindowVisible","simpleRpcProvider","setBlock","usePollBlockNumber","timer","dispatch","isWindowVisible","current","setInterval","getBlockNumber","blockNumber","clearInterval","useBlock","state","block","useInitialBlock","initialBlock"],"mappings":"6SAAA,OAASA,SAAT,CAAoBC,MAApB,KAAkC,OAAlC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,cAAT,KAA+B,OAA/B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,0BAA/B,CACA,OAASC,iBAAT,KAAkC,iBAAlC,CACA,OAASC,QAAT,KAAyB,GAAzB,CAGA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CACtC,GAAMC,CAAAA,KAAK,CAAGP,MAAM,CAAC,IAAD,CAApB,CACA,GAAMQ,CAAAA,QAAQ,CAAGN,cAAc,EAA/B,CACA,GAAMO,CAAAA,eAAe,CAAGN,kBAAkB,EAA1C,CAEAJ,SAAS,CAAC,UAAM,CACd,GAAIU,eAAJ,CAAqB,CACnBF,KAAK,CAACG,OAAN,CAAgBC,WAAW,sEAAC,yKACAP,CAAAA,iBAAiB,CAACQ,cAAlB,EADA,QACpBC,WADoB,eAE1BL,QAAQ,CAACH,QAAQ,CAACQ,WAAD,CAAT,CAAR,CAF0B,sDAAD,GAGxB,IAHwB,CAA3B,CAID,CALD,IAKO,CACLC,aAAa,CAACP,KAAK,CAACG,OAAP,CAAb,CACD,CAED,MAAO,kBAAMI,CAAAA,aAAa,CAACP,KAAK,CAACG,OAAP,CAAnB,EAAP,CACD,CAXQ,CAWN,CAACF,QAAD,CAAWD,KAAX,CAAkBE,eAAlB,CAXM,CAAT,CAYD,CAjBM,CAmBP,MAAO,IAAMM,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAC5B,MAAOd,CAAAA,WAAW,CAAC,SAACe,KAAD,QAAkBA,CAAAA,KAAK,CAACC,KAAxB,EAAD,CAAlB,CACD,CAFM,CAIP,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CACnC,MAAOjB,CAAAA,WAAW,CAAC,SAACe,KAAD,QAAkBA,CAAAA,KAAK,CAACC,KAAN,CAAYE,YAA9B,EAAD,CAAlB,CACD,CAFM","sourcesContent":["import { useEffect, useRef } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useAppDispatch } from 'state'\nimport useIsWindowVisible from 'hooks/useIsWindowVisible'\nimport { simpleRpcProvider } from 'utils/providers'\nimport { setBlock } from '.'\nimport { State } from '../types'\n\nexport const usePollBlockNumber = () => {\n  const timer = useRef(null)\n  const dispatch = useAppDispatch()\n  const isWindowVisible = useIsWindowVisible()\n\n  useEffect(() => {\n    if (isWindowVisible) {\n      timer.current = setInterval(async () => {\n        const blockNumber = await simpleRpcProvider.getBlockNumber()\n        dispatch(setBlock(blockNumber))\n      }, 6000)\n    } else {\n      clearInterval(timer.current)\n    }\n\n    return () => clearInterval(timer.current)\n  }, [dispatch, timer, isWindowVisible])\n}\n\nexport const useBlock = () => {\n  return useSelector((state: State) => state.block)\n}\n\nexport const useInitialBlock = () => {\n  return useSelector((state: State) => state.block.initialBlock)\n}\n"]},"metadata":{},"sourceType":"module"}