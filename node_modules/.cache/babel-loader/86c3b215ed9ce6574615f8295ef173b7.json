{"ast":null,"code":"var _jsxFileName = \"/Volumes/evo970/lou/madDex-master/src/views/Pools/components/PoolCard/Modals/StakeModal.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Modal, Text, Flex, Image, Button, Slider, BalanceInput, AutoRenewIcon, Link, CalculateIcon, IconButton } from '@pancakeswap/uikit';\nimport { useTranslation } from 'contexts/Localization';\nimport useTheme from 'hooks/useTheme';\nimport useToast from 'hooks/useToast';\nimport BigNumber from 'bignumber.js';\nimport RoiCalculatorModal from 'components/RoiCalculatorModal';\nimport { getFullDisplayBalance, formatNumber, getDecimalAmount } from 'utils/formatBalance';\nimport { getInterestBreakdown } from 'utils/compoundApyHelpers';\nimport PercentageButton from './PercentageButton';\nimport useStakePool from '../../../hooks/useStakePool';\nimport useUnstakePool from '../../../hooks/useUnstakePool';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StyledLink = styled(Link)`\n  width: 100%;\n`;\n_c = StyledLink;\nconst AnnualRoiContainer = styled(Flex)`\n  cursor: pointer;\n`;\n_c2 = AnnualRoiContainer;\nconst AnnualRoiDisplay = styled(Text)`\n  width: 72px;\n  max-width: 72px;\n  overflow: hidden;\n  text-align: right;\n  text-overflow: ellipsis;\n`;\n_c3 = AnnualRoiDisplay;\n\nconst StakeModal = ({\n  isBnbPool,\n  pool,\n  stakingTokenBalance,\n  stakingTokenPrice,\n  isRemovingStake = false,\n  onDismiss\n}) => {\n  _s();\n\n  const {\n    sousId,\n    stakingToken,\n    earningTokenPrice,\n    apr,\n    userData,\n    stakingLimit,\n    earningToken\n  } = pool;\n  const {\n    t\n  } = useTranslation();\n  const {\n    theme\n  } = useTheme();\n  const {\n    onStake\n  } = useStakePool(sousId, isBnbPool);\n  const {\n    onUnstake\n  } = useUnstakePool(sousId, pool.enableEmergencyWithdraw);\n  const {\n    toastSuccess,\n    toastError\n  } = useToast();\n  const [pendingTx, setPendingTx] = useState(false);\n  const [stakeAmount, setStakeAmount] = useState('');\n  const [hasReachedStakeLimit, setHasReachedStakedLimit] = useState(false);\n  const [percent, setPercent] = useState(0);\n  const [showRoiCalculator, setShowRoiCalculator] = useState(false);\n\n  const getCalculatedStakingLimit = () => {\n    if (isRemovingStake) {\n      return userData.stakedBalance;\n    }\n\n    return stakingLimit.gt(0) && stakingTokenBalance.gt(stakingLimit) ? stakingLimit : stakingTokenBalance;\n  };\n\n  const fullDecimalStakeAmount = getDecimalAmount(new BigNumber(stakeAmount), stakingToken.decimals);\n  const userNotEnoughToken = isRemovingStake ? userData.stakedBalance.lt(fullDecimalStakeAmount) : userData.stakingTokenBalance.lt(fullDecimalStakeAmount);\n  const usdValueStaked = new BigNumber(stakeAmount).times(stakingTokenPrice);\n  const formattedUsdValueStaked = !usdValueStaked.isNaN() && formatNumber(usdValueStaked.toNumber());\n  const interestBreakdown = getInterestBreakdown({\n    principalInUSD: !usdValueStaked.isNaN() ? usdValueStaked.toNumber() : 0,\n    apr,\n    earningTokenPrice\n  });\n  const annualRoi = interestBreakdown[3] * pool.earningTokenPrice;\n  const formattedAnnualRoi = formatNumber(annualRoi, annualRoi > 10000 ? 0 : 2, annualRoi > 10000 ? 0 : 2);\n  const getTokenLink = stakingToken.address ? `/swap?outputCurrency=${stakingToken.address}` : '/swap';\n  useEffect(() => {\n    if (stakingLimit.gt(0) && !isRemovingStake) {\n      setHasReachedStakedLimit(fullDecimalStakeAmount.plus(userData.stakedBalance).gt(stakingLimit));\n    }\n  }, [stakeAmount, stakingLimit, userData, stakingToken, isRemovingStake, setHasReachedStakedLimit, fullDecimalStakeAmount]);\n\n  const handleStakeInputChange = input => {\n    if (input) {\n      const convertedInput = getDecimalAmount(new BigNumber(input), stakingToken.decimals);\n      const percentage = Math.floor(convertedInput.dividedBy(getCalculatedStakingLimit()).multipliedBy(100).toNumber());\n      setPercent(Math.min(percentage, 100));\n    } else {\n      setPercent(0);\n    }\n\n    setStakeAmount(input);\n  };\n\n  const handleChangePercent = sliderPercent => {\n    if (sliderPercent > 0) {\n      const percentageOfStakingMax = getCalculatedStakingLimit().dividedBy(100).multipliedBy(sliderPercent);\n      const amountToStake = getFullDisplayBalance(percentageOfStakingMax, stakingToken.decimals, stakingToken.decimals);\n      setStakeAmount(amountToStake);\n    } else {\n      setStakeAmount('');\n    }\n\n    setPercent(sliderPercent);\n  };\n\n  const handleConfirmClick = async () => {\n    setPendingTx(true);\n\n    try {\n      if (isRemovingStake) {\n        // unstaking\n        await onUnstake(stakeAmount, stakingToken.decimals);\n        toastSuccess(`${t('Unstaked')}!`, t('Your %symbol% earnings have also been harvested to your wallet!', {\n          symbol: earningToken.symbol\n        }));\n      } else {\n        // staking\n        await onStake(stakeAmount, stakingToken.decimals);\n        toastSuccess(`${t('Staked')}!`, t('Your %symbol% funds have been staked in the pool!', {\n          symbol: stakingToken.symbol\n        }));\n      }\n\n      setPendingTx(false);\n      onDismiss();\n    } catch (e) {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));\n      setPendingTx(false);\n    }\n  };\n\n  if (showRoiCalculator) {\n    return /*#__PURE__*/_jsxDEV(RoiCalculatorModal, {\n      earningTokenPrice: earningTokenPrice,\n      stakingTokenPrice: stakingTokenPrice,\n      apr: apr,\n      linkLabel: t('Get %symbol%', {\n        symbol: stakingToken.symbol\n      }),\n      linkHref: getTokenLink,\n      stakingTokenBalance: userData.stakedBalance.plus(stakingTokenBalance),\n      stakingTokenSymbol: stakingToken.symbol,\n      earningTokenSymbol: earningToken.symbol,\n      onBack: () => setShowRoiCalculator(false),\n      initialValue: stakeAmount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    minWidth: \"346px\",\n    title: isRemovingStake ? t('Unstake') : t('Stake in Pool'),\n    onDismiss: onDismiss,\n    headerBackground: theme.colors.gradients.cardHeader,\n    children: [stakingLimit.gt(0) && !isRemovingStake && /*#__PURE__*/_jsxDEV(Text, {\n      color: \"secondary\",\n      bold: true,\n      mb: \"24px\",\n      style: {\n        textAlign: 'center'\n      },\n      fontSize: \"16px\",\n      children: t('Max stake for this pool: %amount% %token%', {\n        amount: getFullDisplayBalance(stakingLimit, stakingToken.decimals, 0),\n        token: stakingToken.symbol\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      mb: \"8px\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        bold: true,\n        children: [isRemovingStake ? t('Unstake') : t('Stake'), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        alignItems: \"center\",\n        minWidth: \"70px\",\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          src: `/images/tokens/${stakingToken.address}.png`,\n          width: 24,\n          height: 24,\n          alt: stakingToken.symbol\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          ml: \"4px\",\n          bold: true,\n          children: stakingToken.symbol\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BalanceInput, {\n      value: stakeAmount,\n      onUserInput: handleStakeInputChange,\n      currencyValue: stakingTokenPrice !== 0 && `~${formattedUsdValueStaked || 0} USD`,\n      isWarning: hasReachedStakeLimit || userNotEnoughToken,\n      decimals: stakingToken.decimals\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), hasReachedStakeLimit && /*#__PURE__*/_jsxDEV(Text, {\n      color: \"failure\",\n      fontSize: \"12px\",\n      style: {\n        textAlign: 'right'\n      },\n      mt: \"4px\",\n      children: t('Maximum total stake: %amount% %token%', {\n        amount: getFullDisplayBalance(new BigNumber(stakingLimit), stakingToken.decimals, 0),\n        token: stakingToken.symbol\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }, this), userNotEnoughToken && /*#__PURE__*/_jsxDEV(Text, {\n      color: \"failure\",\n      fontSize: \"12px\",\n      style: {\n        textAlign: 'right'\n      },\n      mt: \"4px\",\n      children: t('Insufficient %symbol% balance', {\n        symbol: stakingToken.symbol\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Text, {\n      ml: \"auto\",\n      color: \"textSubtle\",\n      fontSize: \"12px\",\n      mb: \"8px\",\n      children: t('Balance: %balance%', {\n        balance: getFullDisplayBalance(getCalculatedStakingLimit(), stakingToken.decimals)\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Slider, {\n      min: 0,\n      max: 100,\n      value: percent,\n      onValueChanged: handleChangePercent,\n      name: \"stake\",\n      valueLabel: `${percent}%`,\n      step: 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      mt: \"8px\",\n      children: [/*#__PURE__*/_jsxDEV(PercentageButton, {\n        onClick: () => handleChangePercent(25),\n        children: \"25%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PercentageButton, {\n        onClick: () => handleChangePercent(50),\n        children: \"50%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PercentageButton, {\n        onClick: () => handleChangePercent(75),\n        children: \"75%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PercentageButton, {\n        onClick: () => handleChangePercent(100),\n        children: t('Max')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), !isRemovingStake && /*#__PURE__*/_jsxDEV(Flex, {\n      mt: \"24px\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        mr: \"8px\",\n        color: \"textSubtle\",\n        children: [t('Annual ROI at current rates'), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AnnualRoiContainer, {\n        alignItems: \"center\",\n        onClick: () => setShowRoiCalculator(true),\n        children: [/*#__PURE__*/_jsxDEV(AnnualRoiDisplay, {\n          children: [\"$\", formattedAnnualRoi]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          variant: \"text\",\n          scale: \"sm\",\n          children: /*#__PURE__*/_jsxDEV(CalculateIcon, {\n            color: \"textSubtle\",\n            width: \"18px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      isLoading: pendingTx,\n      endIcon: pendingTx ? /*#__PURE__*/_jsxDEV(AutoRenewIcon, {\n        spin: true,\n        color: \"currentColor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 30\n      }, this) : null,\n      onClick: handleConfirmClick,\n      disabled: !stakeAmount || parseFloat(stakeAmount) === 0 || hasReachedStakeLimit || userNotEnoughToken,\n      mt: \"24px\",\n      children: pendingTx ? t('Confirming') : t('Confirm')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), !isRemovingStake && /*#__PURE__*/_jsxDEV(StyledLink, {\n      external: true,\n      href: getTokenLink,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        width: \"100%\",\n        mt: \"8px\",\n        variant: \"secondary\",\n        children: t('Get %symbol%', {\n          symbol: stakingToken.symbol\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n};\n\n_s(StakeModal, \"RilidMpA7e7rjbYXhnfxJawZY8c=\", false, function () {\n  return [useTranslation, useTheme, useStakePool, useUnstakePool, useToast];\n});\n\n_c4 = StakeModal;\nexport default StakeModal;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"StyledLink\");\n$RefreshReg$(_c2, \"AnnualRoiContainer\");\n$RefreshReg$(_c3, \"AnnualRoiDisplay\");\n$RefreshReg$(_c4, \"StakeModal\");","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Pools/components/PoolCard/Modals/StakeModal.tsx"],"names":["React","useEffect","useState","styled","Modal","Text","Flex","Image","Button","Slider","BalanceInput","AutoRenewIcon","Link","CalculateIcon","IconButton","useTranslation","useTheme","useToast","BigNumber","RoiCalculatorModal","getFullDisplayBalance","formatNumber","getDecimalAmount","getInterestBreakdown","PercentageButton","useStakePool","useUnstakePool","StyledLink","AnnualRoiContainer","AnnualRoiDisplay","StakeModal","isBnbPool","pool","stakingTokenBalance","stakingTokenPrice","isRemovingStake","onDismiss","sousId","stakingToken","earningTokenPrice","apr","userData","stakingLimit","earningToken","t","theme","onStake","onUnstake","enableEmergencyWithdraw","toastSuccess","toastError","pendingTx","setPendingTx","stakeAmount","setStakeAmount","hasReachedStakeLimit","setHasReachedStakedLimit","percent","setPercent","showRoiCalculator","setShowRoiCalculator","getCalculatedStakingLimit","stakedBalance","gt","fullDecimalStakeAmount","decimals","userNotEnoughToken","lt","usdValueStaked","times","formattedUsdValueStaked","isNaN","toNumber","interestBreakdown","principalInUSD","annualRoi","formattedAnnualRoi","getTokenLink","address","plus","handleStakeInputChange","input","convertedInput","percentage","Math","floor","dividedBy","multipliedBy","min","handleChangePercent","sliderPercent","percentageOfStakingMax","amountToStake","handleConfirmClick","symbol","e","colors","gradients","cardHeader","textAlign","amount","token","balance","parseFloat"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport {\n  Modal,\n  Text,\n  Flex,\n  Image,\n  Button,\n  Slider,\n  BalanceInput,\n  AutoRenewIcon,\n  Link,\n  CalculateIcon,\n  IconButton,\n} from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport useTheme from 'hooks/useTheme'\nimport useToast from 'hooks/useToast'\nimport BigNumber from 'bignumber.js'\nimport RoiCalculatorModal from 'components/RoiCalculatorModal'\nimport { getFullDisplayBalance, formatNumber, getDecimalAmount } from 'utils/formatBalance'\nimport { DeserializedPool } from 'state/types'\nimport { getInterestBreakdown } from 'utils/compoundApyHelpers'\nimport PercentageButton from './PercentageButton'\nimport useStakePool from '../../../hooks/useStakePool'\nimport useUnstakePool from '../../../hooks/useUnstakePool'\n\ninterface StakeModalProps {\n  isBnbPool: boolean\n  pool: DeserializedPool\n  stakingTokenBalance: BigNumber\n  stakingTokenPrice: number\n  isRemovingStake?: boolean\n  onDismiss?: () => void\n}\n\nconst StyledLink = styled(Link)`\n  width: 100%;\n`\n\nconst AnnualRoiContainer = styled(Flex)`\n  cursor: pointer;\n`\n\nconst AnnualRoiDisplay = styled(Text)`\n  width: 72px;\n  max-width: 72px;\n  overflow: hidden;\n  text-align: right;\n  text-overflow: ellipsis;\n`\n\nconst StakeModal: React.FC<StakeModalProps> = ({\n  isBnbPool,\n  pool,\n  stakingTokenBalance,\n  stakingTokenPrice,\n  isRemovingStake = false,\n  onDismiss,\n}) => {\n  const { sousId, stakingToken, earningTokenPrice, apr, userData, stakingLimit, earningToken } = pool\n  const { t } = useTranslation()\n  const { theme } = useTheme()\n  const { onStake } = useStakePool(sousId, isBnbPool)\n  const { onUnstake } = useUnstakePool(sousId, pool.enableEmergencyWithdraw)\n  const { toastSuccess, toastError } = useToast()\n  const [pendingTx, setPendingTx] = useState(false)\n  const [stakeAmount, setStakeAmount] = useState('')\n  const [hasReachedStakeLimit, setHasReachedStakedLimit] = useState(false)\n  const [percent, setPercent] = useState(0)\n  const [showRoiCalculator, setShowRoiCalculator] = useState(false)\n  const getCalculatedStakingLimit = () => {\n    if (isRemovingStake) {\n      return userData.stakedBalance\n    }\n    return stakingLimit.gt(0) && stakingTokenBalance.gt(stakingLimit) ? stakingLimit : stakingTokenBalance\n  }\n  const fullDecimalStakeAmount = getDecimalAmount(new BigNumber(stakeAmount), stakingToken.decimals)\n  const userNotEnoughToken = isRemovingStake\n    ? userData.stakedBalance.lt(fullDecimalStakeAmount)\n    : userData.stakingTokenBalance.lt(fullDecimalStakeAmount)\n\n  const usdValueStaked = new BigNumber(stakeAmount).times(stakingTokenPrice)\n  const formattedUsdValueStaked = !usdValueStaked.isNaN() && formatNumber(usdValueStaked.toNumber())\n\n  const interestBreakdown = getInterestBreakdown({\n    principalInUSD: !usdValueStaked.isNaN() ? usdValueStaked.toNumber() : 0,\n    apr,\n    earningTokenPrice,\n  })\n  const annualRoi = interestBreakdown[3] * pool.earningTokenPrice\n  const formattedAnnualRoi = formatNumber(annualRoi, annualRoi > 10000 ? 0 : 2, annualRoi > 10000 ? 0 : 2)\n\n  const getTokenLink = stakingToken.address ? `/swap?outputCurrency=${stakingToken.address}` : '/swap'\n\n  useEffect(() => {\n    if (stakingLimit.gt(0) && !isRemovingStake) {\n      setHasReachedStakedLimit(fullDecimalStakeAmount.plus(userData.stakedBalance).gt(stakingLimit))\n    }\n  }, [\n    stakeAmount,\n    stakingLimit,\n    userData,\n    stakingToken,\n    isRemovingStake,\n    setHasReachedStakedLimit,\n    fullDecimalStakeAmount,\n  ])\n\n  const handleStakeInputChange = (input: string) => {\n    if (input) {\n      const convertedInput = getDecimalAmount(new BigNumber(input), stakingToken.decimals)\n      const percentage = Math.floor(convertedInput.dividedBy(getCalculatedStakingLimit()).multipliedBy(100).toNumber())\n      setPercent(Math.min(percentage, 100))\n    } else {\n      setPercent(0)\n    }\n    setStakeAmount(input)\n  }\n\n  const handleChangePercent = (sliderPercent: number) => {\n    if (sliderPercent > 0) {\n      const percentageOfStakingMax = getCalculatedStakingLimit().dividedBy(100).multipliedBy(sliderPercent)\n      const amountToStake = getFullDisplayBalance(percentageOfStakingMax, stakingToken.decimals, stakingToken.decimals)\n      setStakeAmount(amountToStake)\n    } else {\n      setStakeAmount('')\n    }\n    setPercent(sliderPercent)\n  }\n\n  const handleConfirmClick = async () => {\n    setPendingTx(true)\n    try {\n      if (isRemovingStake) {\n        // unstaking\n        await onUnstake(stakeAmount, stakingToken.decimals)\n        toastSuccess(\n          `${t('Unstaked')}!`,\n          t('Your %symbol% earnings have also been harvested to your wallet!', {\n            symbol: earningToken.symbol,\n          }),\n        )\n      } else {\n        // staking\n        await onStake(stakeAmount, stakingToken.decimals)\n        toastSuccess(\n          `${t('Staked')}!`,\n          t('Your %symbol% funds have been staked in the pool!', {\n            symbol: stakingToken.symbol,\n          }),\n        )\n      }\n      setPendingTx(false)\n      onDismiss()\n    } catch (e) {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\n      setPendingTx(false)\n    }\n  }\n\n  if (showRoiCalculator) {\n    return (\n      <RoiCalculatorModal\n        earningTokenPrice={earningTokenPrice}\n        stakingTokenPrice={stakingTokenPrice}\n        apr={apr}\n        linkLabel={t('Get %symbol%', { symbol: stakingToken.symbol })}\n        linkHref={getTokenLink}\n        stakingTokenBalance={userData.stakedBalance.plus(stakingTokenBalance)}\n        stakingTokenSymbol={stakingToken.symbol}\n        earningTokenSymbol={earningToken.symbol}\n        onBack={() => setShowRoiCalculator(false)}\n        initialValue={stakeAmount}\n      />\n    )\n  }\n\n  return (\n    <Modal\n      minWidth=\"346px\"\n      title={isRemovingStake ? t('Unstake') : t('Stake in Pool')}\n      onDismiss={onDismiss}\n      headerBackground={theme.colors.gradients.cardHeader}\n    >\n      {stakingLimit.gt(0) && !isRemovingStake && (\n        <Text color=\"secondary\" bold mb=\"24px\" style={{ textAlign: 'center' }} fontSize=\"16px\">\n          {t('Max stake for this pool: %amount% %token%', {\n            amount: getFullDisplayBalance(stakingLimit, stakingToken.decimals, 0),\n            token: stakingToken.symbol,\n          })}\n        </Text>\n      )}\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\n        <Text bold>{isRemovingStake ? t('Unstake') : t('Stake')}:</Text>\n        <Flex alignItems=\"center\" minWidth=\"70px\">\n          <Image src={`/images/tokens/${stakingToken.address}.png`} width={24} height={24} alt={stakingToken.symbol} />\n          <Text ml=\"4px\" bold>\n            {stakingToken.symbol}\n          </Text>\n        </Flex>\n      </Flex>\n      <BalanceInput\n        value={stakeAmount}\n        onUserInput={handleStakeInputChange}\n        currencyValue={stakingTokenPrice !== 0 && `~${formattedUsdValueStaked || 0} USD`}\n        isWarning={hasReachedStakeLimit || userNotEnoughToken}\n        decimals={stakingToken.decimals}\n      />\n      {hasReachedStakeLimit && (\n        <Text color=\"failure\" fontSize=\"12px\" style={{ textAlign: 'right' }} mt=\"4px\">\n          {t('Maximum total stake: %amount% %token%', {\n            amount: getFullDisplayBalance(new BigNumber(stakingLimit), stakingToken.decimals, 0),\n            token: stakingToken.symbol,\n          })}\n        </Text>\n      )}\n      {userNotEnoughToken && (\n        <Text color=\"failure\" fontSize=\"12px\" style={{ textAlign: 'right' }} mt=\"4px\">\n          {t('Insufficient %symbol% balance', {\n            symbol: stakingToken.symbol,\n          })}\n        </Text>\n      )}\n      <Text ml=\"auto\" color=\"textSubtle\" fontSize=\"12px\" mb=\"8px\">\n        {t('Balance: %balance%', {\n          balance: getFullDisplayBalance(getCalculatedStakingLimit(), stakingToken.decimals),\n        })}\n      </Text>\n      <Slider\n        min={0}\n        max={100}\n        value={percent}\n        onValueChanged={handleChangePercent}\n        name=\"stake\"\n        valueLabel={`${percent}%`}\n        step={1}\n      />\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mt=\"8px\">\n        <PercentageButton onClick={() => handleChangePercent(25)}>25%</PercentageButton>\n        <PercentageButton onClick={() => handleChangePercent(50)}>50%</PercentageButton>\n        <PercentageButton onClick={() => handleChangePercent(75)}>75%</PercentageButton>\n        <PercentageButton onClick={() => handleChangePercent(100)}>{t('Max')}</PercentageButton>\n      </Flex>\n      {!isRemovingStake && (\n        <Flex mt=\"24px\" alignItems=\"center\" justifyContent=\"space-between\">\n          <Text mr=\"8px\" color=\"textSubtle\">\n            {t('Annual ROI at current rates')}:\n          </Text>\n          <AnnualRoiContainer alignItems=\"center\" onClick={() => setShowRoiCalculator(true)}>\n            <AnnualRoiDisplay>${formattedAnnualRoi}</AnnualRoiDisplay>\n            <IconButton variant=\"text\" scale=\"sm\">\n              <CalculateIcon color=\"textSubtle\" width=\"18px\" />\n            </IconButton>\n          </AnnualRoiContainer>\n        </Flex>\n      )}\n      <Button\n        isLoading={pendingTx}\n        endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\n        onClick={handleConfirmClick}\n        disabled={!stakeAmount || parseFloat(stakeAmount) === 0 || hasReachedStakeLimit || userNotEnoughToken}\n        mt=\"24px\"\n      >\n        {pendingTx ? t('Confirming') : t('Confirm')}\n      </Button>\n      {!isRemovingStake && (\n        <StyledLink external href={getTokenLink}>\n          <Button width=\"100%\" mt=\"8px\" variant=\"secondary\">\n            {t('Get %symbol%', { symbol: stakingToken.symbol })}\n          </Button>\n        </StyledLink>\n      )}\n    </Modal>\n  )\n}\n\nexport default StakeModal\n"]},"metadata":{},"sourceType":"module"}