{"ast":null,"code":"import { createReducer } from '@reduxjs/toolkit';\nimport { DEFAULT_DEADLINE_FROM_NOW, INITIAL_ALLOWED_SLIPPAGE } from '../../config/constants';\nimport { updateVersion } from '../global/actions';\nimport { addSerializedPair, addSerializedToken, addWatchlistPool, addWatchlistToken, FarmStakedOnly, removeSerializedPair, removeSerializedToken, muteAudio, toggleTheme, unmuteAudio, updateGasPrice, updateUserDeadline, updateUserExpertMode, updateUserFarmStakedOnly, updateUserFarmsViewMode, updateUserPoolStakedOnly, updateUserPoolsViewMode, updateUserSingleHopOnly, updateUserSlippageTolerance, ViewMode, updateUserPredictionAcceptedRisk, updateUserPredictionChartDisclaimerShow, updateUserUsernameVisibility, updateUserExpertModeAcknowledgementShow } from './actions';\nimport { GAS_PRICE_GWEI } from './hooks/helpers';\n\nconst currentTimestamp = () => new Date().getTime();\n\nfunction pairKey(token0Address, token1Address) {\n  return `${token0Address};${token1Address}`;\n}\n\nexport const initialState = {\n  userExpertMode: false,\n  userSingleHopOnly: false,\n  userSlippageTolerance: INITIAL_ALLOWED_SLIPPAGE,\n  userDeadline: DEFAULT_DEADLINE_FROM_NOW,\n  tokens: {},\n  pairs: {},\n  timestamp: currentTimestamp(),\n  audioPlay: true,\n  isDark: false,\n  userFarmStakedOnly: FarmStakedOnly.ON_FINISHED,\n  userPoolStakedOnly: false,\n  userPoolsViewMode: ViewMode.TABLE,\n  userFarmsViewMode: ViewMode.TABLE,\n  userPredictionAcceptedRisk: false,\n  userPredictionChartDisclaimerShow: true,\n  userExpertModeAcknowledgementShow: true,\n  userUsernameVisibility: false,\n  gasPrice: GAS_PRICE_GWEI.default,\n  watchlistTokens: [],\n  watchlistPools: []\n};\nexport default createReducer(initialState, builder => builder.addCase(updateVersion, state => {\n  // slippage isnt being tracked in local storage, reset to default\n  // noinspection SuspiciousTypeOfGuard\n  if (typeof state.userSlippageTolerance !== 'number') {\n    state.userSlippageTolerance = INITIAL_ALLOWED_SLIPPAGE;\n  } // deadline isnt being tracked in local storage, reset to default\n  // noinspection SuspiciousTypeOfGuard\n\n\n  if (typeof state.userDeadline !== 'number') {\n    state.userDeadline = DEFAULT_DEADLINE_FROM_NOW;\n  }\n\n  state.lastUpdateVersionTimestamp = currentTimestamp();\n}).addCase(updateUserExpertMode, (state, action) => {\n  state.userExpertMode = action.payload.userExpertMode;\n  state.timestamp = currentTimestamp();\n}).addCase(updateUserSlippageTolerance, (state, action) => {\n  state.userSlippageTolerance = action.payload.userSlippageTolerance;\n  state.timestamp = currentTimestamp();\n}).addCase(updateUserDeadline, (state, action) => {\n  state.userDeadline = action.payload.userDeadline;\n  state.timestamp = currentTimestamp();\n}).addCase(updateUserSingleHopOnly, (state, action) => {\n  state.userSingleHopOnly = action.payload.userSingleHopOnly;\n}).addCase(addSerializedToken, (state, {\n  payload: {\n    serializedToken\n  }\n}) => {\n  if (!state.tokens) {\n    state.tokens = {};\n  }\n\n  state.tokens[serializedToken.chainId] = state.tokens[serializedToken.chainId] || {};\n  state.tokens[serializedToken.chainId][serializedToken.address] = serializedToken;\n  state.timestamp = currentTimestamp();\n}).addCase(removeSerializedToken, (state, {\n  payload: {\n    address,\n    chainId\n  }\n}) => {\n  if (!state.tokens) {\n    state.tokens = {};\n  }\n\n  state.tokens[chainId] = state.tokens[chainId] || {};\n  delete state.tokens[chainId][address];\n  state.timestamp = currentTimestamp();\n}).addCase(addSerializedPair, (state, {\n  payload: {\n    serializedPair\n  }\n}) => {\n  if (serializedPair.token0.chainId === serializedPair.token1.chainId && serializedPair.token0.address !== serializedPair.token1.address) {\n    const {\n      chainId\n    } = serializedPair.token0;\n    state.pairs[chainId] = state.pairs[chainId] || {};\n    state.pairs[chainId][pairKey(serializedPair.token0.address, serializedPair.token1.address)] = serializedPair;\n  }\n\n  state.timestamp = currentTimestamp();\n}).addCase(removeSerializedPair, (state, {\n  payload: {\n    chainId,\n    tokenAAddress,\n    tokenBAddress\n  }\n}) => {\n  if (state.pairs[chainId]) {\n    // just delete both keys if either exists\n    delete state.pairs[chainId][pairKey(tokenAAddress, tokenBAddress)];\n    delete state.pairs[chainId][pairKey(tokenBAddress, tokenAAddress)];\n  }\n\n  state.timestamp = currentTimestamp();\n}).addCase(muteAudio, state => {\n  state.audioPlay = false;\n}).addCase(unmuteAudio, state => {\n  state.audioPlay = true;\n}).addCase(toggleTheme, state => {\n  state.isDark = !state.isDark;\n}).addCase(updateUserFarmStakedOnly, (state, {\n  payload: {\n    userFarmStakedOnly\n  }\n}) => {\n  state.userFarmStakedOnly = userFarmStakedOnly;\n}).addCase(updateUserPoolStakedOnly, (state, {\n  payload: {\n    userPoolStakedOnly\n  }\n}) => {\n  state.userPoolStakedOnly = userPoolStakedOnly;\n}).addCase(updateUserPoolsViewMode, (state, {\n  payload: {\n    userPoolsViewMode\n  }\n}) => {\n  state.userPoolsViewMode = userPoolsViewMode;\n}).addCase(updateUserFarmsViewMode, (state, {\n  payload: {\n    userFarmsViewMode\n  }\n}) => {\n  state.userFarmsViewMode = userFarmsViewMode;\n}).addCase(updateUserPredictionAcceptedRisk, (state, {\n  payload: {\n    userAcceptedRisk\n  }\n}) => {\n  state.userPredictionAcceptedRisk = userAcceptedRisk;\n}).addCase(updateUserPredictionChartDisclaimerShow, (state, {\n  payload: {\n    userShowDisclaimer\n  }\n}) => {\n  state.userPredictionChartDisclaimerShow = userShowDisclaimer;\n}).addCase(updateUserExpertModeAcknowledgementShow, (state, {\n  payload: {\n    userExpertModeAcknowledgementShow\n  }\n}) => {\n  state.userExpertModeAcknowledgementShow = userExpertModeAcknowledgementShow;\n}).addCase(updateUserUsernameVisibility, (state, {\n  payload: {\n    userUsernameVisibility\n  }\n}) => {\n  state.userUsernameVisibility = userUsernameVisibility;\n}).addCase(updateGasPrice, (state, action) => {\n  state.gasPrice = action.payload.gasPrice;\n}).addCase(addWatchlistToken, (state, {\n  payload: {\n    address\n  }\n}) => {\n  var _state$watchlistToken;\n\n  // state.watchlistTokens can be undefined for pre-loaded localstorage user state\n  const tokenWatchlist = (_state$watchlistToken = state.watchlistTokens) !== null && _state$watchlistToken !== void 0 ? _state$watchlistToken : [];\n\n  if (!tokenWatchlist.includes(address)) {\n    state.watchlistTokens = [...tokenWatchlist, address];\n  } else {\n    // Remove token from watchlist\n    const newTokens = state.watchlistTokens.filter(x => x !== address);\n    state.watchlistTokens = newTokens;\n  }\n}).addCase(addWatchlistPool, (state, {\n  payload: {\n    address\n  }\n}) => {\n  var _state$watchlistPools;\n\n  // state.watchlistPools can be undefined for pre-loaded localstorage user state\n  const poolsWatchlist = (_state$watchlistPools = state.watchlistPools) !== null && _state$watchlistPools !== void 0 ? _state$watchlistPools : [];\n\n  if (!poolsWatchlist.includes(address)) {\n    state.watchlistPools = [...poolsWatchlist, address];\n  } else {\n    // Remove pool from watchlist\n    const newPools = state.watchlistPools.filter(x => x !== address);\n    state.watchlistPools = newPools;\n  }\n}));","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/state/user/reducer.ts"],"names":["createReducer","DEFAULT_DEADLINE_FROM_NOW","INITIAL_ALLOWED_SLIPPAGE","updateVersion","addSerializedPair","addSerializedToken","addWatchlistPool","addWatchlistToken","FarmStakedOnly","removeSerializedPair","removeSerializedToken","muteAudio","toggleTheme","unmuteAudio","updateGasPrice","updateUserDeadline","updateUserExpertMode","updateUserFarmStakedOnly","updateUserFarmsViewMode","updateUserPoolStakedOnly","updateUserPoolsViewMode","updateUserSingleHopOnly","updateUserSlippageTolerance","ViewMode","updateUserPredictionAcceptedRisk","updateUserPredictionChartDisclaimerShow","updateUserUsernameVisibility","updateUserExpertModeAcknowledgementShow","GAS_PRICE_GWEI","currentTimestamp","Date","getTime","pairKey","token0Address","token1Address","initialState","userExpertMode","userSingleHopOnly","userSlippageTolerance","userDeadline","tokens","pairs","timestamp","audioPlay","isDark","userFarmStakedOnly","ON_FINISHED","userPoolStakedOnly","userPoolsViewMode","TABLE","userFarmsViewMode","userPredictionAcceptedRisk","userPredictionChartDisclaimerShow","userExpertModeAcknowledgementShow","userUsernameVisibility","gasPrice","default","watchlistTokens","watchlistPools","builder","addCase","state","lastUpdateVersionTimestamp","action","payload","serializedToken","chainId","address","serializedPair","token0","token1","tokenAAddress","tokenBAddress","userAcceptedRisk","userShowDisclaimer","tokenWatchlist","includes","newTokens","filter","x","poolsWatchlist","newPools"],"mappings":"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","sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\nimport { SerializedToken } from 'config/constants/types'\nimport { DEFAULT_DEADLINE_FROM_NOW, INITIAL_ALLOWED_SLIPPAGE } from '../../config/constants'\nimport { updateVersion } from '../global/actions'\nimport {\n  addSerializedPair,\n  addSerializedToken,\n  addWatchlistPool,\n  addWatchlistToken,\n  FarmStakedOnly,\n  removeSerializedPair,\n  removeSerializedToken,\n  SerializedPair,\n  muteAudio,\n  toggleTheme,\n  unmuteAudio,\n  updateGasPrice,\n  updateUserDeadline,\n  updateUserExpertMode,\n  updateUserFarmStakedOnly,\n  updateUserFarmsViewMode,\n  updateUserPoolStakedOnly,\n  updateUserPoolsViewMode,\n  updateUserSingleHopOnly,\n  updateUserSlippageTolerance,\n  ViewMode,\n  updateUserPredictionAcceptedRisk,\n  updateUserPredictionChartDisclaimerShow,\n  updateUserUsernameVisibility,\n  updateUserExpertModeAcknowledgementShow,\n} from './actions'\nimport { GAS_PRICE_GWEI } from './hooks/helpers'\n\nconst currentTimestamp = () => new Date().getTime()\n\nexport interface UserState {\n  // the timestamp of the last updateVersion action\n  lastUpdateVersionTimestamp?: number\n\n  userExpertMode: boolean\n\n  // only allow swaps on direct pairs\n  userSingleHopOnly: boolean\n\n  // user defined slippage tolerance in bips, used in all txns\n  userSlippageTolerance: number\n\n  // deadline set by user in minutes, used in all txns\n  userDeadline: number\n\n  tokens: {\n    [chainId: number]: {\n      [address: string]: SerializedToken\n    }\n  }\n\n  pairs: {\n    [chainId: number]: {\n      // keyed by token0Address:token1Address\n      [key: string]: SerializedPair\n    }\n  }\n\n  timestamp: number\n  audioPlay: boolean\n  isDark: boolean\n  userFarmStakedOnly: FarmStakedOnly\n  userPoolStakedOnly: boolean\n  userPoolsViewMode: ViewMode\n  userFarmsViewMode: ViewMode\n  userPredictionAcceptedRisk: boolean\n  userPredictionChartDisclaimerShow: boolean\n  userExpertModeAcknowledgementShow: boolean\n  userUsernameVisibility: boolean\n  gasPrice: string\n  watchlistTokens: string[]\n  watchlistPools: string[]\n}\n\nfunction pairKey(token0Address: string, token1Address: string) {\n  return `${token0Address};${token1Address}`\n}\n\nexport const initialState: UserState = {\n  userExpertMode: false,\n  userSingleHopOnly: false,\n  userSlippageTolerance: INITIAL_ALLOWED_SLIPPAGE,\n  userDeadline: DEFAULT_DEADLINE_FROM_NOW,\n  tokens: {},\n  pairs: {},\n  timestamp: currentTimestamp(),\n  audioPlay: true,\n  isDark: false,\n  userFarmStakedOnly: FarmStakedOnly.ON_FINISHED,\n  userPoolStakedOnly: false,\n  userPoolsViewMode: ViewMode.TABLE,\n  userFarmsViewMode: ViewMode.TABLE,\n  userPredictionAcceptedRisk: false,\n  userPredictionChartDisclaimerShow: true,\n  userExpertModeAcknowledgementShow: true,\n  userUsernameVisibility: false,\n  gasPrice: GAS_PRICE_GWEI.default,\n  watchlistTokens: [],\n  watchlistPools: [],\n}\n\nexport default createReducer(initialState, (builder) =>\n  builder\n    .addCase(updateVersion, (state) => {\n      // slippage isnt being tracked in local storage, reset to default\n      // noinspection SuspiciousTypeOfGuard\n      if (typeof state.userSlippageTolerance !== 'number') {\n        state.userSlippageTolerance = INITIAL_ALLOWED_SLIPPAGE\n      }\n\n      // deadline isnt being tracked in local storage, reset to default\n      // noinspection SuspiciousTypeOfGuard\n      if (typeof state.userDeadline !== 'number') {\n        state.userDeadline = DEFAULT_DEADLINE_FROM_NOW\n      }\n\n      state.lastUpdateVersionTimestamp = currentTimestamp()\n    })\n    .addCase(updateUserExpertMode, (state, action) => {\n      state.userExpertMode = action.payload.userExpertMode\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserSlippageTolerance, (state, action) => {\n      state.userSlippageTolerance = action.payload.userSlippageTolerance\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserDeadline, (state, action) => {\n      state.userDeadline = action.payload.userDeadline\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserSingleHopOnly, (state, action) => {\n      state.userSingleHopOnly = action.payload.userSingleHopOnly\n    })\n    .addCase(addSerializedToken, (state, { payload: { serializedToken } }) => {\n      if (!state.tokens) {\n        state.tokens = {}\n      }\n      state.tokens[serializedToken.chainId] = state.tokens[serializedToken.chainId] || {}\n      state.tokens[serializedToken.chainId][serializedToken.address] = serializedToken\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(removeSerializedToken, (state, { payload: { address, chainId } }) => {\n      if (!state.tokens) {\n        state.tokens = {}\n      }\n      state.tokens[chainId] = state.tokens[chainId] || {}\n      delete state.tokens[chainId][address]\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(addSerializedPair, (state, { payload: { serializedPair } }) => {\n      if (\n        serializedPair.token0.chainId === serializedPair.token1.chainId &&\n        serializedPair.token0.address !== serializedPair.token1.address\n      ) {\n        const { chainId } = serializedPair.token0\n        state.pairs[chainId] = state.pairs[chainId] || {}\n        state.pairs[chainId][pairKey(serializedPair.token0.address, serializedPair.token1.address)] = serializedPair\n      }\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(removeSerializedPair, (state, { payload: { chainId, tokenAAddress, tokenBAddress } }) => {\n      if (state.pairs[chainId]) {\n        // just delete both keys if either exists\n        delete state.pairs[chainId][pairKey(tokenAAddress, tokenBAddress)]\n        delete state.pairs[chainId][pairKey(tokenBAddress, tokenAAddress)]\n      }\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(muteAudio, (state) => {\n      state.audioPlay = false\n    })\n    .addCase(unmuteAudio, (state) => {\n      state.audioPlay = true\n    })\n    .addCase(toggleTheme, (state) => {\n      state.isDark = !state.isDark\n    })\n    .addCase(updateUserFarmStakedOnly, (state, { payload: { userFarmStakedOnly } }) => {\n      state.userFarmStakedOnly = userFarmStakedOnly\n    })\n    .addCase(updateUserPoolStakedOnly, (state, { payload: { userPoolStakedOnly } }) => {\n      state.userPoolStakedOnly = userPoolStakedOnly\n    })\n    .addCase(updateUserPoolsViewMode, (state, { payload: { userPoolsViewMode } }) => {\n      state.userPoolsViewMode = userPoolsViewMode\n    })\n    .addCase(updateUserFarmsViewMode, (state, { payload: { userFarmsViewMode } }) => {\n      state.userFarmsViewMode = userFarmsViewMode\n    })\n    .addCase(updateUserPredictionAcceptedRisk, (state, { payload: { userAcceptedRisk } }) => {\n      state.userPredictionAcceptedRisk = userAcceptedRisk\n    })\n    .addCase(updateUserPredictionChartDisclaimerShow, (state, { payload: { userShowDisclaimer } }) => {\n      state.userPredictionChartDisclaimerShow = userShowDisclaimer\n    })\n    .addCase(updateUserExpertModeAcknowledgementShow, (state, { payload: { userExpertModeAcknowledgementShow } }) => {\n      state.userExpertModeAcknowledgementShow = userExpertModeAcknowledgementShow\n    })\n    .addCase(updateUserUsernameVisibility, (state, { payload: { userUsernameVisibility } }) => {\n      state.userUsernameVisibility = userUsernameVisibility\n    })\n    .addCase(updateGasPrice, (state, action) => {\n      state.gasPrice = action.payload.gasPrice\n    })\n    .addCase(addWatchlistToken, (state, { payload: { address } }) => {\n      // state.watchlistTokens can be undefined for pre-loaded localstorage user state\n      const tokenWatchlist = state.watchlistTokens ?? []\n      if (!tokenWatchlist.includes(address)) {\n        state.watchlistTokens = [...tokenWatchlist, address]\n      } else {\n        // Remove token from watchlist\n        const newTokens = state.watchlistTokens.filter((x) => x !== address)\n        state.watchlistTokens = newTokens\n      }\n    })\n    .addCase(addWatchlistPool, (state, { payload: { address } }) => {\n      // state.watchlistPools can be undefined for pre-loaded localstorage user state\n      const poolsWatchlist = state.watchlistPools ?? []\n      if (!poolsWatchlist.includes(address)) {\n        state.watchlistPools = [...poolsWatchlist, address]\n      } else {\n        // Remove pool from watchlist\n        const newPools = state.watchlistPools.filter((x) => x !== address)\n        state.watchlistPools = newPools\n      }\n    }),\n)\n"]},"metadata":{},"sourceType":"module"}