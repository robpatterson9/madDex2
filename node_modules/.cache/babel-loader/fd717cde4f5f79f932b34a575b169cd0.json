{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _excluded=[\"onValidAddress\",\"onAddressClick\"];var _templateObject,_templateObject2;import React,{useState,useEffect}from'react';import{Box,Text,Input}from'@pancakeswap/uikit';import styled from'styled-components';import{isAddress}from'utils';import{useTranslation}from'contexts/Localization';import CircleLoader from'components/Loader/CircleLoader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResultStatus;(function(ResultStatus){ResultStatus[ResultStatus[\"NOT_VALID\"]=0]=\"NOT_VALID\";ResultStatus[ResultStatus[\"FOUND\"]=1]=\"FOUND\";ResultStatus[ResultStatus[\"NOT_FOUND\"]=2]=\"NOT_FOUND\";})(ResultStatus||(ResultStatus={}));var SubMenu=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  background: \",\";\\n  border: 1px solid \",\";\\n  border-radius: 0 0 \",\" \",\";\\n  left: 0;\\n  padding-bottom: 8px;\\n  padding-top: 16px;\\n  position: absolute;\\n  top: calc(100% - 12px);\\n  transition: transform 0.15s, opacity 0.15s;\\n  transform: scaleY(0);\\n  transform-origin: top;\\n  width: 100%;\\n  z-index: 15;\\n\\n  \",\"\\n\"])),function(_ref){var theme=_ref.theme;return theme.colors.input;},function(_ref2){var theme=_ref2.theme;return theme.colors.inputSecondary;},function(_ref3){var theme=_ref3.theme;return theme.radii.default;},function(_ref4){var theme=_ref4.theme;return theme.radii.default;},function(_ref5){var isOpen=_ref5.isOpen;return isOpen&&\"\\n    height: auto;\\n    opacity: 1;\\n    transform: scaleY(1);\\n  \";});var AddressLink=styled(Text)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n  overflow-wrap: break-word;\\n  font-weight: bold;\\n  padding-left: 16px;\\n  padding-right: 16px;\\n\"])));var initialState={isFetching:false,resultFound:ResultStatus.NOT_VALID,value:''};var defaultValidAddressHandler=function defaultValidAddressHandler(){return Promise.resolve(true);};var AddressInputSelect=function AddressInputSelect(_ref6){var _ref6$onValidAddress=_ref6.onValidAddress,onValidAddress=_ref6$onValidAddress===void 0?defaultValidAddressHandler:_ref6$onValidAddress,onAddressClick=_ref6.onAddressClick,props=_objectWithoutProperties(_ref6,_excluded);var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var isFetching=state.isFetching,resultFound=state.resultFound,value=state.value;var handleChange=function handleChange(evt){var newValue=evt.target.value;setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{value:newValue});});};var handleClick=function handleClick(){setState(initialState);onAddressClick(state.value);};// When we have a valid address fetch the data\nuseEffect(function(){var isValidAddress=isAddress(value)!==false;var validAddressHandler=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var hasResults;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isFetching:true});});_context.next=4;return onValidAddress(value);case 4:hasResults=_context.sent;setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isFetching:false,resultFound:hasResults?ResultStatus.FOUND:ResultStatus.NOT_FOUND});});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isFetching:false});});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function validAddressHandler(){return _ref7.apply(this,arguments);};}();if(isValidAddress){validAddressHandler();}else{setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{resultFound:ResultStatus.NOT_VALID});});}},[value,onValidAddress,setState]);return/*#__PURE__*/_jsxs(Box,_objectSpread(_objectSpread({position:\"relative\"},props),{},{children:[/*#__PURE__*/_jsx(Input,{placeholder:t('Search %subject%',{subject:t('Address').toLowerCase()}),value:state.value,onChange:handleChange,style:{position:'relative',zIndex:16,paddingRight:'40px'}}),isFetching&&/*#__PURE__*/_jsx(Box,{position:\"absolute\",top:\"12px\",right:\"16px\",style:{zIndex:17},children:/*#__PURE__*/_jsx(CircleLoader,{})}),/*#__PURE__*/_jsx(SubMenu,{isOpen:resultFound!==ResultStatus.NOT_VALID,children:resultFound===ResultStatus.FOUND?/*#__PURE__*/_jsx(AddressLink,{onClick:handleClick,children:state.value}):/*#__PURE__*/_jsx(Text,{px:\"16px\",fontWeight:\"bold\",children:t('No results found.')})})]}));};export default AddressInputSelect;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/components/AddressInputSelect/index.tsx"],"names":["React","useState","useEffect","Box","Text","Input","styled","isAddress","useTranslation","CircleLoader","ResultStatus","SubMenu","div","theme","colors","input","inputSecondary","radii","default","isOpen","AddressLink","initialState","isFetching","resultFound","NOT_VALID","value","defaultValidAddressHandler","Promise","resolve","AddressInputSelect","onValidAddress","onAddressClick","props","state","setState","t","handleChange","evt","newValue","target","prevState","handleClick","isValidAddress","validAddressHandler","hasResults","FOUND","NOT_FOUND","subject","toLowerCase","position","zIndex","paddingRight"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, useState, useEffect } from 'react'\nimport { Box, BoxProps, Text, Input } from '@pancakeswap/uikit'\nimport styled from 'styled-components'\nimport { isAddress } from 'utils'\nimport { useTranslation } from 'contexts/Localization'\nimport CircleLoader from 'components/Loader/CircleLoader'\n\nenum ResultStatus {\n  NOT_VALID,\n  FOUND,\n  NOT_FOUND,\n}\n\ninterface AddressInputSelectProps extends BoxProps {\n  onValidAddress?: (value: string) => Promise<boolean>\n  onAddressClick: (value: string) => void\n}\n\nconst SubMenu = styled.div<{ isOpen: boolean }>`\n  align-items: center;\n  background: ${({ theme }) => theme.colors.input};\n  border: 1px solid ${({ theme }) => theme.colors.inputSecondary};\n  border-radius: 0 0 ${({ theme }) => theme.radii.default} ${({ theme }) => theme.radii.default};\n  left: 0;\n  padding-bottom: 8px;\n  padding-top: 16px;\n  position: absolute;\n  top: calc(100% - 12px);\n  transition: transform 0.15s, opacity 0.15s;\n  transform: scaleY(0);\n  transform-origin: top;\n  width: 100%;\n  z-index: 15;\n\n  ${({ isOpen }) =>\n    isOpen &&\n    `\n    height: auto;\n    opacity: 1;\n    transform: scaleY(1);\n  `}\n`\n\nconst AddressLink = styled(Text)`\n  cursor: pointer;\n  overflow-wrap: break-word;\n  font-weight: bold;\n  padding-left: 16px;\n  padding-right: 16px;\n`\n\nconst initialState = {\n  isFetching: false,\n  resultFound: ResultStatus.NOT_VALID,\n  value: '',\n}\n\nconst defaultValidAddressHandler = () => Promise.resolve(true)\n\nconst AddressInputSelect: React.FC<AddressInputSelectProps> = ({\n  onValidAddress = defaultValidAddressHandler,\n  onAddressClick,\n  ...props\n}) => {\n  const [state, setState] = useState(initialState)\n  const { t } = useTranslation()\n  const { isFetching, resultFound, value } = state\n\n  const handleChange = (evt: ChangeEvent<HTMLInputElement>) => {\n    const { value: newValue } = evt.target\n    setState((prevState) => ({\n      ...prevState,\n      value: newValue,\n    }))\n  }\n\n  const handleClick = () => {\n    setState(initialState)\n    onAddressClick(state.value)\n  }\n\n  // When we have a valid address fetch the data\n  useEffect(() => {\n    const isValidAddress = isAddress(value) !== false\n\n    const validAddressHandler = async () => {\n      try {\n        setState((prevState) => ({ ...prevState, isFetching: true }))\n        const hasResults = await onValidAddress(value)\n\n        setState((prevState) => ({\n          ...prevState,\n          isFetching: false,\n          resultFound: hasResults ? ResultStatus.FOUND : ResultStatus.NOT_FOUND,\n        }))\n      } catch {\n        setState((prevState) => ({ ...prevState, isFetching: false }))\n      }\n    }\n\n    if (isValidAddress) {\n      validAddressHandler()\n    } else {\n      setState((prevState) => ({ ...prevState, resultFound: ResultStatus.NOT_VALID }))\n    }\n  }, [value, onValidAddress, setState])\n\n  return (\n    <Box position=\"relative\" {...props}>\n      <Input\n        placeholder={t('Search %subject%', { subject: t('Address').toLowerCase() })}\n        value={state.value}\n        onChange={handleChange}\n        style={{ position: 'relative', zIndex: 16, paddingRight: '40px' }}\n      />\n      {isFetching && (\n        <Box position=\"absolute\" top=\"12px\" right=\"16px\" style={{ zIndex: 17 }}>\n          <CircleLoader />\n        </Box>\n      )}\n      <SubMenu isOpen={resultFound !== ResultStatus.NOT_VALID}>\n        {resultFound === ResultStatus.FOUND ? (\n          <AddressLink onClick={handleClick}>{state.value}</AddressLink>\n        ) : (\n          <Text px=\"16px\" fontWeight=\"bold\">\n            {t('No results found.')}\n          </Text>\n        )}\n      </SubMenu>\n    </Box>\n  )\n}\n\nexport default AddressInputSelect\n"]},"metadata":{},"sourceType":"module"}