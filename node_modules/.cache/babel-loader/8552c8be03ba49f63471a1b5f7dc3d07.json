{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{AutoRenewIcon,Button,Checkbox,Flex,Text}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import useGetProfileCosts from'views/Nft/market/Profile/hooks/useGetProfileCosts';import{useAppDispatch}from'state';import{useProfile}from'state/profile/hooks';import{fetchProfile}from'state/profile';import useToast from'hooks/useToast';import{formatBigNumber}from'utils/formatBalance';import{useProfile as useProfileContract}from'hooks/useContract';import{useWeb3React}from'@web3-react/core';import{useCallWithGasPrice}from'hooks/useCallWithGasPrice';import{ToastDescriptionWithTx}from'components/Toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PauseProfilePage=function PauseProfilePage(_ref){var onDismiss=_ref.onDismiss;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAcknowledged=_useState2[0],setIsAcknowledged=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isConfirming=_useState4[0],setIsConfirming=_useState4[1];var _useProfile=useProfile(),profile=_useProfile.profile;var _useGetProfileCosts=useGetProfileCosts(),numberCakeToReactivate=_useGetProfileCosts.numberCakeToReactivate;var _useTranslation=useTranslation(),t=_useTranslation.t;var pancakeProfileContract=useProfileContract();var _useCallWithGasPrice=useCallWithGasPrice(),callWithGasPrice=_useCallWithGasPrice.callWithGasPrice;var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var _useToast=useToast(),toastSuccess=_useToast.toastSuccess,toastError=_useToast.toastError;var dispatch=useAppDispatch();var handleChange=function handleChange(){return setIsAcknowledged(!isAcknowledged);};var handleDeactivateProfile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var tx,receipt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return callWithGasPrice(pancakeProfileContract,'pauseProfile');case 2:tx=_context.sent;setIsConfirming(true);_context.next=6;return tx.wait();case 6:receipt=_context.sent;if(!receipt.status){_context.next=14;break;}_context.next=10;return dispatch(fetchProfile(account));case 10:toastSuccess(t('Profile Paused!'),/*#__PURE__*/_jsx(ToastDescriptionWithTx,{txHash:receipt.transactionHash}));onDismiss();_context.next=16;break;case 14:toastError(t('Error'),t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));setIsConfirming(false);case 16:case\"end\":return _context.stop();}}},_callee);}));return function handleDeactivateProfile(){return _ref2.apply(this,arguments);};}();if(!profile){return null;}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Text,{as:\"p\",color:\"failure\",mb:\"24px\",children:t('This will suspend your profile and send your Collectible back to your wallet')}),/*#__PURE__*/_jsx(Text,{as:\"p\",color:\"textSubtle\",mb:\"24px\",children:t(\"While your profile is suspended, you won't be able to earn points, but your achievements and points will stay associated with your profile\")}),/*#__PURE__*/_jsx(Text,{as:\"p\",color:\"textSubtle\",mb:\"24px\",children:t('Cost to reactivate in the future: %cost% CAKE',{cost:formatBigNumber(numberCakeToReactivate)})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"acknowledgement\",style:{cursor:'pointer',display:'block',marginBottom:'24px'},children:/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Checkbox,{id:\"acknowledgement\",checked:isAcknowledged,onChange:handleChange,scale:\"sm\"}),/*#__PURE__*/_jsx(Text,{ml:\"8px\",children:t('I understand')})]})}),/*#__PURE__*/_jsx(Button,{width:\"100%\",isLoading:isConfirming,endIcon:isConfirming?/*#__PURE__*/_jsx(AutoRenewIcon,{spin:true,color:\"currentColor\"}):null,disabled:!isAcknowledged||isConfirming,onClick:handleDeactivateProfile,mb:\"8px\",children:t('Confirm')}),/*#__PURE__*/_jsx(Button,{variant:\"text\",width:\"100%\",onClick:onDismiss,children:t('Close Window')})]});};export default PauseProfilePage;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Nft/market/Profile/components/EditProfileModal/PauseProfileView.tsx"],"names":["React","useState","AutoRenewIcon","Button","Checkbox","Flex","Text","useTranslation","useGetProfileCosts","useAppDispatch","useProfile","fetchProfile","useToast","formatBigNumber","useProfileContract","useWeb3React","useCallWithGasPrice","ToastDescriptionWithTx","PauseProfilePage","onDismiss","isAcknowledged","setIsAcknowledged","isConfirming","setIsConfirming","profile","numberCakeToReactivate","t","pancakeProfileContract","callWithGasPrice","account","toastSuccess","toastError","dispatch","handleChange","handleDeactivateProfile","tx","wait","receipt","status","transactionHash","cost","cursor","display","marginBottom"],"mappings":"qcAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,aAAT,CAAwBC,MAAxB,CAAgCC,QAAhC,CAA0CC,IAA1C,CAAoEC,IAApE,KAAgF,oBAAhF,CACA,OAASC,cAAT,KAA+B,uBAA/B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,mDAA/B,CACA,OAASC,cAAT,KAA+B,OAA/B,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,OAASC,YAAT,KAA6B,eAA7B,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,OAASC,eAAT,KAAgC,qBAAhC,CACA,OAASH,UAAU,GAAII,CAAAA,kBAAvB,KAAiD,mBAAjD,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,OAASC,mBAAT,KAAoC,2BAApC,CACA,OAASC,sBAAT,KAAuC,kBAAvC,C,6IAIA,GAAMC,CAAAA,gBAAiD,CAAG,QAApDA,CAAAA,gBAAoD,MAAmB,IAAhBC,CAAAA,SAAgB,MAAhBA,SAAgB,CAC3E,cAA4ClB,QAAQ,CAAC,KAAD,CAApD,wCAAOmB,cAAP,eAAuBC,iBAAvB,eACA,eAAwCpB,QAAQ,CAAC,KAAD,CAAhD,yCAAOqB,YAAP,eAAqBC,eAArB,eACA,gBAAoBb,UAAU,EAA9B,CAAQc,OAAR,aAAQA,OAAR,CACA,wBAAmChB,kBAAkB,EAArD,CAAQiB,sBAAR,qBAAQA,sBAAR,CACA,oBAAclB,cAAc,EAA5B,CAAQmB,CAAR,iBAAQA,CAAR,CACA,GAAMC,CAAAA,sBAAsB,CAAGb,kBAAkB,EAAjD,CACA,yBAA6BE,mBAAmB,EAAhD,CAAQY,gBAAR,sBAAQA,gBAAR,CACA,kBAAoBb,YAAY,EAAhC,CAAQc,OAAR,eAAQA,OAAR,CACA,cAAqCjB,QAAQ,EAA7C,CAAQkB,YAAR,WAAQA,YAAR,CAAsBC,UAAtB,WAAsBA,UAAtB,CACA,GAAMC,CAAAA,QAAQ,CAAGvB,cAAc,EAA/B,CAEA,GAAMwB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,SAAMZ,CAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAvB,EAArB,CAEA,GAAMc,CAAAA,uBAAuB,2FAAG,wKACbN,CAAAA,gBAAgB,CAACD,sBAAD,CAAyB,cAAzB,CADH,QACxBQ,EADwB,eAE9BZ,eAAe,CAAC,IAAD,CAAf,CAF8B,sBAGRY,CAAAA,EAAE,CAACC,IAAH,EAHQ,QAGxBC,OAHwB,mBAI1BA,OAAO,CAACC,MAJkB,iDAMtBN,CAAAA,QAAQ,CAACrB,YAAY,CAACkB,OAAD,CAAb,CANc,SAO5BC,YAAY,CAACJ,CAAC,CAAC,iBAAD,CAAF,cAAuB,KAAC,sBAAD,EAAwB,MAAM,CAAEW,OAAO,CAACE,eAAxC,EAAvB,CAAZ,CACApB,SAAS,GARmB,+BAU5BY,UAAU,CAACL,CAAC,CAAC,OAAD,CAAF,CAAaA,CAAC,CAAC,oFAAD,CAAd,CAAV,CACAH,eAAe,CAAC,KAAD,CAAf,CAX4B,uDAAH,kBAAvBW,CAAAA,uBAAuB,2CAA7B,CAeA,GAAI,CAACV,OAAL,CAAc,CACZ,MAAO,KAAP,CACD,CAED,mBACE,wCACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,KAAK,CAAC,SAAnB,CAA6B,EAAE,CAAC,MAAhC,UACGE,CAAC,CAAC,8EAAD,CADJ,EADF,cAIE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,KAAK,CAAC,YAAnB,CAAgC,EAAE,CAAC,MAAnC,UACGA,CAAC,CACA,4IADA,CADJ,EAJF,cASE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,KAAK,CAAC,YAAnB,CAAgC,EAAE,CAAC,MAAnC,UACGA,CAAC,CAAC,+CAAD,CAAkD,CAAEc,IAAI,CAAE3B,eAAe,CAACY,sBAAD,CAAvB,CAAlD,CADJ,EATF,cAYE,cAAO,OAAO,CAAC,iBAAf,CAAiC,KAAK,CAAE,CAAEgB,MAAM,CAAE,SAAV,CAAqBC,OAAO,CAAE,OAA9B,CAAuCC,YAAY,CAAE,MAArD,CAAxC,uBACE,MAAC,IAAD,EAAM,UAAU,CAAC,QAAjB,wBACE,KAAC,QAAD,EAAU,EAAE,CAAC,iBAAb,CAA+B,OAAO,CAAEvB,cAAxC,CAAwD,QAAQ,CAAEa,YAAlE,CAAgF,KAAK,CAAC,IAAtF,EADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,KAAT,UAAgBP,CAAC,CAAC,cAAD,CAAjB,EAFF,GADF,EAZF,cAkBE,KAAC,MAAD,EACE,KAAK,CAAC,MADR,CAEE,SAAS,CAAEJ,YAFb,CAGE,OAAO,CAAEA,YAAY,cAAG,KAAC,aAAD,EAAe,IAAI,KAAnB,CAAoB,KAAK,CAAC,cAA1B,EAAH,CAAiD,IAHxE,CAIE,QAAQ,CAAE,CAACF,cAAD,EAAmBE,YAJ/B,CAKE,OAAO,CAAEY,uBALX,CAME,EAAE,CAAC,KANL,UAQGR,CAAC,CAAC,SAAD,CARJ,EAlBF,cA4BE,KAAC,MAAD,EAAQ,OAAO,CAAC,MAAhB,CAAuB,KAAK,CAAC,MAA7B,CAAoC,OAAO,CAAEP,SAA7C,UACGO,CAAC,CAAC,cAAD,CADJ,EA5BF,GADF,CAkCD,CAnED,CAqEA,cAAeR,CAAAA,gBAAf","sourcesContent":["import React, { useState } from 'react'\nimport { AutoRenewIcon, Button, Checkbox, Flex, InjectedModalProps, Text } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport useGetProfileCosts from 'views/Nft/market/Profile/hooks/useGetProfileCosts'\nimport { useAppDispatch } from 'state'\nimport { useProfile } from 'state/profile/hooks'\nimport { fetchProfile } from 'state/profile'\nimport useToast from 'hooks/useToast'\nimport { formatBigNumber } from 'utils/formatBalance'\nimport { useProfile as useProfileContract } from 'hooks/useContract'\nimport { useWeb3React } from '@web3-react/core'\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\nimport { ToastDescriptionWithTx } from 'components/Toast'\n\ntype PauseProfilePageProps = InjectedModalProps\n\nconst PauseProfilePage: React.FC<PauseProfilePageProps> = ({ onDismiss }) => {\n  const [isAcknowledged, setIsAcknowledged] = useState(false)\n  const [isConfirming, setIsConfirming] = useState(false)\n  const { profile } = useProfile()\n  const { numberCakeToReactivate } = useGetProfileCosts()\n  const { t } = useTranslation()\n  const pancakeProfileContract = useProfileContract()\n  const { callWithGasPrice } = useCallWithGasPrice()\n  const { account } = useWeb3React()\n  const { toastSuccess, toastError } = useToast()\n  const dispatch = useAppDispatch()\n\n  const handleChange = () => setIsAcknowledged(!isAcknowledged)\n\n  const handleDeactivateProfile = async () => {\n    const tx = await callWithGasPrice(pancakeProfileContract, 'pauseProfile')\n    setIsConfirming(true)\n    const receipt = await tx.wait()\n    if (receipt.status) {\n      // Re-fetch profile\n      await dispatch(fetchProfile(account))\n      toastSuccess(t('Profile Paused!'), <ToastDescriptionWithTx txHash={receipt.transactionHash} />)\n      onDismiss()\n    } else {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\n      setIsConfirming(false)\n    }\n  }\n\n  if (!profile) {\n    return null\n  }\n\n  return (\n    <>\n      <Text as=\"p\" color=\"failure\" mb=\"24px\">\n        {t('This will suspend your profile and send your Collectible back to your wallet')}\n      </Text>\n      <Text as=\"p\" color=\"textSubtle\" mb=\"24px\">\n        {t(\n          \"While your profile is suspended, you won't be able to earn points, but your achievements and points will stay associated with your profile\",\n        )}\n      </Text>\n      <Text as=\"p\" color=\"textSubtle\" mb=\"24px\">\n        {t('Cost to reactivate in the future: %cost% CAKE', { cost: formatBigNumber(numberCakeToReactivate) })}\n      </Text>\n      <label htmlFor=\"acknowledgement\" style={{ cursor: 'pointer', display: 'block', marginBottom: '24px' }}>\n        <Flex alignItems=\"center\">\n          <Checkbox id=\"acknowledgement\" checked={isAcknowledged} onChange={handleChange} scale=\"sm\" />\n          <Text ml=\"8px\">{t('I understand')}</Text>\n        </Flex>\n      </label>\n      <Button\n        width=\"100%\"\n        isLoading={isConfirming}\n        endIcon={isConfirming ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\n        disabled={!isAcknowledged || isConfirming}\n        onClick={handleDeactivateProfile}\n        mb=\"8px\"\n      >\n        {t('Confirm')}\n      </Button>\n      <Button variant=\"text\" width=\"100%\" onClick={onDismiss}>\n        {t('Close Window')}\n      </Button>\n    </>\n  )\n}\n\nexport default PauseProfilePage\n"]},"metadata":{},"sourceType":"module"}