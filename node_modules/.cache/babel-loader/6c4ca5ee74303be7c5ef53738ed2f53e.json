{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{useWeb3React}from'@web3-react/core';import{getPredictionsContract}from'utils/contractHelpers';var useIsRefundable=function useIsRefundable(epoch){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRefundable=_useState2[0],setIsRefundable=_useState2[1];var _useWeb3React=useWeb3React(),account=_useWeb3React.account;useEffect(function(){var fetchRefundableStatus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var predictionsContract,refundable,ledger;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:predictionsContract=getPredictionsContract();_context.next=3;return predictionsContract.refundable(epoch,account);case 3:refundable=_context.sent;if(!refundable){_context.next=11;break;}_context.next=7;return predictionsContract.ledger(epoch,account);case 7:ledger=_context.sent;setIsRefundable(ledger.claimed===false);_context.next=12;break;case 11:setIsRefundable(false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchRefundableStatus(){return _ref.apply(this,arguments);};}();if(account){fetchRefundableStatus();}},[account,epoch,setIsRefundable]);return{isRefundable:isRefundable,setIsRefundable:setIsRefundable};};export default useIsRefundable;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Predictions/hooks/useIsRefundable.ts"],"names":["useEffect","useState","useWeb3React","getPredictionsContract","useIsRefundable","epoch","isRefundable","setIsRefundable","account","fetchRefundableStatus","predictionsContract","refundable","ledger","claimed"],"mappings":"qcAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,OAASC,sBAAT,KAAuC,uBAAvC,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAmB,CACzC,cAAwCJ,QAAQ,CAAC,KAAD,CAAhD,wCAAOK,YAAP,eAAqBC,eAArB,eACA,kBAAoBL,YAAY,EAAhC,CAAQM,OAAR,eAAQA,OAAR,CAEAR,SAAS,CAAC,UAAM,CACd,GAAMS,CAAAA,qBAAqB,0FAAG,6KACtBC,mBADsB,CACAP,sBAAsB,EADtB,uBAEHO,CAAAA,mBAAmB,CAACC,UAApB,CAA+BN,KAA/B,CAAsCG,OAAtC,CAFG,QAEtBG,UAFsB,mBAIxBA,UAJwB,gDAMLD,CAAAA,mBAAmB,CAACE,MAApB,CAA2BP,KAA3B,CAAkCG,OAAlC,CANK,QAMpBI,MANoB,eAO1BL,eAAe,CAACK,MAAM,CAACC,OAAP,GAAmB,KAApB,CAAf,CAP0B,+BAS1BN,eAAe,CAAC,KAAD,CAAf,CAT0B,uDAAH,kBAArBE,CAAAA,qBAAqB,0CAA3B,CAaA,GAAID,OAAJ,CAAa,CACXC,qBAAqB,GACtB,CACF,CAjBQ,CAiBN,CAACD,OAAD,CAAUH,KAAV,CAAiBE,eAAjB,CAjBM,CAAT,CAmBA,MAAO,CAAED,YAAY,CAAZA,YAAF,CAAgBC,eAAe,CAAfA,eAAhB,CAAP,CACD,CAxBD,CA0BA,cAAeH,CAAAA,eAAf","sourcesContent":["import { useEffect, useState } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { getPredictionsContract } from 'utils/contractHelpers'\n\nconst useIsRefundable = (epoch: number) => {\n  const [isRefundable, setIsRefundable] = useState(false)\n  const { account } = useWeb3React()\n\n  useEffect(() => {\n    const fetchRefundableStatus = async () => {\n      const predictionsContract = getPredictionsContract()\n      const refundable = await predictionsContract.refundable(epoch, account)\n\n      if (refundable) {\n        // Double check they have not already claimed\n        const ledger = await predictionsContract.ledger(epoch, account)\n        setIsRefundable(ledger.claimed === false)\n      } else {\n        setIsRefundable(false)\n      }\n    }\n\n    if (account) {\n      fetchRefundableStatus()\n    }\n  }, [account, epoch, setIsRefundable])\n\n  return { isRefundable, setIsRefundable }\n}\n\nexport default useIsRefundable\n"]},"metadata":{},"sourceType":"module"}