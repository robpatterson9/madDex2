{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{useEffect,useState}from'react';import{Flex,Spinner,Text}from'@pancakeswap/uikit';import{useWeb3React}from'@web3-react/core';import styled from'styled-components';import ConnectWalletButton from'components/ConnectWalletButton';import{useTranslation}from'contexts/Localization';import{fetchNodeHistory}from'state/predictions';import{getFilteredBets}from'state/predictions/helpers';import{useAppDispatch}from'state';import{useGetCurrentEpoch,useGetCurrentHistoryPage,useGetHistory,useGetHistoryFilter,useGetIsFetchingHistory,useIsHistoryPaneOpen}from'state/predictions/hooks';import{Header,HistoryTabs}from'./components/History';import RoundsTab from'./components/History/RoundsTab';import PnlTab from'./components/History/PnlTab/PnlTab';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledHistory=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n\"])),function(_ref){var theme=_ref.theme;return theme.card.background;});var BetWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  height: 100%;\\n  overflow-y: auto;\\n  position: relative;\\n\"])));var SpinnerWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  background-color: \",\";\\n  display: flex;\\n  left: 0;\\n  height: 100%;\\n  justify-content: center;\\n  position: absolute;\\n  top: 0;\\n  width: 100%;\\n\"])),function(_ref2){var theme=_ref2.theme;return theme.card.background;});var History=function History(){var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var dispatch=useAppDispatch();var isHistoryPaneOpen=useIsHistoryPaneOpen();var isFetchingHistory=useGetIsFetchingHistory();var historyFilter=useGetHistoryFilter();var currentEpoch=useGetCurrentEpoch();var currentHistoryPage=useGetCurrentHistoryPage();var _useTranslation=useTranslation(),t=_useTranslation.t;var bets=useGetHistory();var _useState=useState(HistoryTabs.ROUNDS),_useState2=_slicedToArray(_useState,2),activeTab=_useState2[0],setActiveTab=_useState2[1];useEffect(function(){if(account&&isHistoryPaneOpen){dispatch(fetchNodeHistory({account:account}));}},[account,currentEpoch,isHistoryPaneOpen,dispatch]);var results=getFilteredBets(bets,historyFilter);var hasBetHistory=results&&results.length>0;var activeTabComponent=null;switch(activeTab){case HistoryTabs.PNL:activeTabComponent=/*#__PURE__*/_jsx(PnlTab,{hasBetHistory:hasBetHistory,bets:results});break;case HistoryTabs.ROUNDS:default:activeTabComponent=/*#__PURE__*/_jsx(RoundsTab,{hasBetHistory:hasBetHistory,bets:results});break;}if(!account){activeTabComponent=/*#__PURE__*/_jsxs(Flex,{justifyContent:\"center\",alignItems:\"center\",flexDirection:\"column\",mt:\"32px\",children:[/*#__PURE__*/_jsx(ConnectWalletButton,{}),/*#__PURE__*/_jsx(Text,{mt:\"8px\",children:t('Connect your wallet to view your prediction history')})]});}return/*#__PURE__*/_jsxs(StyledHistory,{children:[/*#__PURE__*/_jsx(Header,{activeTab:activeTab,setActiveTab:setActiveTab}),/*#__PURE__*/_jsx(BetWrapper,{children:isFetchingHistory&&currentHistoryPage===1?/*#__PURE__*/_jsx(SpinnerWrapper,{children:/*#__PURE__*/_jsx(Spinner,{size:72})}):activeTabComponent})]});};export default History;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Predictions/History.tsx"],"names":["React","useEffect","useState","Flex","Spinner","Text","useWeb3React","styled","ConnectWalletButton","useTranslation","fetchNodeHistory","getFilteredBets","useAppDispatch","useGetCurrentEpoch","useGetCurrentHistoryPage","useGetHistory","useGetHistoryFilter","useGetIsFetchingHistory","useIsHistoryPaneOpen","Header","HistoryTabs","RoundsTab","PnlTab","StyledHistory","div","theme","card","background","BetWrapper","SpinnerWrapper","History","account","dispatch","isHistoryPaneOpen","isFetchingHistory","historyFilter","currentEpoch","currentHistoryPage","t","bets","ROUNDS","activeTab","setActiveTab","results","hasBetHistory","length","activeTabComponent","PNL"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Flex, Spinner, Text } from '@pancakeswap/uikit'\nimport { useWeb3React } from '@web3-react/core'\nimport styled from 'styled-components'\nimport ConnectWalletButton from 'components/ConnectWalletButton'\nimport { useTranslation } from 'contexts/Localization'\nimport { fetchNodeHistory } from 'state/predictions'\nimport { getFilteredBets } from 'state/predictions/helpers'\nimport { useAppDispatch } from 'state'\nimport {\n  useGetCurrentEpoch,\n  useGetCurrentHistoryPage,\n  useGetHistory,\n  useGetHistoryFilter,\n  useGetIsFetchingHistory,\n  useIsHistoryPaneOpen,\n} from 'state/predictions/hooks'\nimport { Header, HistoryTabs } from './components/History'\nimport RoundsTab from './components/History/RoundsTab'\nimport PnlTab from './components/History/PnlTab/PnlTab'\n\nconst StyledHistory = styled.div`\n  background-color: ${({ theme }) => theme.card.background};\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`\n\nconst BetWrapper = styled.div`\n  flex: 1;\n  height: 100%;\n  overflow-y: auto;\n  position: relative;\n`\n\nconst SpinnerWrapper = styled.div`\n  align-items: center;\n  background-color: ${({ theme }) => theme.card.background};\n  display: flex;\n  left: 0;\n  height: 100%;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  width: 100%;\n`\n\nconst History = () => {\n  const { account } = useWeb3React()\n  const dispatch = useAppDispatch()\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\n  const isFetchingHistory = useGetIsFetchingHistory()\n  const historyFilter = useGetHistoryFilter()\n  const currentEpoch = useGetCurrentEpoch()\n  const currentHistoryPage = useGetCurrentHistoryPage()\n  const { t } = useTranslation()\n  const bets = useGetHistory()\n  const [activeTab, setActiveTab] = useState(HistoryTabs.ROUNDS)\n\n  useEffect(() => {\n    if (account && isHistoryPaneOpen) {\n      dispatch(fetchNodeHistory({ account }))\n    }\n  }, [account, currentEpoch, isHistoryPaneOpen, dispatch])\n\n  const results = getFilteredBets(bets, historyFilter)\n  const hasBetHistory = results && results.length > 0\n\n  let activeTabComponent = null\n\n  switch (activeTab) {\n    case HistoryTabs.PNL:\n      activeTabComponent = <PnlTab hasBetHistory={hasBetHistory} bets={results} />\n      break\n    case HistoryTabs.ROUNDS:\n    default:\n      activeTabComponent = <RoundsTab hasBetHistory={hasBetHistory} bets={results} />\n      break\n  }\n\n  if (!account) {\n    activeTabComponent = (\n      <Flex justifyContent=\"center\" alignItems=\"center\" flexDirection=\"column\" mt=\"32px\">\n        <ConnectWalletButton />\n        <Text mt=\"8px\">{t('Connect your wallet to view your prediction history')}</Text>\n      </Flex>\n    )\n  }\n\n  return (\n    <StyledHistory>\n      <Header activeTab={activeTab} setActiveTab={setActiveTab} />\n      <BetWrapper>\n        {isFetchingHistory && currentHistoryPage === 1 ? (\n          <SpinnerWrapper>\n            <Spinner size={72} />\n          </SpinnerWrapper>\n        ) : (\n          activeTabComponent\n        )}\n      </BetWrapper>\n    </StyledHistory>\n  )\n}\n\nexport default History\n"]},"metadata":{},"sourceType":"module"}