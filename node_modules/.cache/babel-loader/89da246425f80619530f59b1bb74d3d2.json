{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { useGetLotteriesGraphData, useGetUserLotteriesGraphData, useLottery } from 'state/lottery/hooks';\nimport fetchUnclaimedUserRewards from 'state/lottery/fetchUnclaimedUserRewards';\nexport let FetchStatus;\n\n(function (FetchStatus) {\n  FetchStatus[\"NOT_FETCHED\"] = \"not-fetched\";\n  FetchStatus[\"IN_PROGRESS\"] = \"in-progress\";\n  FetchStatus[\"SUCCESS\"] = \"success\";\n})(FetchStatus || (FetchStatus = {}));\n\nconst useGetUnclaimedRewards = () => {\n  _s();\n\n  const {\n    account\n  } = useWeb3React();\n  const {\n    isTransitioning,\n    currentLotteryId\n  } = useLottery();\n  const userLotteryData = useGetUserLotteriesGraphData();\n  const lotteriesData = useGetLotteriesGraphData();\n  const [unclaimedRewards, setUnclaimedRewards] = useState([]);\n  const [fetchStatus, setFetchStatus] = useState(FetchStatus.NOT_FETCHED);\n  useEffect(() => {\n    // Reset on account change and round transition\n    setFetchStatus(FetchStatus.NOT_FETCHED);\n  }, [account, isTransitioning]);\n\n  const fetchAllRewards = async () => {\n    setFetchStatus(FetchStatus.IN_PROGRESS);\n    const unclaimedRewardsResponse = await fetchUnclaimedUserRewards(account, userLotteryData, lotteriesData, currentLotteryId);\n    setUnclaimedRewards(unclaimedRewardsResponse);\n    setFetchStatus(FetchStatus.SUCCESS);\n  };\n\n  return {\n    fetchAllRewards,\n    unclaimedRewards,\n    fetchStatus\n  };\n};\n\n_s(useGetUnclaimedRewards, \"Sji6blC6F8Yv1EiR3D7nUpzrf88=\", false, function () {\n  return [useWeb3React, useLottery, useGetUserLotteriesGraphData, useGetLotteriesGraphData];\n});\n\nexport default useGetUnclaimedRewards;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Lottery/hooks/useGetUnclaimedRewards.ts"],"names":["useState","useEffect","useWeb3React","useGetLotteriesGraphData","useGetUserLotteriesGraphData","useLottery","fetchUnclaimedUserRewards","FetchStatus","useGetUnclaimedRewards","account","isTransitioning","currentLotteryId","userLotteryData","lotteriesData","unclaimedRewards","setUnclaimedRewards","fetchStatus","setFetchStatus","NOT_FETCHED","fetchAllRewards","IN_PROGRESS","unclaimedRewardsResponse","SUCCESS"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,wBAAT,EAAmCC,4BAAnC,EAAiEC,UAAjE,QAAmF,qBAAnF;AACA,OAAOC,yBAAP,MAAsC,yCAAtC;AAEA,WAAYC,WAAZ;;WAAYA,W;AAAAA,EAAAA,W;AAAAA,EAAAA,W;AAAAA,EAAAA,W;GAAAA,W,KAAAA,W;;AAMZ,MAAMC,sBAAsB,GAAG,MAAM;AAAA;;AACnC,QAAM;AAAEC,IAAAA;AAAF,MAAcP,YAAY,EAAhC;AACA,QAAM;AAAEQ,IAAAA,eAAF;AAAmBC,IAAAA;AAAnB,MAAwCN,UAAU,EAAxD;AACA,QAAMO,eAAe,GAAGR,4BAA4B,EAApD;AACA,QAAMS,aAAa,GAAGV,wBAAwB,EAA9C;AACA,QAAM,CAACW,gBAAD,EAAmBC,mBAAnB,IAA0Cf,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAACgB,WAAD,EAAcC,cAAd,IAAgCjB,QAAQ,CAACO,WAAW,CAACW,WAAb,CAA9C;AAEAjB,EAAAA,SAAS,CAAC,MAAM;AACd;AACAgB,IAAAA,cAAc,CAACV,WAAW,CAACW,WAAb,CAAd;AACD,GAHQ,EAGN,CAACT,OAAD,EAAUC,eAAV,CAHM,CAAT;;AAKA,QAAMS,eAAe,GAAG,YAAY;AAClCF,IAAAA,cAAc,CAACV,WAAW,CAACa,WAAb,CAAd;AACA,UAAMC,wBAAwB,GAAG,MAAMf,yBAAyB,CAC9DG,OAD8D,EAE9DG,eAF8D,EAG9DC,aAH8D,EAI9DF,gBAJ8D,CAAhE;AAMAI,IAAAA,mBAAmB,CAACM,wBAAD,CAAnB;AACAJ,IAAAA,cAAc,CAACV,WAAW,CAACe,OAAb,CAAd;AACD,GAVD;;AAYA,SAAO;AAAEH,IAAAA,eAAF;AAAmBL,IAAAA,gBAAnB;AAAqCE,IAAAA;AAArC,GAAP;AACD,CA1BD;;GAAMR,sB;UACgBN,Y,EAC0BG,U,EACtBD,4B,EACFD,wB;;;AAwBxB,eAAeK,sBAAf","sourcesContent":["import { useState, useEffect } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { useGetLotteriesGraphData, useGetUserLotteriesGraphData, useLottery } from 'state/lottery/hooks'\nimport fetchUnclaimedUserRewards from 'state/lottery/fetchUnclaimedUserRewards'\n\nexport enum FetchStatus {\n  NOT_FETCHED = 'not-fetched',\n  IN_PROGRESS = 'in-progress',\n  SUCCESS = 'success',\n}\n\nconst useGetUnclaimedRewards = () => {\n  const { account } = useWeb3React()\n  const { isTransitioning, currentLotteryId } = useLottery()\n  const userLotteryData = useGetUserLotteriesGraphData()\n  const lotteriesData = useGetLotteriesGraphData()\n  const [unclaimedRewards, setUnclaimedRewards] = useState([])\n  const [fetchStatus, setFetchStatus] = useState(FetchStatus.NOT_FETCHED)\n\n  useEffect(() => {\n    // Reset on account change and round transition\n    setFetchStatus(FetchStatus.NOT_FETCHED)\n  }, [account, isTransitioning])\n\n  const fetchAllRewards = async () => {\n    setFetchStatus(FetchStatus.IN_PROGRESS)\n    const unclaimedRewardsResponse = await fetchUnclaimedUserRewards(\n      account,\n      userLotteryData,\n      lotteriesData,\n      currentLotteryId,\n    )\n    setUnclaimedRewards(unclaimedRewardsResponse)\n    setFetchStatus(FetchStatus.SUCCESS)\n  }\n\n  return { fetchAllRewards, unclaimedRewards, fetchStatus }\n}\n\nexport default useGetUnclaimedRewards\n"]},"metadata":{},"sourceType":"module"}