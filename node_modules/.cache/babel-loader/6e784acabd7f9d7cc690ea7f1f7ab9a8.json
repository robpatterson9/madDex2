{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$(),\n    _s7 = $RefreshSig$(),\n    _s8 = $RefreshSig$(),\n    _s9 = $RefreshSig$(),\n    _s10 = $RefreshSig$(),\n    _s11 = $RefreshSig$(),\n    _s12 = $RefreshSig$(),\n    _s13 = $RefreshSig$(),\n    _s14 = $RefreshSig$(),\n    _s15 = $RefreshSig$(),\n    _s16 = $RefreshSig$(),\n    _s17 = $RefreshSig$(),\n    _s18 = $RefreshSig$(),\n    _s19 = $RefreshSig$(),\n    _s20 = $RefreshSig$(),\n    _s21 = $RefreshSig$(),\n    _s22 = $RefreshSig$(),\n    _s23 = $RefreshSig$(),\n    _s24 = $RefreshSig$(),\n    _s25 = $RefreshSig$(),\n    _s26 = $RefreshSig$(),\n    _s27 = $RefreshSig$(),\n    _s28 = $RefreshSig$(),\n    _s29 = $RefreshSig$();\n\nimport { useEffect, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { ethers } from 'ethers';\nimport { minBy, orderBy } from 'lodash';\nimport { isAddress } from 'utils';\nimport { useAppDispatch } from 'state';\nimport { parseBigNumberObj } from './helpers';\nimport { fetchAddressResult } from '.';\nexport const useGetRounds = () => {\n  _s();\n\n  const rounds = useSelector(state => state.predictions.rounds);\n  return Object.keys(rounds).reduce((accum, epoch) => {\n    return { ...accum,\n      [epoch]: parseBigNumberObj(rounds[epoch])\n    };\n  }, {});\n};\n\n_s(useGetRounds, \"NzcuGjY7/e8ANpMudDUPNEr2P38=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetRound = epoch => {\n  _s2();\n\n  const round = useSelector(state => state.predictions.rounds[epoch]);\n  return parseBigNumberObj(round);\n};\n\n_s2(useGetRound, \"I9yr3H2jZEg2pVJJxnbwqUm8+Vg=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetSortedRounds = () => {\n  _s3();\n\n  const roundData = useGetRounds();\n  return orderBy(Object.values(roundData), ['epoch'], ['asc']);\n};\n\n_s3(useGetSortedRounds, \"jFCo8rqHdnklGdNQF/awTvojkG0=\", false, function () {\n  return [useGetRounds];\n});\n\nexport const useGetBetByEpoch = (account, epoch) => {\n  _s4();\n\n  const bets = useSelector(state => state.predictions.ledgers);\n\n  if (!bets[account]) {\n    return null;\n  }\n\n  if (!bets[account][epoch]) {\n    return null;\n  }\n\n  return parseBigNumberObj(bets[account][epoch]);\n};\n\n_s4(useGetBetByEpoch, \"l2hU2dIovtccD4bBSsew9DdDw24=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetIsClaimable = epoch => {\n  _s5();\n\n  const claimableStatuses = useSelector(state => state.predictions.claimableStatuses);\n  return claimableStatuses[epoch] || false;\n};\n/**\n * Used to get the range of rounds to poll for\n */\n\n_s5(useGetIsClaimable, \"w8QNveyYtGfi9T0Sqff9LkqaoO0=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetEarliestEpoch = () => {\n  _s6();\n\n  return useSelector(state => {\n    const earliestRound = minBy(Object.values(state.predictions.rounds), 'epoch');\n    return earliestRound === null || earliestRound === void 0 ? void 0 : earliestRound.epoch;\n  });\n};\n\n_s6(useGetEarliestEpoch, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useIsHistoryPaneOpen = () => {\n  _s7();\n\n  return useSelector(state => state.predictions.isHistoryPaneOpen);\n};\n\n_s7(useIsHistoryPaneOpen, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useIsChartPaneOpen = () => {\n  _s8();\n\n  return useSelector(state => state.predictions.isChartPaneOpen);\n};\n\n_s8(useIsChartPaneOpen, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetCurrentEpoch = () => {\n  _s9();\n\n  return useSelector(state => state.predictions.currentEpoch);\n};\n\n_s9(useGetCurrentEpoch, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetIntervalSeconds = () => {\n  _s10();\n\n  return useSelector(state => state.predictions.intervalSeconds);\n};\n\n_s10(useGetIntervalSeconds, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetCurrentRound = () => {\n  _s11();\n\n  const currentEpoch = useGetCurrentEpoch();\n  const rounds = useGetRounds();\n  return rounds[currentEpoch];\n};\n\n_s11(useGetCurrentRound, \"B/HaigPTJ/QMLS+Z7HONCAaVukI=\", false, function () {\n  return [useGetCurrentEpoch, useGetRounds];\n});\n\nexport const useGetPredictionsStatus = () => {\n  _s12();\n\n  return useSelector(state => state.predictions.status);\n};\n\n_s12(useGetPredictionsStatus, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetHistoryFilter = () => {\n  _s13();\n\n  return useSelector(state => state.predictions.historyFilter);\n};\n\n_s13(useGetHistoryFilter, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetHasHistoryLoaded = () => {\n  _s14();\n\n  return useSelector(state => state.predictions.hasHistoryLoaded);\n};\n\n_s14(useGetHasHistoryLoaded, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetCurrentHistoryPage = () => {\n  _s15();\n\n  return useSelector(state => state.predictions.currentHistoryPage);\n};\n\n_s15(useGetCurrentHistoryPage, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetMinBetAmount = () => {\n  _s16();\n\n  const minBetAmount = useSelector(state => state.predictions.minBetAmount);\n  return useMemo(() => ethers.BigNumber.from(minBetAmount), [minBetAmount]);\n};\n\n_s16(useGetMinBetAmount, \"0dRfTS7F/4osBkgeEhhyeRmd26g=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetBufferSeconds = () => {\n  _s17();\n\n  return useSelector(state => state.predictions.bufferSeconds);\n};\n\n_s17(useGetBufferSeconds, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetIsFetchingHistory = () => {\n  _s18();\n\n  return useSelector(state => state.predictions.isFetchingHistory);\n};\n\n_s18(useGetIsFetchingHistory, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetHistory = () => {\n  _s19();\n\n  return useSelector(state => state.predictions.history);\n};\n\n_s19(useGetHistory, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetLastOraclePrice = () => {\n  _s20();\n\n  const lastOraclePrice = useSelector(state => state.predictions.lastOraclePrice);\n  return useMemo(() => {\n    return ethers.BigNumber.from(lastOraclePrice);\n  }, [lastOraclePrice]);\n};\n/**\n * The current round's lock timestamp will not be set immediately so we return an estimate until then\n */\n\n_s20(useGetLastOraclePrice, \"sP8ZCewbYE0zHEHJigP6zSqhRXs=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetCurrentRoundLockTimestamp = () => {\n  _s21();\n\n  const currentRound = useGetCurrentRound();\n  const intervalSeconds = useGetIntervalSeconds();\n\n  if (!currentRound.lockTimestamp) {\n    return currentRound.startTimestamp + intervalSeconds;\n  }\n\n  return currentRound.lockTimestamp;\n}; // Leaderboard\n\n_s21(useGetCurrentRoundLockTimestamp, \"Zqie2PjybblLRaJFTlB3fC70U+g=\", false, function () {\n  return [useGetCurrentRound, useGetIntervalSeconds];\n});\n\nexport const useGetLeaderboardLoadingState = () => {\n  _s22();\n\n  return useSelector(state => state.predictions.leaderboard.loadingState);\n};\n\n_s22(useGetLeaderboardLoadingState, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetLeaderboardResults = () => {\n  _s23();\n\n  return useSelector(state => state.predictions.leaderboard.results);\n};\n\n_s23(useGetLeaderboardResults, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetLeaderboardFilters = () => {\n  _s24();\n\n  return useSelector(state => state.predictions.leaderboard.filters);\n};\n\n_s24(useGetLeaderboardFilters, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetLeaderboardSkip = () => {\n  _s25();\n\n  return useSelector(state => state.predictions.leaderboard.skip);\n};\n\n_s25(useGetLeaderboardSkip, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetLeaderboardHasMoreResults = () => {\n  _s26();\n\n  return useSelector(state => state.predictions.leaderboard.hasMoreResults);\n};\n\n_s26(useGetLeaderboardHasMoreResults, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetAddressResult = account => {\n  _s27();\n\n  return useSelector(state => state.predictions.leaderboard.addressResults[account]);\n};\n\n_s27(useGetAddressResult, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});\n\nexport const useGetOrFetchLeaderboardAddressResult = account => {\n  _s28();\n\n  const addressResult = useGetAddressResult(account);\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    const address = isAddress(account); // If address result is null it means we already tried fetching the results and none came back\n\n    if (!addressResult && addressResult !== null && address) {\n      dispatch(fetchAddressResult(account));\n    }\n  }, [dispatch, account, addressResult]);\n  return addressResult;\n};\n\n_s28(useGetOrFetchLeaderboardAddressResult, \"1HaOTLhhi4kkLWTQS7Td3GioouM=\", false, function () {\n  return [useGetAddressResult, useAppDispatch];\n});\n\nexport const useGetSelectedAddress = () => {\n  _s29();\n\n  return useSelector(state => state.predictions.leaderboard.selectedAddress);\n};\n\n_s29(useGetSelectedAddress, \"nKHvd/QB6hocKEk0fSJoSYcCyR8=\", false, function () {\n  return [useSelector];\n});","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/state/predictions/hooks.ts"],"names":["useEffect","useMemo","useSelector","ethers","minBy","orderBy","isAddress","useAppDispatch","parseBigNumberObj","fetchAddressResult","useGetRounds","rounds","state","predictions","Object","keys","reduce","accum","epoch","useGetRound","round","useGetSortedRounds","roundData","values","useGetBetByEpoch","account","bets","ledgers","useGetIsClaimable","claimableStatuses","useGetEarliestEpoch","earliestRound","useIsHistoryPaneOpen","isHistoryPaneOpen","useIsChartPaneOpen","isChartPaneOpen","useGetCurrentEpoch","currentEpoch","useGetIntervalSeconds","intervalSeconds","useGetCurrentRound","useGetPredictionsStatus","status","useGetHistoryFilter","historyFilter","useGetHasHistoryLoaded","hasHistoryLoaded","useGetCurrentHistoryPage","currentHistoryPage","useGetMinBetAmount","minBetAmount","BigNumber","from","useGetBufferSeconds","bufferSeconds","useGetIsFetchingHistory","isFetchingHistory","useGetHistory","history","useGetLastOraclePrice","lastOraclePrice","useGetCurrentRoundLockTimestamp","currentRound","lockTimestamp","startTimestamp","useGetLeaderboardLoadingState","leaderboard","loadingState","useGetLeaderboardResults","results","useGetLeaderboardFilters","filters","useGetLeaderboardSkip","skip","useGetLeaderboardHasMoreResults","hasMoreResults","useGetAddressResult","addressResults","useGetOrFetchLeaderboardAddressResult","addressResult","dispatch","address","useGetSelectedAddress","selectedAddress"],"mappings":"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","sourcesContent":["import { useEffect, useMemo } from 'react'\nimport { useSelector } from 'react-redux'\nimport { ethers } from 'ethers'\nimport { minBy, orderBy } from 'lodash'\nimport { isAddress } from 'utils'\nimport { useAppDispatch } from 'state'\nimport { State, NodeRound, ReduxNodeLedger, NodeLedger, ReduxNodeRound } from '../types'\nimport { parseBigNumberObj } from './helpers'\nimport { fetchAddressResult } from '.'\n\nexport const useGetRounds = () => {\n  const rounds = useSelector((state: State) => state.predictions.rounds)\n  return Object.keys(rounds).reduce((accum, epoch) => {\n    return {\n      ...accum,\n      [epoch]: parseBigNumberObj<ReduxNodeRound, NodeRound>(rounds[epoch]),\n    }\n  }, {}) as { [key: string]: NodeRound }\n}\n\nexport const useGetRound = (epoch: number) => {\n  const round = useSelector((state: State) => state.predictions.rounds[epoch])\n  return parseBigNumberObj<ReduxNodeRound, NodeRound>(round)\n}\n\nexport const useGetSortedRounds = () => {\n  const roundData = useGetRounds()\n  return orderBy(Object.values(roundData), ['epoch'], ['asc'])\n}\n\nexport const useGetBetByEpoch = (account: string, epoch: number) => {\n  const bets = useSelector((state: State) => state.predictions.ledgers)\n\n  if (!bets[account]) {\n    return null\n  }\n\n  if (!bets[account][epoch]) {\n    return null\n  }\n\n  return parseBigNumberObj<ReduxNodeLedger, NodeLedger>(bets[account][epoch])\n}\n\nexport const useGetIsClaimable = (epoch) => {\n  const claimableStatuses = useSelector((state: State) => state.predictions.claimableStatuses)\n  return claimableStatuses[epoch] || false\n}\n\n/**\n * Used to get the range of rounds to poll for\n */\nexport const useGetEarliestEpoch = () => {\n  return useSelector((state: State) => {\n    const earliestRound = minBy(Object.values(state.predictions.rounds), 'epoch')\n    return earliestRound?.epoch\n  })\n}\n\nexport const useIsHistoryPaneOpen = () => {\n  return useSelector((state: State) => state.predictions.isHistoryPaneOpen)\n}\n\nexport const useIsChartPaneOpen = () => {\n  return useSelector((state: State) => state.predictions.isChartPaneOpen)\n}\n\nexport const useGetCurrentEpoch = () => {\n  return useSelector((state: State) => state.predictions.currentEpoch)\n}\n\nexport const useGetIntervalSeconds = () => {\n  return useSelector((state: State) => state.predictions.intervalSeconds)\n}\n\nexport const useGetCurrentRound = () => {\n  const currentEpoch = useGetCurrentEpoch()\n  const rounds = useGetRounds()\n  return rounds[currentEpoch]\n}\n\nexport const useGetPredictionsStatus = () => {\n  return useSelector((state: State) => state.predictions.status)\n}\n\nexport const useGetHistoryFilter = () => {\n  return useSelector((state: State) => state.predictions.historyFilter)\n}\n\nexport const useGetHasHistoryLoaded = () => {\n  return useSelector((state: State) => state.predictions.hasHistoryLoaded)\n}\n\nexport const useGetCurrentHistoryPage = () => {\n  return useSelector((state: State) => state.predictions.currentHistoryPage)\n}\n\nexport const useGetMinBetAmount = () => {\n  const minBetAmount = useSelector((state: State) => state.predictions.minBetAmount)\n  return useMemo(() => ethers.BigNumber.from(minBetAmount), [minBetAmount])\n}\n\nexport const useGetBufferSeconds = () => {\n  return useSelector((state: State) => state.predictions.bufferSeconds)\n}\n\nexport const useGetIsFetchingHistory = () => {\n  return useSelector((state: State) => state.predictions.isFetchingHistory)\n}\n\nexport const useGetHistory = () => {\n  return useSelector((state: State) => state.predictions.history)\n}\n\nexport const useGetLastOraclePrice = () => {\n  const lastOraclePrice = useSelector((state: State) => state.predictions.lastOraclePrice)\n  return useMemo(() => {\n    return ethers.BigNumber.from(lastOraclePrice)\n  }, [lastOraclePrice])\n}\n\n/**\n * The current round's lock timestamp will not be set immediately so we return an estimate until then\n */\nexport const useGetCurrentRoundLockTimestamp = () => {\n  const currentRound = useGetCurrentRound()\n  const intervalSeconds = useGetIntervalSeconds()\n\n  if (!currentRound.lockTimestamp) {\n    return currentRound.startTimestamp + intervalSeconds\n  }\n\n  return currentRound.lockTimestamp\n}\n\n// Leaderboard\nexport const useGetLeaderboardLoadingState = () => {\n  return useSelector((state: State) => state.predictions.leaderboard.loadingState)\n}\n\nexport const useGetLeaderboardResults = () => {\n  return useSelector((state: State) => state.predictions.leaderboard.results)\n}\n\nexport const useGetLeaderboardFilters = () => {\n  return useSelector((state: State) => state.predictions.leaderboard.filters)\n}\n\nexport const useGetLeaderboardSkip = () => {\n  return useSelector((state: State) => state.predictions.leaderboard.skip)\n}\n\nexport const useGetLeaderboardHasMoreResults = () => {\n  return useSelector((state: State) => state.predictions.leaderboard.hasMoreResults)\n}\n\nexport const useGetAddressResult = (account: string) => {\n  return useSelector((state: State) => state.predictions.leaderboard.addressResults[account])\n}\n\nexport const useGetOrFetchLeaderboardAddressResult = (account: string) => {\n  const addressResult = useGetAddressResult(account)\n  const dispatch = useAppDispatch()\n\n  useEffect(() => {\n    const address = isAddress(account)\n\n    // If address result is null it means we already tried fetching the results and none came back\n    if (!addressResult && addressResult !== null && address) {\n      dispatch(fetchAddressResult(account))\n    }\n  }, [dispatch, account, addressResult])\n\n  return addressResult\n}\n\nexport const useGetSelectedAddress = () => {\n  return useSelector((state: State) => state.predictions.leaderboard.selectedAddress)\n}\n"]},"metadata":{},"sourceType":"module"}