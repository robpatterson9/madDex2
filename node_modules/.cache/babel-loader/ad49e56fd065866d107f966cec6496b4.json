{"ast":null,"code":"import _objectSpread from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _excluded=[\"pool\",\"showIcon\",\"stakedBalance\",\"performanceFee\"];var _templateObject;import React from'react';import styled from'styled-components';import{Flex,useModal,CalculateIcon,Skeleton,Button}from'@pancakeswap/uikit';import RoiCalculatorModal from'components/RoiCalculatorModal';import Balance from'components/Balance';import{useTranslation}from'contexts/Localization';import{getAprData}from'views/Pools/helpers';import BigNumber from'bignumber.js';import{BIG_ZERO}from'utils/bigNumber';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AprLabelContainer=styled(Flex)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  &:hover {\\n    opacity: 0.5;\\n  }\\n\"])));var Apr=function Apr(_ref){var pool=_ref.pool,showIcon=_ref.showIcon,stakedBalance=_ref.stakedBalance,_ref$performanceFee=_ref.performanceFee,performanceFee=_ref$performanceFee===void 0?0:_ref$performanceFee,props=_objectWithoutProperties(_ref,_excluded);var stakingToken=pool.stakingToken,earningToken=pool.earningToken,isFinished=pool.isFinished,earningTokenPrice=pool.earningTokenPrice,stakingTokenPrice=pool.stakingTokenPrice,userData=pool.userData,apr=pool.apr;var _useTranslation=useTranslation(),t=_useTranslation.t;var _getAprData=getAprData(pool,performanceFee),earningsPercentageToDisplay=_getAprData.apr,autoCompoundFrequency=_getAprData.autoCompoundFrequency;var stakingTokenBalance=(userData===null||userData===void 0?void 0:userData.stakingTokenBalance)?new BigNumber(userData.stakingTokenBalance):BIG_ZERO;var apyModalLink=stakingToken.address?\"/swap?outputCurrency=\".concat(stakingToken.address):'/swap';var _useModal=useModal(/*#__PURE__*/_jsx(RoiCalculatorModal,{earningTokenPrice:earningTokenPrice,stakingTokenPrice:stakingTokenPrice,stakingTokenBalance:stakedBalance.plus(stakingTokenBalance),apr:apr,stakingTokenSymbol:stakingToken.symbol,linkLabel:t('Get %symbol%',{symbol:stakingToken.symbol}),linkHref:apyModalLink,earningTokenSymbol:earningToken.symbol,autoCompoundFrequency:autoCompoundFrequency,performanceFee:performanceFee})),_useModal2=_slicedToArray(_useModal,1),onPresentApyModal=_useModal2[0];var openRoiModal=function openRoiModal(event){event.stopPropagation();onPresentApyModal();};return/*#__PURE__*/_jsx(AprLabelContainer,_objectSpread(_objectSpread({alignItems:\"center\",justifyContent:\"space-between\"},props),{},{children:earningsPercentageToDisplay||isFinished?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Balance,{onClick:openRoiModal,fontSize:\"16px\",isDisabled:isFinished,value:isFinished?0:earningsPercentageToDisplay,decimals:2,unit:\"%\"}),!isFinished&&showIcon&&/*#__PURE__*/_jsx(Button,{onClick:openRoiModal,variant:\"text\",width:\"20px\",height:\"20px\",padding:\"0px\",marginLeft:\"4px\",children:/*#__PURE__*/_jsx(CalculateIcon,{color:\"textSubtle\",width:\"20px\"})})]}):/*#__PURE__*/_jsx(Skeleton,{width:\"80px\",height:\"16px\"})}));};export default Apr;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Pools/components/PoolsTable/Apr.tsx"],"names":["React","styled","Flex","useModal","CalculateIcon","Skeleton","Button","RoiCalculatorModal","Balance","useTranslation","getAprData","BigNumber","BIG_ZERO","AprLabelContainer","Apr","pool","showIcon","stakedBalance","performanceFee","props","stakingToken","earningToken","isFinished","earningTokenPrice","stakingTokenPrice","userData","apr","t","earningsPercentageToDisplay","autoCompoundFrequency","stakingTokenBalance","apyModalLink","address","plus","symbol","onPresentApyModal","openRoiModal","event","stopPropagation"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport { Flex, useModal, CalculateIcon, Skeleton, FlexProps, Button } from '@pancakeswap/uikit'\nimport RoiCalculatorModal from 'components/RoiCalculatorModal'\nimport Balance from 'components/Balance'\nimport { DeserializedPool } from 'state/types'\nimport { useTranslation } from 'contexts/Localization'\nimport { getAprData } from 'views/Pools/helpers'\nimport BigNumber from 'bignumber.js'\nimport { BIG_ZERO } from 'utils/bigNumber'\n\nconst AprLabelContainer = styled(Flex)`\n  &:hover {\n    opacity: 0.5;\n  }\n`\n\ninterface AprProps extends FlexProps {\n  pool: DeserializedPool\n  stakedBalance: BigNumber\n  showIcon: boolean\n  performanceFee?: number\n}\n\nconst Apr: React.FC<AprProps> = ({ pool, showIcon, stakedBalance, performanceFee = 0, ...props }) => {\n  const { stakingToken, earningToken, isFinished, earningTokenPrice, stakingTokenPrice, userData, apr } = pool\n  const { t } = useTranslation()\n\n  const { apr: earningsPercentageToDisplay, autoCompoundFrequency } = getAprData(pool, performanceFee)\n\n  const stakingTokenBalance = userData?.stakingTokenBalance ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO\n\n  const apyModalLink = stakingToken.address ? `/swap?outputCurrency=${stakingToken.address}` : '/swap'\n\n  const [onPresentApyModal] = useModal(\n    <RoiCalculatorModal\n      earningTokenPrice={earningTokenPrice}\n      stakingTokenPrice={stakingTokenPrice}\n      stakingTokenBalance={stakedBalance.plus(stakingTokenBalance)}\n      apr={apr}\n      stakingTokenSymbol={stakingToken.symbol}\n      linkLabel={t('Get %symbol%', { symbol: stakingToken.symbol })}\n      linkHref={apyModalLink}\n      earningTokenSymbol={earningToken.symbol}\n      autoCompoundFrequency={autoCompoundFrequency}\n      performanceFee={performanceFee}\n    />,\n  )\n\n  const openRoiModal = (event: React.MouseEvent<HTMLElement>) => {\n    event.stopPropagation()\n    onPresentApyModal()\n  }\n\n  return (\n    <AprLabelContainer alignItems=\"center\" justifyContent=\"space-between\" {...props}>\n      {earningsPercentageToDisplay || isFinished ? (\n        <>\n          <Balance\n            onClick={openRoiModal}\n            fontSize=\"16px\"\n            isDisabled={isFinished}\n            value={isFinished ? 0 : earningsPercentageToDisplay}\n            decimals={2}\n            unit=\"%\"\n          />\n          {!isFinished && showIcon && (\n            <Button onClick={openRoiModal} variant=\"text\" width=\"20px\" height=\"20px\" padding=\"0px\" marginLeft=\"4px\">\n              <CalculateIcon color=\"textSubtle\" width=\"20px\" />\n            </Button>\n          )}\n        </>\n      ) : (\n        <Skeleton width=\"80px\" height=\"16px\" />\n      )}\n    </AprLabelContainer>\n  )\n}\n\nexport default Apr\n"]},"metadata":{},"sourceType":"module"}