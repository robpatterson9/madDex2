{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{AutoRenewIcon,Button}from'@pancakeswap/uikit';import{PoolIds}from'config/constants/types';import{useTranslation}from'contexts/Localization';import useToast from'hooks/useToast';import{ToastDescriptionWithTx}from'components/Toast';import{jsx as _jsx}from\"react/jsx-runtime\";var ClaimButton=function ClaimButton(_ref){var poolId=_ref.poolId,ifoVersion=_ref.ifoVersion,walletIfoData=_ref.walletIfoData;var userPoolCharacteristics=walletIfoData[poolId];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useToast=useToast(),toastError=_useToast.toastError,toastSuccess=_useToast.toastSuccess;var setPendingTx=function setPendingTx(isPending){return walletIfoData.setPendingTx(isPending,poolId);};var handleClaim=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var txHash,tx,receipt,_tx,_receipt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setPendingTx(true);if(!(ifoVersion===1)){_context.next=12;break;}_context.next=5;return walletIfoData.contract.harvest();case 5:tx=_context.sent;_context.next=8;return tx.wait();case 8:receipt=_context.sent;txHash=receipt.transactionHash;_context.next=19;break;case 12:_context.next=14;return walletIfoData.contract.harvestPool(poolId===PoolIds.poolBasic?0:1);case 14:_tx=_context.sent;_context.next=17;return _tx.wait();case 17:_receipt=_context.sent;txHash=_receipt.transactionHash;case 19:walletIfoData.setIsClaimed(poolId);toastSuccess(t('Success!'),/*#__PURE__*/_jsx(ToastDescriptionWithTx,{txHash:txHash,children:t('You have successfully claimed your rewards.')}));_context.next=27;break;case 23:_context.prev=23;_context.t0=_context[\"catch\"](0);toastError(t('Error'),t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));console.error(_context.t0);case 27:_context.prev=27;setPendingTx(false);return _context.finish(27);case 30:case\"end\":return _context.stop();}}},_callee,null,[[0,23,27,30]]);}));return function handleClaim(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Button,{onClick:handleClaim,disabled:userPoolCharacteristics.isPendingTx,width:\"100%\",isLoading:userPoolCharacteristics.isPendingTx,endIcon:userPoolCharacteristics.isPendingTx?/*#__PURE__*/_jsx(AutoRenewIcon,{spin:true,color:\"currentColor\"}):null,children:t('Claim')});};export default ClaimButton;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Ifos/components/IfoFoldableCard/IfoPoolCard/ClaimButton.tsx"],"names":["React","AutoRenewIcon","Button","PoolIds","useTranslation","useToast","ToastDescriptionWithTx","ClaimButton","poolId","ifoVersion","walletIfoData","userPoolCharacteristics","t","toastError","toastSuccess","setPendingTx","isPending","handleClaim","contract","harvest","tx","wait","receipt","txHash","transactionHash","harvestPool","poolBasic","setIsClaimed","console","error","isPendingTx"],"mappings":"6SAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,aAAT,CAAwBC,MAAxB,KAAsC,oBAAtC,CACA,OAASC,OAAT,KAAwB,wBAAxB,CAEA,OAASC,cAAT,KAA+B,uBAA/B,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,OAASC,sBAAT,KAAuC,kBAAvC,C,2CAQA,GAAMC,CAAAA,WAA4B,CAAG,QAA/BA,CAAAA,WAA+B,MAA2C,IAAxCC,CAAAA,MAAwC,MAAxCA,MAAwC,CAAhCC,UAAgC,MAAhCA,UAAgC,CAApBC,aAAoB,MAApBA,aAAoB,CAC9E,GAAMC,CAAAA,uBAAuB,CAAGD,aAAa,CAACF,MAAD,CAA7C,CACA,oBAAcJ,cAAc,EAA5B,CAAQQ,CAAR,iBAAQA,CAAR,CACA,cAAqCP,QAAQ,EAA7C,CAAQQ,UAAR,WAAQA,UAAR,CAAoBC,YAApB,WAAoBA,YAApB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,SAAD,QAAwBN,CAAAA,aAAa,CAACK,YAAd,CAA2BC,SAA3B,CAAsCR,MAAtC,CAAxB,EAArB,CAEA,GAAMS,CAAAA,WAAW,2FAAG,sLAGhBF,YAAY,CAAC,IAAD,CAAZ,CAHgB,KAKZN,UAAU,GAAK,CALH,iDAMGC,CAAAA,aAAa,CAACQ,QAAd,CAAuBC,OAAvB,EANH,QAMRC,EANQ,qCAOQA,CAAAA,EAAE,CAACC,IAAH,EAPR,QAORC,OAPQ,eAQdC,MAAM,CAAGD,OAAO,CAACE,eAAjB,CARc,sDAUGd,CAAAA,aAAa,CAACQ,QAAd,CAAuBO,WAAvB,CAAmCjB,MAAM,GAAKL,OAAO,CAACuB,SAAnB,CAA+B,CAA/B,CAAmC,CAAtE,CAVH,SAURN,GAVQ,sCAWQA,CAAAA,GAAE,CAACC,IAAH,EAXR,SAWRC,QAXQ,eAYdC,MAAM,CAAGD,QAAO,CAACE,eAAjB,CAZc,QAehBd,aAAa,CAACiB,YAAd,CAA2BnB,MAA3B,EACAM,YAAY,CACVF,CAAC,CAAC,UAAD,CADS,cAEV,KAAC,sBAAD,EAAwB,MAAM,CAAEW,MAAhC,UACGX,CAAC,CAAC,6CAAD,CADJ,EAFU,CAAZ,CAhBgB,iFAuBhBC,UAAU,CAACD,CAAC,CAAC,OAAD,CAAF,CAAaA,CAAC,CAAC,oFAAD,CAAd,CAAV,CACAgB,OAAO,CAACC,KAAR,cAxBgB,yBA0BhBd,YAAY,CAAC,KAAD,CAAZ,CA1BgB,sGAAH,kBAAXE,CAAAA,WAAW,2CAAjB,CA8BA,mBACE,KAAC,MAAD,EACE,OAAO,CAAEA,WADX,CAEE,QAAQ,CAAEN,uBAAuB,CAACmB,WAFpC,CAGE,KAAK,CAAC,MAHR,CAIE,SAAS,CAAEnB,uBAAuB,CAACmB,WAJrC,CAKE,OAAO,CAAEnB,uBAAuB,CAACmB,WAAxB,cAAsC,KAAC,aAAD,EAAe,IAAI,KAAnB,CAAoB,KAAK,CAAC,cAA1B,EAAtC,CAAoF,IAL/F,UAOGlB,CAAC,CAAC,OAAD,CAPJ,EADF,CAWD,CAhDD,CAkDA,cAAeL,CAAAA,WAAf","sourcesContent":["import React from 'react'\nimport { AutoRenewIcon, Button } from '@pancakeswap/uikit'\nimport { PoolIds } from 'config/constants/types'\nimport { WalletIfoData } from 'views/Ifos/types'\nimport { useTranslation } from 'contexts/Localization'\nimport useToast from 'hooks/useToast'\nimport { ToastDescriptionWithTx } from 'components/Toast'\n\ninterface Props {\n  poolId: PoolIds\n  ifoVersion: number\n  walletIfoData: WalletIfoData\n}\n\nconst ClaimButton: React.FC<Props> = ({ poolId, ifoVersion, walletIfoData }) => {\n  const userPoolCharacteristics = walletIfoData[poolId]\n  const { t } = useTranslation()\n  const { toastError, toastSuccess } = useToast()\n\n  const setPendingTx = (isPending: boolean) => walletIfoData.setPendingTx(isPending, poolId)\n\n  const handleClaim = async () => {\n    try {\n      let txHash\n      setPendingTx(true)\n\n      if (ifoVersion === 1) {\n        const tx = await walletIfoData.contract.harvest()\n        const receipt = await tx.wait()\n        txHash = receipt.transactionHash\n      } else {\n        const tx = await walletIfoData.contract.harvestPool(poolId === PoolIds.poolBasic ? 0 : 1)\n        const receipt = await tx.wait()\n        txHash = receipt.transactionHash\n      }\n\n      walletIfoData.setIsClaimed(poolId)\n      toastSuccess(\n        t('Success!'),\n        <ToastDescriptionWithTx txHash={txHash}>\n          {t('You have successfully claimed your rewards.')}\n        </ToastDescriptionWithTx>,\n      )\n    } catch (error) {\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\n      console.error(error)\n    } finally {\n      setPendingTx(false)\n    }\n  }\n\n  return (\n    <Button\n      onClick={handleClaim}\n      disabled={userPoolCharacteristics.isPendingTx}\n      width=\"100%\"\n      isLoading={userPoolCharacteristics.isPendingTx}\n      endIcon={userPoolCharacteristics.isPendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\n    >\n      {t('Claim')}\n    </Button>\n  )\n}\n\nexport default ClaimButton\n"]},"metadata":{},"sourceType":"module"}