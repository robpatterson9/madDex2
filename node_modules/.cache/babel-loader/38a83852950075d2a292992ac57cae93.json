{"ast":null,"code":"import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{useRef,useEffect}from'react';import styled from'styled-components';import{Modal,Text,Button,Flex,ButtonMenu,Checkbox,BalanceInput,HelpIcon,ButtonMenuItem,useTooltip}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import{getBalanceNumber}from'utils/formatBalance';import useActiveWeb3React from'hooks/useActiveWeb3React';import RoiCalculatorFooter from'./RoiCalculatorFooter';import RoiCard from'./RoiCard';import useRoiCalculatorReducer,{CalculatorMode,EditingCurrency}from'./useRoiCalculatorReducer';import AnimatedArrow from'./AnimatedArrow';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var StyledModal=styled(Modal)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 345px;\\n  & > :nth-child(2) {\\n    padding: 0;\\n  }\\n\"])));var ScrollableContainer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 24px;\\n  max-height: 500px;\\n  overflow-y: auto;\\n  \",\" {\\n    max-height: none;\\n  }\\n\"])),function(_ref){var theme=_ref.theme;return theme.mediaQueries.sm;});var FullWidthButtonMenu=styled(ButtonMenu)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: 100%;\\n\\n  & > button {\\n    width: 100%;\\n  }\\n\\n  opacity: \",\";\\n\"])),function(_ref2){var disabled=_ref2.disabled;return disabled?0.5:1;});var RoiCalculatorModal=function RoiCalculatorModal(_ref3){var onDismiss=_ref3.onDismiss,onBack=_ref3.onBack,earningTokenPrice=_ref3.earningTokenPrice,apr=_ref3.apr,displayApr=_ref3.displayApr,linkLabel=_ref3.linkLabel,linkHref=_ref3.linkHref,stakingTokenBalance=_ref3.stakingTokenBalance,stakingTokenSymbol=_ref3.stakingTokenSymbol,stakingTokenPrice=_ref3.stakingTokenPrice,multiplier=_ref3.multiplier,initialValue=_ref3.initialValue,_ref3$earningTokenSym=_ref3.earningTokenSymbol,earningTokenSymbol=_ref3$earningTokenSym===void 0?'CAKE':_ref3$earningTokenSym,_ref3$autoCompoundFre=_ref3.autoCompoundFrequency,autoCompoundFrequency=_ref3$autoCompoundFre===void 0?0:_ref3$autoCompoundFre,_ref3$performanceFee=_ref3.performanceFee,performanceFee=_ref3$performanceFee===void 0?0:_ref3$performanceFee,_ref3$isFarm=_ref3.isFarm,isFarm=_ref3$isFarm===void 0?false:_ref3$isFarm;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;var balanceInputRef=useRef(null);var _useRoiCalculatorRedu=useRoiCalculatorReducer(stakingTokenPrice,earningTokenPrice,apr,autoCompoundFrequency,performanceFee),state=_useRoiCalculatorRedu.state,setPrincipalFromUSDValue=_useRoiCalculatorRedu.setPrincipalFromUSDValue,setPrincipalFromTokenValue=_useRoiCalculatorRedu.setPrincipalFromTokenValue,setStakingDuration=_useRoiCalculatorRedu.setStakingDuration,toggleCompounding=_useRoiCalculatorRedu.toggleCompounding,toggleEditingCurrency=_useRoiCalculatorRedu.toggleEditingCurrency,setCompoundingFrequency=_useRoiCalculatorRedu.setCompoundingFrequency,setCalculatorMode=_useRoiCalculatorRedu.setCalculatorMode,setTargetRoi=_useRoiCalculatorRedu.setTargetRoi;var _state$controls=state.controls,compounding=_state$controls.compounding,activeCompoundingIndex=_state$controls.activeCompoundingIndex,stakingDuration=_state$controls.stakingDuration,editingCurrency=_state$controls.editingCurrency;var _state$data=state.data,principalAsUSD=_state$data.principalAsUSD,principalAsToken=_state$data.principalAsToken;// Auto-focus input on opening modal\nuseEffect(function(){if(balanceInputRef.current){balanceInputRef.current.focus();}},[]);// If user comes to calculator from staking modal - initialize with whatever they put in there\nuseEffect(function(){if(initialValue){setPrincipalFromTokenValue(initialValue);}},[initialValue,setPrincipalFromTokenValue]);var _useTooltip=useTooltip(isFarm?t('“My Balance” here includes both LP Tokens in your wallet, and LP Tokens already staked in this farm.'):t('“My Balance” here includes both %assetSymbol% in your wallet, and %assetSymbol% already staked in this pool.',{assetSymbol:stakingTokenSymbol}),{placement:'top-end',tooltipOffset:[20,10]}),targetRef=_useTooltip.targetRef,tooltip=_useTooltip.tooltip,tooltipVisible=_useTooltip.tooltipVisible;var onBalanceFocus=function onBalanceFocus(){setCalculatorMode(CalculatorMode.ROI_BASED_ON_PRINCIPAL);};var editingUnit=editingCurrency===EditingCurrency.TOKEN?stakingTokenSymbol:'USD';var editingValue=editingCurrency===EditingCurrency.TOKEN?principalAsToken:principalAsUSD;var conversionUnit=editingCurrency===EditingCurrency.TOKEN?'USD':stakingTokenSymbol;var conversionValue=editingCurrency===EditingCurrency.TOKEN?principalAsUSD:principalAsToken;var onUserInput=editingCurrency===EditingCurrency.TOKEN?setPrincipalFromTokenValue:setPrincipalFromUSDValue;return/*#__PURE__*/_jsxs(StyledModal,{title:t('ROI Calculator'),onDismiss:onBack||onDismiss,onBack:onBack!==null&&onBack!==void 0?onBack:null,headerBackground:\"gradients.cardHeader\",children:[/*#__PURE__*/_jsxs(ScrollableContainer,{children:[/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",mb:\"8px\",children:[/*#__PURE__*/_jsx(Text,{color:\"secondary\",bold:true,fontSize:\"12px\",textTransform:\"uppercase\",children:t('%asset% staked',{asset:stakingTokenSymbol})}),/*#__PURE__*/_jsx(BalanceInput,{currencyValue:\"\".concat(conversionValue,\" \").concat(conversionUnit),innerRef:balanceInputRef,placeholder:\"0.00\",value:editingValue,unit:editingUnit,onUserInput:onUserInput,switchEditingUnits:toggleEditingCurrency,onFocus:onBalanceFocus}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",mt:\"8px\",children:[/*#__PURE__*/_jsx(Button,{scale:\"xs\",p:\"4px 16px\",width:\"68px\",variant:\"tertiary\",onClick:function onClick(){return setPrincipalFromUSDValue('100');},children:\"$100\"}),/*#__PURE__*/_jsx(Button,{scale:\"xs\",p:\"4px 16px\",width:\"68px\",variant:\"tertiary\",onClick:function onClick(){return setPrincipalFromUSDValue('1000');},children:\"$1000\"}),/*#__PURE__*/_jsx(Button,{disabled:stakingTokenBalance.lte(0)||!account,scale:\"xs\",p:\"4px 16px\",width:\"128px\",variant:\"tertiary\",onClick:function onClick(){return setPrincipalFromUSDValue(getBalanceNumber(stakingTokenBalance.times(stakingTokenPrice)).toString());},children:t('My Balance').toLocaleUpperCase()}),/*#__PURE__*/_jsx(\"span\",{ref:targetRef,children:/*#__PURE__*/_jsx(HelpIcon,{width:\"16px\",height:\"16px\",color:\"textSubtle\"})}),tooltipVisible&&tooltip]}),/*#__PURE__*/_jsx(Text,{mt:\"24px\",color:\"secondary\",bold:true,fontSize:\"12px\",textTransform:\"uppercase\",children:t('Staked for')}),/*#__PURE__*/_jsxs(FullWidthButtonMenu,{activeIndex:stakingDuration,onItemClick:setStakingDuration,scale:\"sm\",children:[/*#__PURE__*/_jsx(ButtonMenuItem,{variant:\"tertiary\",children:t('1D')}),/*#__PURE__*/_jsx(ButtonMenuItem,{variant:\"tertiary\",children:t('7D')}),/*#__PURE__*/_jsx(ButtonMenuItem,{variant:\"tertiary\",children:t('30D')}),/*#__PURE__*/_jsx(ButtonMenuItem,{variant:\"tertiary\",children:t('1Y')}),/*#__PURE__*/_jsx(ButtonMenuItem,{variant:\"tertiary\",children:t('5Y')})]}),autoCompoundFrequency===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Text,{mt:\"24px\",color:\"secondary\",bold:true,fontSize:\"12px\",textTransform:\"uppercase\",children:t('Compounding every')}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Flex,{flex:\"1\",children:/*#__PURE__*/_jsx(Checkbox,{scale:\"sm\",checked:compounding,onChange:toggleCompounding})}),/*#__PURE__*/_jsx(Flex,{flex:\"6\",children:/*#__PURE__*/_jsxs(FullWidthButtonMenu,{disabled:!compounding,activeIndex:activeCompoundingIndex,onItemClick:setCompoundingFrequency,scale:\"sm\",children:[/*#__PURE__*/_jsx(ButtonMenuItem,{children:t('1D')}),/*#__PURE__*/_jsx(ButtonMenuItem,{children:t('7D')}),/*#__PURE__*/_jsx(ButtonMenuItem,{children:t('14D')}),/*#__PURE__*/_jsx(ButtonMenuItem,{children:t('30D')})]})})]})]})]}),/*#__PURE__*/_jsx(AnimatedArrow,{calculatorState:state}),/*#__PURE__*/_jsx(Flex,{children:/*#__PURE__*/_jsx(RoiCard,{earningTokenSymbol:earningTokenSymbol,calculatorState:state,setTargetRoi:setTargetRoi,setCalculatorMode:setCalculatorMode})})]}),/*#__PURE__*/_jsx(RoiCalculatorFooter,{isFarm:isFarm,apr:apr,displayApr:displayApr,autoCompoundFrequency:autoCompoundFrequency,multiplier:multiplier,linkLabel:linkLabel,linkHref:linkHref,performanceFee:performanceFee})]});};export default RoiCalculatorModal;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/components/RoiCalculatorModal/index.tsx"],"names":["React","useRef","useEffect","styled","Modal","Text","Button","Flex","ButtonMenu","Checkbox","BalanceInput","HelpIcon","ButtonMenuItem","useTooltip","useTranslation","getBalanceNumber","useActiveWeb3React","RoiCalculatorFooter","RoiCard","useRoiCalculatorReducer","CalculatorMode","EditingCurrency","AnimatedArrow","StyledModal","ScrollableContainer","div","theme","mediaQueries","sm","FullWidthButtonMenu","disabled","RoiCalculatorModal","onDismiss","onBack","earningTokenPrice","apr","displayApr","linkLabel","linkHref","stakingTokenBalance","stakingTokenSymbol","stakingTokenPrice","multiplier","initialValue","earningTokenSymbol","autoCompoundFrequency","performanceFee","isFarm","t","account","balanceInputRef","state","setPrincipalFromUSDValue","setPrincipalFromTokenValue","setStakingDuration","toggleCompounding","toggleEditingCurrency","setCompoundingFrequency","setCalculatorMode","setTargetRoi","controls","compounding","activeCompoundingIndex","stakingDuration","editingCurrency","data","principalAsUSD","principalAsToken","current","focus","assetSymbol","placement","tooltipOffset","targetRef","tooltip","tooltipVisible","onBalanceFocus","ROI_BASED_ON_PRINCIPAL","editingUnit","TOKEN","editingValue","conversionUnit","conversionValue","onUserInput","asset","lte","times","toString","toLocaleUpperCase"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react'\nimport styled from 'styled-components'\nimport {\n  Modal,\n  Text,\n  Button,\n  Flex,\n  ButtonMenu,\n  Checkbox,\n  BalanceInput,\n  HelpIcon,\n  ButtonMenuItem,\n  useTooltip,\n} from '@pancakeswap/uikit'\nimport BigNumber from 'bignumber.js'\nimport { useTranslation } from 'contexts/Localization'\nimport { getBalanceNumber } from 'utils/formatBalance'\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\nimport RoiCalculatorFooter from './RoiCalculatorFooter'\nimport RoiCard from './RoiCard'\nimport useRoiCalculatorReducer, { CalculatorMode, EditingCurrency } from './useRoiCalculatorReducer'\nimport AnimatedArrow from './AnimatedArrow'\n\ninterface RoiCalculatorModalProps {\n  onDismiss?: () => void\n  onBack?: () => void\n  earningTokenPrice: number\n  apr: number\n  displayApr?: string\n  linkLabel: string\n  linkHref: string\n  stakingTokenBalance: BigNumber\n  stakingTokenSymbol: string\n  stakingTokenPrice: number\n  earningTokenSymbol?: string\n  multiplier?: string\n  autoCompoundFrequency?: number\n  performanceFee?: number\n  isFarm?: boolean\n  initialValue?: string\n}\n\nconst StyledModal = styled(Modal)`\n  width: 345px;\n  & > :nth-child(2) {\n    padding: 0;\n  }\n`\n\nconst ScrollableContainer = styled.div`\n  padding: 24px;\n  max-height: 500px;\n  overflow-y: auto;\n  ${({ theme }) => theme.mediaQueries.sm} {\n    max-height: none;\n  }\n`\n\nconst FullWidthButtonMenu = styled(ButtonMenu)<{ disabled?: boolean }>`\n  width: 100%;\n\n  & > button {\n    width: 100%;\n  }\n\n  opacity: ${({ disabled }) => (disabled ? 0.5 : 1)};\n`\n\nconst RoiCalculatorModal: React.FC<RoiCalculatorModalProps> = ({\n  onDismiss,\n  onBack,\n  earningTokenPrice,\n  apr,\n  displayApr,\n  linkLabel,\n  linkHref,\n  stakingTokenBalance,\n  stakingTokenSymbol,\n  stakingTokenPrice,\n  multiplier,\n  initialValue,\n  earningTokenSymbol = 'CAKE',\n  autoCompoundFrequency = 0,\n  performanceFee = 0,\n  isFarm = false,\n}) => {\n  const { t } = useTranslation()\n  const { account } = useActiveWeb3React()\n  const balanceInputRef = useRef<HTMLInputElement | null>(null)\n\n  const {\n    state,\n    setPrincipalFromUSDValue,\n    setPrincipalFromTokenValue,\n    setStakingDuration,\n    toggleCompounding,\n    toggleEditingCurrency,\n    setCompoundingFrequency,\n    setCalculatorMode,\n    setTargetRoi,\n  } = useRoiCalculatorReducer(stakingTokenPrice, earningTokenPrice, apr, autoCompoundFrequency, performanceFee)\n\n  const { compounding, activeCompoundingIndex, stakingDuration, editingCurrency } = state.controls\n  const { principalAsUSD, principalAsToken } = state.data\n\n  // Auto-focus input on opening modal\n  useEffect(() => {\n    if (balanceInputRef.current) {\n      balanceInputRef.current.focus()\n    }\n  }, [])\n\n  // If user comes to calculator from staking modal - initialize with whatever they put in there\n  useEffect(() => {\n    if (initialValue) {\n      setPrincipalFromTokenValue(initialValue)\n    }\n  }, [initialValue, setPrincipalFromTokenValue])\n\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\n    isFarm\n      ? t('“My Balance” here includes both LP Tokens in your wallet, and LP Tokens already staked in this farm.')\n      : t(\n          '“My Balance” here includes both %assetSymbol% in your wallet, and %assetSymbol% already staked in this pool.',\n          { assetSymbol: stakingTokenSymbol },\n        ),\n    { placement: 'top-end', tooltipOffset: [20, 10] },\n  )\n\n  const onBalanceFocus = () => {\n    setCalculatorMode(CalculatorMode.ROI_BASED_ON_PRINCIPAL)\n  }\n\n  const editingUnit = editingCurrency === EditingCurrency.TOKEN ? stakingTokenSymbol : 'USD'\n  const editingValue = editingCurrency === EditingCurrency.TOKEN ? principalAsToken : principalAsUSD\n  const conversionUnit = editingCurrency === EditingCurrency.TOKEN ? 'USD' : stakingTokenSymbol\n  const conversionValue = editingCurrency === EditingCurrency.TOKEN ? principalAsUSD : principalAsToken\n  const onUserInput = editingCurrency === EditingCurrency.TOKEN ? setPrincipalFromTokenValue : setPrincipalFromUSDValue\n\n  return (\n    <StyledModal\n      title={t('ROI Calculator')}\n      onDismiss={onBack || onDismiss}\n      onBack={onBack ?? null}\n      headerBackground=\"gradients.cardHeader\"\n    >\n      <ScrollableContainer>\n        <Flex flexDirection=\"column\" mb=\"8px\">\n          <Text color=\"secondary\" bold fontSize=\"12px\" textTransform=\"uppercase\">\n            {t('%asset% staked', { asset: stakingTokenSymbol })}\n          </Text>\n          <BalanceInput\n            currencyValue={`${conversionValue} ${conversionUnit}`}\n            innerRef={balanceInputRef}\n            placeholder=\"0.00\"\n            value={editingValue}\n            unit={editingUnit}\n            onUserInput={onUserInput}\n            switchEditingUnits={toggleEditingCurrency}\n            onFocus={onBalanceFocus}\n          />\n          <Flex justifyContent=\"space-between\" mt=\"8px\">\n            <Button\n              scale=\"xs\"\n              p=\"4px 16px\"\n              width=\"68px\"\n              variant=\"tertiary\"\n              onClick={() => setPrincipalFromUSDValue('100')}\n            >\n              $100\n            </Button>\n            <Button\n              scale=\"xs\"\n              p=\"4px 16px\"\n              width=\"68px\"\n              variant=\"tertiary\"\n              onClick={() => setPrincipalFromUSDValue('1000')}\n            >\n              $1000\n            </Button>\n            <Button\n              disabled={stakingTokenBalance.lte(0) || !account}\n              scale=\"xs\"\n              p=\"4px 16px\"\n              width=\"128px\"\n              variant=\"tertiary\"\n              onClick={() =>\n                setPrincipalFromUSDValue(getBalanceNumber(stakingTokenBalance.times(stakingTokenPrice)).toString())\n              }\n            >\n              {t('My Balance').toLocaleUpperCase()}\n            </Button>\n            <span ref={targetRef}>\n              <HelpIcon width=\"16px\" height=\"16px\" color=\"textSubtle\" />\n            </span>\n            {tooltipVisible && tooltip}\n          </Flex>\n          <Text mt=\"24px\" color=\"secondary\" bold fontSize=\"12px\" textTransform=\"uppercase\">\n            {t('Staked for')}\n          </Text>\n          <FullWidthButtonMenu activeIndex={stakingDuration} onItemClick={setStakingDuration} scale=\"sm\">\n            <ButtonMenuItem variant=\"tertiary\">{t('1D')}</ButtonMenuItem>\n            <ButtonMenuItem variant=\"tertiary\">{t('7D')}</ButtonMenuItem>\n            <ButtonMenuItem variant=\"tertiary\">{t('30D')}</ButtonMenuItem>\n            <ButtonMenuItem variant=\"tertiary\">{t('1Y')}</ButtonMenuItem>\n            <ButtonMenuItem variant=\"tertiary\">{t('5Y')}</ButtonMenuItem>\n          </FullWidthButtonMenu>\n          {autoCompoundFrequency === 0 && (\n            <>\n              <Text mt=\"24px\" color=\"secondary\" bold fontSize=\"12px\" textTransform=\"uppercase\">\n                {t('Compounding every')}\n              </Text>\n              <Flex alignItems=\"center\">\n                <Flex flex=\"1\">\n                  <Checkbox scale=\"sm\" checked={compounding} onChange={toggleCompounding} />\n                </Flex>\n                <Flex flex=\"6\">\n                  <FullWidthButtonMenu\n                    disabled={!compounding}\n                    activeIndex={activeCompoundingIndex}\n                    onItemClick={setCompoundingFrequency}\n                    scale=\"sm\"\n                  >\n                    <ButtonMenuItem>{t('1D')}</ButtonMenuItem>\n                    <ButtonMenuItem>{t('7D')}</ButtonMenuItem>\n                    <ButtonMenuItem>{t('14D')}</ButtonMenuItem>\n                    <ButtonMenuItem>{t('30D')}</ButtonMenuItem>\n                  </FullWidthButtonMenu>\n                </Flex>\n              </Flex>\n            </>\n          )}\n        </Flex>\n        <AnimatedArrow calculatorState={state} />\n        <Flex>\n          <RoiCard\n            earningTokenSymbol={earningTokenSymbol}\n            calculatorState={state}\n            setTargetRoi={setTargetRoi}\n            setCalculatorMode={setCalculatorMode}\n          />\n        </Flex>\n      </ScrollableContainer>\n      <RoiCalculatorFooter\n        isFarm={isFarm}\n        apr={apr}\n        displayApr={displayApr}\n        autoCompoundFrequency={autoCompoundFrequency}\n        multiplier={multiplier}\n        linkLabel={linkLabel}\n        linkHref={linkHref}\n        performanceFee={performanceFee}\n      />\n    </StyledModal>\n  )\n}\n\nexport default RoiCalculatorModal\n"]},"metadata":{},"sourceType":"module"}