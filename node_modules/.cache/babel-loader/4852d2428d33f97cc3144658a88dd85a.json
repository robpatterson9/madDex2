{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;// TODO PCS refactor ternaries\n/* eslint-disable no-nested-ternary */import React,{useCallback,useState,useMemo,useEffect}from'react';import styled from'styled-components';import{formatDistanceToNowStrict}from'date-fns';import{Text,Flex,Box,Radio,Skeleton,LinkExternal,ArrowForwardIcon,ArrowBackIcon}from'@pancakeswap/uikit';import{formatAmount}from'views/Info/utils/formatInfoNumbers';import{getBscScanLink}from'utils';import truncateHash from'utils/truncateHash';import{TransactionType}from'state/info/types';import{ITEMS_PER_INFO_TABLE_PAGE}from'config/constants/info';import{useTranslation}from'contexts/Localization';import{ClickableColumnHeader,TableWrapper,PageButtons,Arrow,Break}from'./shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n\"])));var ResponsiveGrid=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-gap: 1em;\\n  align-items: center;\\n  grid-template-columns: 2fr 0.8fr repeat(4, 1fr);\\n  padding: 0 24px;\\n  @media screen and (max-width: 940px) {\\n    grid-template-columns: 2fr repeat(4, 1fr);\\n    & > *:nth-child(5) {\\n      display: none;\\n    }\\n  }\\n  @media screen and (max-width: 800px) {\\n    grid-template-columns: 2fr repeat(2, 1fr);\\n    & > *:nth-child(5) {\\n      display: none;\\n    }\\n    & > *:nth-child(3) {\\n      display: none;\\n    }\\n    & > *:nth-child(4) {\\n      display: none;\\n    }\\n  }\\n  @media screen and (max-width: 500px) {\\n    grid-template-columns: 2fr 1fr;\\n    & > *:nth-child(5) {\\n      display: none;\\n    }\\n    & > *:nth-child(3) {\\n      display: none;\\n    }\\n    & > *:nth-child(4) {\\n      display: none;\\n    }\\n    & > *:nth-child(2) {\\n      display: none;\\n    }\\n  }\\n\"])));var RadioGroup=styled(Flex)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  margin-right: 16px;\\n  margin-top: 8px;\\n  cursor: pointer;\\n\"])));var SORT_FIELD={amountUSD:'amountUSD',timestamp:'timestamp',sender:'sender',amountToken0:'amountToken0',amountToken1:'amountToken1'};var TableLoader=function TableLoader(){var loadingRow=/*#__PURE__*/_jsxs(ResponsiveGrid,{children:[/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{})]});return/*#__PURE__*/_jsxs(_Fragment,{children:[loadingRow,loadingRow,loadingRow]});};var DataRow=function DataRow(_ref){var transaction=_ref.transaction;var _useTranslation=useTranslation(),t=_useTranslation.t;var abs0=Math.abs(transaction.amountToken0);var abs1=Math.abs(transaction.amountToken1);var outputTokenSymbol=transaction.amountToken0<0?transaction.token0Symbol:transaction.token1Symbol;var inputTokenSymbol=transaction.amountToken1<0?transaction.token0Symbol:transaction.token1Symbol;return/*#__PURE__*/_jsxs(ResponsiveGrid,{children:[/*#__PURE__*/_jsx(LinkExternal,{href:getBscScanLink(transaction.hash,'transaction'),children:/*#__PURE__*/_jsx(Text,{children:transaction.type===TransactionType.MINT?t('Add %token0% and %token1%',{token0:transaction.token0Symbol,token1:transaction.token1Symbol}):transaction.type===TransactionType.SWAP?t('Swap %token0% for %token1%',{token0:inputTokenSymbol,token1:outputTokenSymbol}):t('Remove %token0% and %token1%',{token0:transaction.token0Symbol,token1:transaction.token1Symbol})})}),/*#__PURE__*/_jsxs(Text,{children:[\"$\",formatAmount(transaction.amountUSD)]}),/*#__PURE__*/_jsx(Text,{children:/*#__PURE__*/_jsx(Text,{children:\"\".concat(formatAmount(abs0),\" \").concat(transaction.token0Symbol)})}),/*#__PURE__*/_jsx(Text,{children:/*#__PURE__*/_jsx(Text,{children:\"\".concat(formatAmount(abs1),\" \").concat(transaction.token1Symbol)})}),/*#__PURE__*/_jsx(LinkExternal,{href:getBscScanLink(transaction.sender,'address'),children:truncateHash(transaction.sender)}),/*#__PURE__*/_jsx(Text,{children:formatDistanceToNowStrict(parseInt(transaction.timestamp,10)*1000)})]});};var TransactionTable=function TransactionTable(_ref2){var transactions=_ref2.transactions;var _useState=useState(SORT_FIELD.timestamp),_useState2=_slicedToArray(_useState,2),sortField=_useState2[0],setSortField=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),sortDirection=_useState4[0],setSortDirection=_useState4[1];var _useTranslation2=useTranslation(),t=_useTranslation2.t;var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),maxPage=_useState8[0],setMaxPage=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),txFilter=_useState10[0],setTxFilter=_useState10[1];var sortedTransactions=useMemo(function(){return transactions?transactions.slice().sort(function(a,b){if(a&&b){return a[sortField]>b[sortField]?(sortDirection?-1:1)*1:(sortDirection?-1:1)*-1;}return-1;}).filter(function(x){return txFilter===undefined||x.type===txFilter;}).slice(ITEMS_PER_INFO_TABLE_PAGE*(page-1),page*ITEMS_PER_INFO_TABLE_PAGE):[];},[transactions,page,sortField,sortDirection,txFilter]);// Update maxPage based on amount of items & applied filtering\nuseEffect(function(){if(transactions){var filteredTransactions=transactions.filter(function(tx){return txFilter===undefined||tx.type===txFilter;});if(filteredTransactions.length%ITEMS_PER_INFO_TABLE_PAGE===0){setMaxPage(Math.floor(filteredTransactions.length/ITEMS_PER_INFO_TABLE_PAGE));}else{setMaxPage(Math.floor(filteredTransactions.length/ITEMS_PER_INFO_TABLE_PAGE)+1);}}},[transactions,txFilter]);var handleFilter=useCallback(function(newFilter){if(newFilter!==txFilter){setTxFilter(newFilter);setPage(1);}},[txFilter]);var handleSort=useCallback(function(newField){setSortField(newField);setSortDirection(sortField!==newField?true:!sortDirection);},[sortDirection,sortField]);var arrow=useCallback(function(field){var directionArrow=!sortDirection?'↑':'↓';return sortField===field?directionArrow:'';},[sortDirection,sortField]);return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(Flex,{mb:\"16px\",children:[/*#__PURE__*/_jsxs(Flex,{flexDirection:['column','row'],children:[/*#__PURE__*/_jsxs(RadioGroup,{onClick:function onClick(){return handleFilter(undefined);},children:[/*#__PURE__*/_jsx(Radio,{onChange:function onChange(){return null;},scale:\"sm\",checked:txFilter===undefined}),/*#__PURE__*/_jsx(Text,{ml:\"8px\",children:t('All')})]}),/*#__PURE__*/_jsxs(RadioGroup,{onClick:function onClick(){return handleFilter(TransactionType.SWAP);},children:[/*#__PURE__*/_jsx(Radio,{onChange:function onChange(){return null;},scale:\"sm\",checked:txFilter===TransactionType.SWAP}),/*#__PURE__*/_jsx(Text,{ml:\"8px\",children:t('Swaps')})]})]}),/*#__PURE__*/_jsxs(Flex,{flexDirection:['column','row'],children:[/*#__PURE__*/_jsxs(RadioGroup,{onClick:function onClick(){return handleFilter(TransactionType.MINT);},children:[/*#__PURE__*/_jsx(Radio,{onChange:function onChange(){return null;},scale:\"sm\",checked:txFilter===TransactionType.MINT}),/*#__PURE__*/_jsx(Text,{ml:\"8px\",children:t('Adds')})]}),/*#__PURE__*/_jsxs(RadioGroup,{onClick:function onClick(){return handleFilter(TransactionType.BURN);},children:[/*#__PURE__*/_jsx(Radio,{onChange:function onChange(){return null;},scale:\"sm\",checked:txFilter===TransactionType.BURN}),/*#__PURE__*/_jsx(Text,{ml:\"8px\",children:t('Removes')})]})]})]}),/*#__PURE__*/_jsxs(TableWrapper,{children:[/*#__PURE__*/_jsxs(ResponsiveGrid,{children:[/*#__PURE__*/_jsx(Text,{color:\"secondary\",fontSize:\"12px\",bold:true,textTransform:\"uppercase\",children:t('Action')}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.amountUSD);},textTransform:\"uppercase\",children:[t('Total Value'),\" \",arrow(SORT_FIELD.amountUSD)]}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.amountToken0);},textTransform:\"uppercase\",children:[t('Token Amount'),\" \",arrow(SORT_FIELD.amountToken0)]}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.amountToken1);},textTransform:\"uppercase\",children:[t('Token Amount'),\" \",arrow(SORT_FIELD.amountToken1)]}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.sender);},textTransform:\"uppercase\",children:[t('Account'),\" \",arrow(SORT_FIELD.sender)]}),/*#__PURE__*/_jsxs(ClickableColumnHeader,{color:\"secondary\",fontSize:\"12px\",bold:true,onClick:function onClick(){return handleSort(SORT_FIELD.timestamp);},textTransform:\"uppercase\",children:[t('Time'),\" \",arrow(SORT_FIELD.timestamp)]})]}),/*#__PURE__*/_jsx(Break,{}),transactions?/*#__PURE__*/_jsxs(_Fragment,{children:[sortedTransactions.map(function(transaction,index){if(transaction){return/*#__PURE__*/ (// eslint-disable-next-line react/no-array-index-key\n_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(DataRow,{transaction:transaction}),/*#__PURE__*/_jsx(Break,{})]},index));}return null;}),sortedTransactions.length===0?/*#__PURE__*/_jsx(Flex,{justifyContent:\"center\",children:/*#__PURE__*/_jsx(Text,{children:t('No Transactions')})}):undefined,/*#__PURE__*/_jsxs(PageButtons,{children:[/*#__PURE__*/_jsx(Arrow,{onClick:function onClick(){setPage(page===1?page:page-1);},children:/*#__PURE__*/_jsx(ArrowBackIcon,{color:page===1?'textDisabled':'primary'})}),/*#__PURE__*/_jsx(Text,{children:t('Page %page% of %maxPage%',{page:page,maxPage:maxPage})}),/*#__PURE__*/_jsx(Arrow,{onClick:function onClick(){setPage(page===maxPage?page:page+1);},children:/*#__PURE__*/_jsx(ArrowForwardIcon,{color:page===maxPage?'textDisabled':'primary'})})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TableLoader,{}),/*#__PURE__*/_jsx(Box,{})]})]})]});};export default TransactionTable;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Info/components/InfoTables/TransactionsTable.tsx"],"names":["React","useCallback","useState","useMemo","useEffect","styled","formatDistanceToNowStrict","Text","Flex","Box","Radio","Skeleton","LinkExternal","ArrowForwardIcon","ArrowBackIcon","formatAmount","getBscScanLink","truncateHash","TransactionType","ITEMS_PER_INFO_TABLE_PAGE","useTranslation","ClickableColumnHeader","TableWrapper","PageButtons","Arrow","Break","Wrapper","div","ResponsiveGrid","RadioGroup","SORT_FIELD","amountUSD","timestamp","sender","amountToken0","amountToken1","TableLoader","loadingRow","DataRow","transaction","t","abs0","Math","abs","abs1","outputTokenSymbol","token0Symbol","token1Symbol","inputTokenSymbol","hash","type","MINT","token0","token1","SWAP","parseInt","TransactionTable","transactions","sortField","setSortField","sortDirection","setSortDirection","page","setPage","maxPage","setMaxPage","undefined","txFilter","setTxFilter","sortedTransactions","slice","sort","a","b","filter","x","filteredTransactions","tx","length","floor","handleFilter","newFilter","handleSort","newField","arrow","field","directionArrow","BURN","map","index"],"mappings":"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","sourcesContent":["// TODO PCS refactor ternaries\n/* eslint-disable no-nested-ternary */\nimport React, { useCallback, useState, useMemo, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { formatDistanceToNowStrict } from 'date-fns'\nimport { Text, Flex, Box, Radio, Skeleton, LinkExternal, ArrowForwardIcon, ArrowBackIcon } from '@pancakeswap/uikit'\nimport { formatAmount } from 'views/Info/utils/formatInfoNumbers'\nimport { getBscScanLink } from 'utils'\nimport truncateHash from 'utils/truncateHash'\nimport { Transaction, TransactionType } from 'state/info/types'\nimport { ITEMS_PER_INFO_TABLE_PAGE } from 'config/constants/info'\nimport { useTranslation } from 'contexts/Localization'\nimport { ClickableColumnHeader, TableWrapper, PageButtons, Arrow, Break } from './shared'\n\nconst Wrapper = styled.div`\n  width: 100%;\n`\n\nconst ResponsiveGrid = styled.div`\n  display: grid;\n  grid-gap: 1em;\n  align-items: center;\n  grid-template-columns: 2fr 0.8fr repeat(4, 1fr);\n  padding: 0 24px;\n  @media screen and (max-width: 940px) {\n    grid-template-columns: 2fr repeat(4, 1fr);\n    & > *:nth-child(5) {\n      display: none;\n    }\n  }\n  @media screen and (max-width: 800px) {\n    grid-template-columns: 2fr repeat(2, 1fr);\n    & > *:nth-child(5) {\n      display: none;\n    }\n    & > *:nth-child(3) {\n      display: none;\n    }\n    & > *:nth-child(4) {\n      display: none;\n    }\n  }\n  @media screen and (max-width: 500px) {\n    grid-template-columns: 2fr 1fr;\n    & > *:nth-child(5) {\n      display: none;\n    }\n    & > *:nth-child(3) {\n      display: none;\n    }\n    & > *:nth-child(4) {\n      display: none;\n    }\n    & > *:nth-child(2) {\n      display: none;\n    }\n  }\n`\n\nconst RadioGroup = styled(Flex)`\n  align-items: center;\n  margin-right: 16px;\n  margin-top: 8px;\n  cursor: pointer;\n`\n\nconst SORT_FIELD = {\n  amountUSD: 'amountUSD',\n  timestamp: 'timestamp',\n  sender: 'sender',\n  amountToken0: 'amountToken0',\n  amountToken1: 'amountToken1',\n}\n\nconst TableLoader: React.FC = () => {\n  const loadingRow = (\n    <ResponsiveGrid>\n      <Skeleton />\n      <Skeleton />\n      <Skeleton />\n      <Skeleton />\n      <Skeleton />\n      <Skeleton />\n    </ResponsiveGrid>\n  )\n  return (\n    <>\n      {loadingRow}\n      {loadingRow}\n      {loadingRow}\n    </>\n  )\n}\n\nconst DataRow: React.FC<{ transaction: Transaction }> = ({ transaction }) => {\n  const { t } = useTranslation()\n  const abs0 = Math.abs(transaction.amountToken0)\n  const abs1 = Math.abs(transaction.amountToken1)\n  const outputTokenSymbol = transaction.amountToken0 < 0 ? transaction.token0Symbol : transaction.token1Symbol\n  const inputTokenSymbol = transaction.amountToken1 < 0 ? transaction.token0Symbol : transaction.token1Symbol\n\n  return (\n    <ResponsiveGrid>\n      <LinkExternal href={getBscScanLink(transaction.hash, 'transaction')}>\n        <Text>\n          {transaction.type === TransactionType.MINT\n            ? t('Add %token0% and %token1%', { token0: transaction.token0Symbol, token1: transaction.token1Symbol })\n            : transaction.type === TransactionType.SWAP\n            ? t('Swap %token0% for %token1%', { token0: inputTokenSymbol, token1: outputTokenSymbol })\n            : t('Remove %token0% and %token1%', { token0: transaction.token0Symbol, token1: transaction.token1Symbol })}\n        </Text>\n      </LinkExternal>\n      <Text>${formatAmount(transaction.amountUSD)}</Text>\n      <Text>\n        <Text>{`${formatAmount(abs0)} ${transaction.token0Symbol}`}</Text>\n      </Text>\n      <Text>\n        <Text>{`${formatAmount(abs1)} ${transaction.token1Symbol}`}</Text>\n      </Text>\n      <LinkExternal href={getBscScanLink(transaction.sender, 'address')}>\n        {truncateHash(transaction.sender)}\n      </LinkExternal>\n      <Text>{formatDistanceToNowStrict(parseInt(transaction.timestamp, 10) * 1000)}</Text>\n    </ResponsiveGrid>\n  )\n}\n\nconst TransactionTable: React.FC<{\n  transactions: Transaction[]\n}> = ({ transactions }) => {\n  const [sortField, setSortField] = useState(SORT_FIELD.timestamp)\n  const [sortDirection, setSortDirection] = useState<boolean>(true)\n\n  const { t } = useTranslation()\n\n  const [page, setPage] = useState(1)\n  const [maxPage, setMaxPage] = useState(1)\n\n  const [txFilter, setTxFilter] = useState<TransactionType | undefined>(undefined)\n\n  const sortedTransactions = useMemo(() => {\n    return transactions\n      ? transactions\n          .slice()\n          .sort((a, b) => {\n            if (a && b) {\n              return a[sortField as keyof Transaction] > b[sortField as keyof Transaction]\n                ? (sortDirection ? -1 : 1) * 1\n                : (sortDirection ? -1 : 1) * -1\n            }\n            return -1\n          })\n          .filter((x) => {\n            return txFilter === undefined || x.type === txFilter\n          })\n          .slice(ITEMS_PER_INFO_TABLE_PAGE * (page - 1), page * ITEMS_PER_INFO_TABLE_PAGE)\n      : []\n  }, [transactions, page, sortField, sortDirection, txFilter])\n\n  // Update maxPage based on amount of items & applied filtering\n  useEffect(() => {\n    if (transactions) {\n      const filteredTransactions = transactions.filter((tx) => {\n        return txFilter === undefined || tx.type === txFilter\n      })\n      if (filteredTransactions.length % ITEMS_PER_INFO_TABLE_PAGE === 0) {\n        setMaxPage(Math.floor(filteredTransactions.length / ITEMS_PER_INFO_TABLE_PAGE))\n      } else {\n        setMaxPage(Math.floor(filteredTransactions.length / ITEMS_PER_INFO_TABLE_PAGE) + 1)\n      }\n    }\n  }, [transactions, txFilter])\n\n  const handleFilter = useCallback(\n    (newFilter: TransactionType) => {\n      if (newFilter !== txFilter) {\n        setTxFilter(newFilter)\n        setPage(1)\n      }\n    },\n    [txFilter],\n  )\n\n  const handleSort = useCallback(\n    (newField: string) => {\n      setSortField(newField)\n      setSortDirection(sortField !== newField ? true : !sortDirection)\n    },\n    [sortDirection, sortField],\n  )\n\n  const arrow = useCallback(\n    (field: string) => {\n      const directionArrow = !sortDirection ? '↑' : '↓'\n      return sortField === field ? directionArrow : ''\n    },\n    [sortDirection, sortField],\n  )\n\n  return (\n    <Wrapper>\n      <Flex mb=\"16px\">\n        <Flex flexDirection={['column', 'row']}>\n          <RadioGroup onClick={() => handleFilter(undefined)}>\n            <Radio onChange={() => null} scale=\"sm\" checked={txFilter === undefined} />\n            <Text ml=\"8px\">{t('All')}</Text>\n          </RadioGroup>\n\n          <RadioGroup onClick={() => handleFilter(TransactionType.SWAP)}>\n            <Radio onChange={() => null} scale=\"sm\" checked={txFilter === TransactionType.SWAP} />\n            <Text ml=\"8px\">{t('Swaps')}</Text>\n          </RadioGroup>\n        </Flex>\n\n        <Flex flexDirection={['column', 'row']}>\n          <RadioGroup onClick={() => handleFilter(TransactionType.MINT)}>\n            <Radio onChange={() => null} scale=\"sm\" checked={txFilter === TransactionType.MINT} />\n            <Text ml=\"8px\">{t('Adds')}</Text>\n          </RadioGroup>\n\n          <RadioGroup onClick={() => handleFilter(TransactionType.BURN)}>\n            <Radio onChange={() => null} scale=\"sm\" checked={txFilter === TransactionType.BURN} />\n            <Text ml=\"8px\">{t('Removes')}</Text>\n          </RadioGroup>\n        </Flex>\n      </Flex>\n      <TableWrapper>\n        <ResponsiveGrid>\n          <Text color=\"secondary\" fontSize=\"12px\" bold textTransform=\"uppercase\">\n            {t('Action')}\n          </Text>\n          <ClickableColumnHeader\n            color=\"secondary\"\n            fontSize=\"12px\"\n            bold\n            onClick={() => handleSort(SORT_FIELD.amountUSD)}\n            textTransform=\"uppercase\"\n          >\n            {t('Total Value')} {arrow(SORT_FIELD.amountUSD)}\n          </ClickableColumnHeader>\n          <ClickableColumnHeader\n            color=\"secondary\"\n            fontSize=\"12px\"\n            bold\n            onClick={() => handleSort(SORT_FIELD.amountToken0)}\n            textTransform=\"uppercase\"\n          >\n            {t('Token Amount')} {arrow(SORT_FIELD.amountToken0)}\n          </ClickableColumnHeader>\n          <ClickableColumnHeader\n            color=\"secondary\"\n            fontSize=\"12px\"\n            bold\n            onClick={() => handleSort(SORT_FIELD.amountToken1)}\n            textTransform=\"uppercase\"\n          >\n            {t('Token Amount')} {arrow(SORT_FIELD.amountToken1)}\n          </ClickableColumnHeader>\n          <ClickableColumnHeader\n            color=\"secondary\"\n            fontSize=\"12px\"\n            bold\n            onClick={() => handleSort(SORT_FIELD.sender)}\n            textTransform=\"uppercase\"\n          >\n            {t('Account')} {arrow(SORT_FIELD.sender)}\n          </ClickableColumnHeader>\n          <ClickableColumnHeader\n            color=\"secondary\"\n            fontSize=\"12px\"\n            bold\n            onClick={() => handleSort(SORT_FIELD.timestamp)}\n            textTransform=\"uppercase\"\n          >\n            {t('Time')} {arrow(SORT_FIELD.timestamp)}\n          </ClickableColumnHeader>\n        </ResponsiveGrid>\n        <Break />\n\n        {transactions ? (\n          <>\n            {sortedTransactions.map((transaction, index) => {\n              if (transaction) {\n                return (\n                  // eslint-disable-next-line react/no-array-index-key\n                  <React.Fragment key={index}>\n                    <DataRow transaction={transaction} />\n                    <Break />\n                  </React.Fragment>\n                )\n              }\n              return null\n            })}\n            {sortedTransactions.length === 0 ? (\n              <Flex justifyContent=\"center\">\n                <Text>{t('No Transactions')}</Text>\n              </Flex>\n            ) : undefined}\n            <PageButtons>\n              <Arrow\n                onClick={() => {\n                  setPage(page === 1 ? page : page - 1)\n                }}\n              >\n                <ArrowBackIcon color={page === 1 ? 'textDisabled' : 'primary'} />\n              </Arrow>\n\n              <Text>{t('Page %page% of %maxPage%', { page, maxPage })}</Text>\n              <Arrow\n                onClick={() => {\n                  setPage(page === maxPage ? page : page + 1)\n                }}\n              >\n                <ArrowForwardIcon color={page === maxPage ? 'textDisabled' : 'primary'} />\n              </Arrow>\n            </PageButtons>\n          </>\n        ) : (\n          <>\n            <TableLoader />\n            {/* spacer */}\n            <Box />\n          </>\n        )}\n      </TableWrapper>\n    </Wrapper>\n  )\n}\n\nexport default TransactionTable\n"]},"metadata":{},"sourceType":"module"}