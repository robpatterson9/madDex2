{"ast":null,"code":"var _jsxFileName = \"/Volumes/evo970/lou/madDex-master/src/views/Ifos/components/IfoFoldableCard/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Card, CardHeader, CardBody, CardFooter, CardRibbon, ExpandableButton, Progress, Button, ChevronUpIcon } from '@pancakeswap/uikit';\nimport BigNumber from 'bignumber.js';\nimport { useWeb3React } from '@web3-react/core';\nimport { PoolIds } from 'config/constants/types';\nimport { useERC20 } from 'hooks/useContract';\nimport useToast from 'hooks/useToast';\nimport { useTranslation } from 'contexts/Localization';\nimport { ToastDescriptionWithTx } from 'components/Toast';\nimport { EnableStatus } from './types';\nimport IfoPoolCard from './IfoPoolCard';\nimport Timer from './Timer';\nimport Achievement from './Achievement';\nimport useIfoApprove from '../../hooks/useIfoApprove';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getRibbonComponent = (ifo, status, t) => {\n  if (status === 'coming_soon') {\n    return /*#__PURE__*/_jsxDEV(CardRibbon, {\n      variantColor: \"textDisabled\",\n      ribbonPosition: \"left\",\n      text: t('Coming Soon')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (status === 'live' || status === 'finished' && ifo.isActive) {\n    return /*#__PURE__*/_jsxDEV(CardRibbon, {\n      variantColor: \"primary\",\n      ribbonPosition: \"left\",\n      style: {\n        textTransform: 'uppercase'\n      },\n      text: status === 'live' ? `${t('Live')}!` : `${t('Finished')}!`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n  return null;\n};\n\nconst StyledCard = styled(Card)`\n  max-width: 736px;\n  width: 100%;\n  margin: auto;\n`;\n_c = StyledCard;\nconst Header = styled(CardHeader)`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  height: 112px;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n  background-image: ${({\n  ifoId\n}) => `url('/images/ifos/${ifoId}-bg.svg')`};\n`;\n_c2 = Header;\nconst FoldableContent = styled.div`\n  display: ${({\n  isVisible\n}) => isVisible ? 'block' : 'none'};\n  background: ${({\n  isActive,\n  theme\n}) => isActive ? theme.colors.gradients.bubblegum : theme.colors.dropdown};\n`;\n_c3 = FoldableContent;\nconst CardsWrapper = styled.div`\n  display: grid;\n  grid-gap: 32px;\n  grid-template-columns: 1fr;\n  margin-bottom: 32px;\n  ${({\n  theme\n}) => theme.mediaQueries.md} {\n    grid-template-columns: ${({\n  singleCard\n}) => singleCard ? '1fr' : '1fr 1fr'};\n    justify-items: ${({\n  singleCard\n}) => singleCard ? 'center' : 'unset'};\n  }\n`;\n_c4 = CardsWrapper;\nconst StyledCardBody = styled(CardBody)`\n  padding: 24px 16px;\n  ${({\n  theme\n}) => theme.mediaQueries.md} {\n    padding: 24px;\n  }\n`;\n_c5 = StyledCardBody;\nconst StyledCardFooter = styled(CardFooter)`\n  text-align: center;\n  padding: 8px;\n  background: ${({\n  theme\n}) => theme.colors.backgroundAlt};\n`;\n_c6 = StyledCardFooter;\n\nconst IfoFoldableCard = ({\n  ifo,\n  publicIfoData,\n  walletIfoData,\n  isInitiallyVisible\n}) => {\n  _s();\n\n  const [isVisible, setIsVisible] = useState(isInitiallyVisible);\n  const [enableStatus, setEnableStatus] = useState(EnableStatus.DISABLED);\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useWeb3React();\n  const raisingTokenContract = useERC20(ifo.currency.address);\n  const Ribbon = getRibbonComponent(ifo, publicIfoData.status, t);\n  const isActive = publicIfoData.status !== 'finished' && ifo.isActive;\n  const {\n    contract\n  } = walletIfoData;\n  const onApprove = useIfoApprove(raisingTokenContract, contract.address);\n  const {\n    toastSuccess\n  } = useToast();\n\n  const handleApprove = async () => {\n    try {\n      setEnableStatus(EnableStatus.IS_ENABLING);\n      const receipt = await onApprove();\n      setEnableStatus(EnableStatus.ENABLED);\n      toastSuccess(t('Successfully Enabled!'), /*#__PURE__*/_jsxDEV(ToastDescriptionWithTx, {\n        txHash: receipt.transactionHash,\n        children: t('You can now participate in the %symbol% IFO.', {\n          symbol: ifo.token.symbol\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this));\n    } catch (error) {\n      setEnableStatus(EnableStatus.DISABLED);\n    }\n  };\n\n  useEffect(() => {\n    const checkAllowance = async () => {\n      try {\n        const response = await raisingTokenContract.allowance(account, contract.address);\n        const currentAllowance = new BigNumber(response.toString());\n        setEnableStatus(currentAllowance.lte(0) ? EnableStatus.DISABLED : EnableStatus.ENABLED);\n      } catch (error) {\n        setEnableStatus(EnableStatus.DISABLED);\n      }\n    };\n\n    if (account) {\n      checkAllowance();\n    }\n  }, [account, raisingTokenContract, contract, setEnableStatus]);\n  return /*#__PURE__*/_jsxDEV(StyledCard, {\n    ribbon: Ribbon,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      ifoId: ifo.id,\n      children: /*#__PURE__*/_jsxDEV(ExpandableButton, {\n        expanded: isVisible,\n        onClick: () => setIsVisible(prev => !prev)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FoldableContent, {\n      isVisible: isVisible,\n      isActive: publicIfoData.status !== 'idle' && isActive,\n      children: [isActive && /*#__PURE__*/_jsxDEV(Progress, {\n        variant: \"flat\",\n        primaryStep: publicIfoData.progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(StyledCardBody, {\n        children: [isActive && /*#__PURE__*/_jsxDEV(Timer, {\n          publicIfoData: publicIfoData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(CardsWrapper, {\n          singleCard: !publicIfoData.poolBasic || !walletIfoData.poolBasic,\n          children: [publicIfoData.poolBasic && walletIfoData.poolBasic && /*#__PURE__*/_jsxDEV(IfoPoolCard, {\n            poolId: PoolIds.poolBasic,\n            ifo: ifo,\n            publicIfoData: publicIfoData,\n            walletIfoData: walletIfoData,\n            onApprove: handleApprove,\n            enableStatus: enableStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(IfoPoolCard, {\n            poolId: PoolIds.poolUnlimited,\n            ifo: ifo,\n            publicIfoData: publicIfoData,\n            walletIfoData: walletIfoData,\n            onApprove: handleApprove,\n            enableStatus: enableStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Achievement, {\n          ifo: ifo,\n          publicIfoData: publicIfoData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledCardFooter, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"text\",\n          endIcon: /*#__PURE__*/_jsxDEV(ChevronUpIcon, {\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 43\n          }, this),\n          onClick: () => setIsVisible(false),\n          children: t('Close')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n\n_s(IfoFoldableCard, \"EGO7ZSz9W6JFSH0SQbfoJrXQ7GI=\", false, function () {\n  return [useTranslation, useWeb3React, useERC20, useIfoApprove, useToast];\n});\n\n_c7 = IfoFoldableCard;\nexport default IfoFoldableCard;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"StyledCard\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"FoldableContent\");\n$RefreshReg$(_c4, \"CardsWrapper\");\n$RefreshReg$(_c5, \"StyledCardBody\");\n$RefreshReg$(_c6, \"StyledCardFooter\");\n$RefreshReg$(_c7, \"IfoFoldableCard\");","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Ifos/components/IfoFoldableCard/index.tsx"],"names":["React","useEffect","useState","styled","Card","CardHeader","CardBody","CardFooter","CardRibbon","ExpandableButton","Progress","Button","ChevronUpIcon","BigNumber","useWeb3React","PoolIds","useERC20","useToast","useTranslation","ToastDescriptionWithTx","EnableStatus","IfoPoolCard","Timer","Achievement","useIfoApprove","getRibbonComponent","ifo","status","t","isActive","textTransform","StyledCard","Header","ifoId","FoldableContent","div","isVisible","theme","colors","gradients","bubblegum","dropdown","CardsWrapper","mediaQueries","md","singleCard","StyledCardBody","StyledCardFooter","backgroundAlt","IfoFoldableCard","publicIfoData","walletIfoData","isInitiallyVisible","setIsVisible","enableStatus","setEnableStatus","DISABLED","account","raisingTokenContract","currency","address","Ribbon","contract","onApprove","toastSuccess","handleApprove","IS_ENABLING","receipt","ENABLED","transactionHash","symbol","token","error","checkAllowance","response","allowance","currentAllowance","toString","lte","id","prev","progress","poolBasic","poolUnlimited"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  CardRibbon,\n  ExpandableButton,\n  Progress,\n  Button,\n  ChevronUpIcon,\n} from '@pancakeswap/uikit'\nimport BigNumber from 'bignumber.js'\nimport { useWeb3React } from '@web3-react/core'\nimport { Ifo, IfoStatus, PoolIds } from 'config/constants/types'\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\nimport { useERC20 } from 'hooks/useContract'\nimport useToast from 'hooks/useToast'\nimport { useTranslation } from 'contexts/Localization'\nimport { ToastDescriptionWithTx } from 'components/Toast'\nimport { EnableStatus } from './types'\nimport IfoPoolCard from './IfoPoolCard'\nimport Timer from './Timer'\nimport Achievement from './Achievement'\nimport useIfoApprove from '../../hooks/useIfoApprove'\n\ninterface IfoFoldableCardProps {\n  ifo: Ifo\n  publicIfoData: PublicIfoData\n  walletIfoData: WalletIfoData\n  isInitiallyVisible: boolean\n}\n\nconst getRibbonComponent = (ifo: Ifo, status: IfoStatus, t: any) => {\n  if (status === 'coming_soon') {\n    return <CardRibbon variantColor=\"textDisabled\" ribbonPosition=\"left\" text={t('Coming Soon')} />\n  }\n\n  if (status === 'live' || (status === 'finished' && ifo.isActive)) {\n    return (\n      <CardRibbon\n        variantColor=\"primary\"\n        ribbonPosition=\"left\"\n        style={{ textTransform: 'uppercase' }}\n        text={status === 'live' ? `${t('Live')}!` : `${t('Finished')}!`}\n      />\n    )\n  }\n\n  return null\n}\n\nconst StyledCard = styled(Card)`\n  max-width: 736px;\n  width: 100%;\n  margin: auto;\n`\n\nconst Header = styled(CardHeader)<{ ifoId: string }>`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  height: 112px;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n  background-image: ${({ ifoId }) => `url('/images/ifos/${ifoId}-bg.svg')`};\n`\n\nconst FoldableContent = styled.div<{ isVisible: boolean; isActive: boolean }>`\n  display: ${({ isVisible }) => (isVisible ? 'block' : 'none')};\n  background: ${({ isActive, theme }) => (isActive ? theme.colors.gradients.bubblegum : theme.colors.dropdown)};\n`\n\nconst CardsWrapper = styled.div<{ singleCard: boolean }>`\n  display: grid;\n  grid-gap: 32px;\n  grid-template-columns: 1fr;\n  margin-bottom: 32px;\n  ${({ theme }) => theme.mediaQueries.md} {\n    grid-template-columns: ${({ singleCard }) => (singleCard ? '1fr' : '1fr 1fr')};\n    justify-items: ${({ singleCard }) => (singleCard ? 'center' : 'unset')};\n  }\n`\n\nconst StyledCardBody = styled(CardBody)`\n  padding: 24px 16px;\n  ${({ theme }) => theme.mediaQueries.md} {\n    padding: 24px;\n  }\n`\n\nconst StyledCardFooter = styled(CardFooter)`\n  text-align: center;\n  padding: 8px;\n  background: ${({ theme }) => theme.colors.backgroundAlt};\n`\n\nconst IfoFoldableCard: React.FC<IfoFoldableCardProps> = ({ ifo, publicIfoData, walletIfoData, isInitiallyVisible }) => {\n  const [isVisible, setIsVisible] = useState(isInitiallyVisible)\n  const [enableStatus, setEnableStatus] = useState(EnableStatus.DISABLED)\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const raisingTokenContract = useERC20(ifo.currency.address)\n  const Ribbon = getRibbonComponent(ifo, publicIfoData.status, t)\n  const isActive = publicIfoData.status !== 'finished' && ifo.isActive\n  const { contract } = walletIfoData\n  const onApprove = useIfoApprove(raisingTokenContract, contract.address)\n  const { toastSuccess } = useToast()\n\n  const handleApprove = async () => {\n    try {\n      setEnableStatus(EnableStatus.IS_ENABLING)\n\n      const receipt = await onApprove()\n\n      setEnableStatus(EnableStatus.ENABLED)\n      toastSuccess(\n        t('Successfully Enabled!'),\n        <ToastDescriptionWithTx txHash={receipt.transactionHash}>\n          {t('You can now participate in the %symbol% IFO.', { symbol: ifo.token.symbol })}\n        </ToastDescriptionWithTx>,\n      )\n    } catch (error) {\n      setEnableStatus(EnableStatus.DISABLED)\n    }\n  }\n\n  useEffect(() => {\n    const checkAllowance = async () => {\n      try {\n        const response = await raisingTokenContract.allowance(account, contract.address)\n        const currentAllowance = new BigNumber(response.toString())\n        setEnableStatus(currentAllowance.lte(0) ? EnableStatus.DISABLED : EnableStatus.ENABLED)\n      } catch (error) {\n        setEnableStatus(EnableStatus.DISABLED)\n      }\n    }\n\n    if (account) {\n      checkAllowance()\n    }\n  }, [account, raisingTokenContract, contract, setEnableStatus])\n\n  return (\n    <StyledCard ribbon={Ribbon}>\n      <Header ifoId={ifo.id}>\n        <ExpandableButton expanded={isVisible} onClick={() => setIsVisible((prev) => !prev)} />\n      </Header>\n      <FoldableContent isVisible={isVisible} isActive={publicIfoData.status !== 'idle' && isActive}>\n        {isActive && <Progress variant=\"flat\" primaryStep={publicIfoData.progress} />}\n        <StyledCardBody>\n          {isActive && <Timer publicIfoData={publicIfoData} />}\n          <CardsWrapper singleCard={!publicIfoData.poolBasic || !walletIfoData.poolBasic}>\n            {publicIfoData.poolBasic && walletIfoData.poolBasic && (\n              <IfoPoolCard\n                poolId={PoolIds.poolBasic}\n                ifo={ifo}\n                publicIfoData={publicIfoData}\n                walletIfoData={walletIfoData}\n                onApprove={handleApprove}\n                enableStatus={enableStatus}\n              />\n            )}\n            <IfoPoolCard\n              poolId={PoolIds.poolUnlimited}\n              ifo={ifo}\n              publicIfoData={publicIfoData}\n              walletIfoData={walletIfoData}\n              onApprove={handleApprove}\n              enableStatus={enableStatus}\n            />\n          </CardsWrapper>\n          <Achievement ifo={ifo} publicIfoData={publicIfoData} />\n        </StyledCardBody>\n        <StyledCardFooter>\n          <Button variant=\"text\" endIcon={<ChevronUpIcon color=\"primary\" />} onClick={() => setIsVisible(false)}>\n            {t('Close')}\n          </Button>\n        </StyledCardFooter>\n      </FoldableContent>\n    </StyledCard>\n  )\n}\n\nexport default IfoFoldableCard\n"]},"metadata":{},"sourceType":"module"}