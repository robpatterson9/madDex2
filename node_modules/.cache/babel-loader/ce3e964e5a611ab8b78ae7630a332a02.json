{"ast":null,"code":"import _objectSpread from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Box,Breadcrumbs,Card,Flex,Heading,Text}from'@pancakeswap/uikit';import{Link}from'react-router-dom';import{useTranslation}from'contexts/Localization';import Container from'components/Layout/Container';import{useAppDispatch}from'state';import{fetchProposals}from'state/voting';import{useGetProposalLoadingStatus,useGetProposals}from'state/voting/hooks';import{ProposalState,ProposalType,VotingStateLoadingStatus}from'state/types';import{filterProposalsByState,filterProposalsByType}from'../../helpers';import ProposalsLoading from'./ProposalsLoading';import TabMenu from'./TabMenu';import ProposalRow from'./ProposalRow';import Filters from'./Filters';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Proposals=function Proposals(){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState({proposalType:ProposalType.CORE,filterState:ProposalState.ACTIVE}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var proposalStatus=useGetProposalLoadingStatus();var proposals=useGetProposals();var dispatch=useAppDispatch();var proposalType=state.proposalType,filterState=state.filterState;var isLoading=proposalStatus===VotingStateLoadingStatus.LOADING;var isIdle=proposalStatus===VotingStateLoadingStatus.IDLE;useEffect(function(){dispatch(fetchProposals({first:1000,state:filterState}));},[filterState,dispatch]);var handleProposalTypeChange=function handleProposalTypeChange(newProposalType){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{proposalType:newProposalType});});};var handleFilterChange=function handleFilterChange(newFilterState){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{filterState:newFilterState});});};var filteredProposals=filterProposalsByState(filterProposalsByType(proposals,proposalType),filterState);return/*#__PURE__*/_jsxs(Container,{py:\"40px\",children:[/*#__PURE__*/_jsx(Box,{mb:\"48px\",children:/*#__PURE__*/_jsxs(Breadcrumbs,{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:t('Home')}),/*#__PURE__*/_jsx(Text,{children:t('Voting')})]})}),/*#__PURE__*/_jsx(Heading,{as:\"h2\",scale:\"xl\",mb:\"32px\",id:\"voting-proposals\",children:t('Proposals')}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(TabMenu,{proposalType:proposalType,onTypeChange:handleProposalTypeChange}),/*#__PURE__*/_jsx(Filters,{filterState:filterState,onFilterChange:handleFilterChange,isLoading:isLoading}),isLoading&&/*#__PURE__*/_jsx(ProposalsLoading,{}),isIdle&&filteredProposals.length>0&&filteredProposals.map(function(proposal){return/*#__PURE__*/_jsx(ProposalRow,{proposal:proposal},proposal.id);}),isIdle&&filteredProposals.length===0&&/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",justifyContent:\"center\",p:\"32px\",children:/*#__PURE__*/_jsx(Heading,{as:\"h5\",children:t('No proposals found')})})]})]});};export default Proposals;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Voting/components/Proposals/Proposals.tsx"],"names":["React","useEffect","useState","Box","Breadcrumbs","Card","Flex","Heading","Text","Link","useTranslation","Container","useAppDispatch","fetchProposals","useGetProposalLoadingStatus","useGetProposals","ProposalState","ProposalType","VotingStateLoadingStatus","filterProposalsByState","filterProposalsByType","ProposalsLoading","TabMenu","ProposalRow","Filters","Proposals","t","proposalType","CORE","filterState","ACTIVE","state","setState","proposalStatus","proposals","dispatch","isLoading","LOADING","isIdle","IDLE","first","handleProposalTypeChange","newProposalType","prevState","handleFilterChange","newFilterState","filteredProposals","length","map","proposal","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Box, Breadcrumbs, Card, Flex, Heading, Text } from '@pancakeswap/uikit'\nimport { Link } from 'react-router-dom'\nimport { useTranslation } from 'contexts/Localization'\nimport Container from 'components/Layout/Container'\nimport { useAppDispatch } from 'state'\nimport { fetchProposals } from 'state/voting'\nimport { useGetProposalLoadingStatus, useGetProposals } from 'state/voting/hooks'\nimport { ProposalState, ProposalType, VotingStateLoadingStatus } from 'state/types'\nimport { filterProposalsByState, filterProposalsByType } from '../../helpers'\nimport ProposalsLoading from './ProposalsLoading'\nimport TabMenu from './TabMenu'\nimport ProposalRow from './ProposalRow'\nimport Filters from './Filters'\n\ninterface State {\n  proposalType: ProposalType\n  filterState: ProposalState\n}\n\nconst Proposals = () => {\n  const { t } = useTranslation()\n  const [state, setState] = useState<State>({\n    proposalType: ProposalType.CORE,\n    filterState: ProposalState.ACTIVE,\n  })\n  const proposalStatus = useGetProposalLoadingStatus()\n  const proposals = useGetProposals()\n  const dispatch = useAppDispatch()\n\n  const { proposalType, filterState } = state\n  const isLoading = proposalStatus === VotingStateLoadingStatus.LOADING\n  const isIdle = proposalStatus === VotingStateLoadingStatus.IDLE\n\n  useEffect(() => {\n    dispatch(fetchProposals({ first: 1000, state: filterState }))\n  }, [filterState, dispatch])\n\n  const handleProposalTypeChange = (newProposalType: ProposalType) => {\n    setState((prevState) => ({\n      ...prevState,\n      proposalType: newProposalType,\n    }))\n  }\n\n  const handleFilterChange = (newFilterState: ProposalState) => {\n    setState((prevState) => ({\n      ...prevState,\n      filterState: newFilterState,\n    }))\n  }\n\n  const filteredProposals = filterProposalsByState(filterProposalsByType(proposals, proposalType), filterState)\n\n  return (\n    <Container py=\"40px\">\n      <Box mb=\"48px\">\n        <Breadcrumbs>\n          <Link to=\"/\">{t('Home')}</Link>\n          <Text>{t('Voting')}</Text>\n        </Breadcrumbs>\n      </Box>\n      <Heading as=\"h2\" scale=\"xl\" mb=\"32px\" id=\"voting-proposals\">\n        {t('Proposals')}\n      </Heading>\n      <Card>\n        <TabMenu proposalType={proposalType} onTypeChange={handleProposalTypeChange} />\n        <Filters filterState={filterState} onFilterChange={handleFilterChange} isLoading={isLoading} />\n        {isLoading && <ProposalsLoading />}\n        {isIdle &&\n          filteredProposals.length > 0 &&\n          filteredProposals.map((proposal) => {\n            return <ProposalRow key={proposal.id} proposal={proposal} />\n          })}\n        {isIdle && filteredProposals.length === 0 && (\n          <Flex alignItems=\"center\" justifyContent=\"center\" p=\"32px\">\n            <Heading as=\"h5\">{t('No proposals found')}</Heading>\n          </Flex>\n        )}\n      </Card>\n    </Container>\n  )\n}\n\nexport default Proposals\n"]},"metadata":{},"sourceType":"module"}