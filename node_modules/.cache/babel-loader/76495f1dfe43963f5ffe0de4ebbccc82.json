{"ast":null,"code":"import { request, gql } from 'graphql-request';\nimport { INFO_CLIENT } from 'config/constants/endpoints';\nimport { PCS_V2_START } from 'config/constants/info';\nimport { mapPairDayData, fetchChartData } from '../helpers';\n\nconst getPoolChartData = async (skip, address) => {\n  try {\n    const query = gql`\n      query pairDayDatas($startTime: Int!, $skip: Int!, $address: Bytes!) {\n        pairDayDatas(\n          first: 1000\n          skip: $skip\n          where: { pairAddress: $address, date_gt: $startTime }\n          orderBy: date\n          orderDirection: asc\n        ) {\n          date\n          dailyVolumeUSD\n          reserveUSD\n        }\n      }\n    `;\n    const {\n      pairDayDatas\n    } = await request(INFO_CLIENT, query, {\n      startTime: PCS_V2_START,\n      skip,\n      address\n    });\n    const data = pairDayDatas.map(mapPairDayData);\n    return {\n      data,\n      error: false\n    };\n  } catch (error) {\n    console.error('Failed to fetch pool chart data', error);\n    return {\n      error: true\n    };\n  }\n};\n\nconst fetchPoolChartData = async address => {\n  return fetchChartData(getPoolChartData, address);\n};\n\nexport default fetchPoolChartData;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/state/info/queries/pools/chartData.ts"],"names":["request","gql","INFO_CLIENT","PCS_V2_START","mapPairDayData","fetchChartData","getPoolChartData","skip","address","query","pairDayDatas","startTime","data","map","error","console","fetchPoolChartData"],"mappings":"AAAA,SAASA,OAAT,EAAkBC,GAAlB,QAA6B,iBAA7B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AAEA,SAASC,YAAT,QAA6B,uBAA7B;AAEA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,YAA/C;;AAEA,MAAMC,gBAAgB,GAAG,OAAOC,IAAP,EAAqBC,OAArB,KAA2F;AAClH,MAAI;AACF,UAAMC,KAAK,GAAGR,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAdI;AAeA,UAAM;AAAES,MAAAA;AAAF,QAAmB,MAAMV,OAAO,CAAuBE,WAAvB,EAAoCO,KAApC,EAA2C;AAC/EE,MAAAA,SAAS,EAAER,YADoE;AAE/EI,MAAAA,IAF+E;AAG/EC,MAAAA;AAH+E,KAA3C,CAAtC;AAKA,UAAMI,IAAI,GAAGF,YAAY,CAACG,GAAb,CAAiBT,cAAjB,CAAb;AACA,WAAO;AAAEQ,MAAAA,IAAF;AAAQE,MAAAA,KAAK,EAAE;AAAf,KAAP;AACD,GAvBD,CAuBE,OAAOA,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAc,iCAAd,EAAiDA,KAAjD;AACA,WAAO;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAAP;AACD;AACF,CA5BD;;AA8BA,MAAME,kBAAkB,GAAG,MAAOR,OAAP,IAA6E;AACtG,SAAOH,cAAc,CAACC,gBAAD,EAAmBE,OAAnB,CAArB;AACD,CAFD;;AAIA,eAAeQ,kBAAf","sourcesContent":["import { request, gql } from 'graphql-request'\nimport { INFO_CLIENT } from 'config/constants/endpoints'\nimport { ChartEntry } from 'state/info/types'\nimport { PCS_V2_START } from 'config/constants/info'\nimport { PairDayDatasResponse } from '../types'\nimport { mapPairDayData, fetchChartData } from '../helpers'\n\nconst getPoolChartData = async (skip: number, address: string): Promise<{ data?: ChartEntry[]; error: boolean }> => {\n  try {\n    const query = gql`\n      query pairDayDatas($startTime: Int!, $skip: Int!, $address: Bytes!) {\n        pairDayDatas(\n          first: 1000\n          skip: $skip\n          where: { pairAddress: $address, date_gt: $startTime }\n          orderBy: date\n          orderDirection: asc\n        ) {\n          date\n          dailyVolumeUSD\n          reserveUSD\n        }\n      }\n    `\n    const { pairDayDatas } = await request<PairDayDatasResponse>(INFO_CLIENT, query, {\n      startTime: PCS_V2_START,\n      skip,\n      address,\n    })\n    const data = pairDayDatas.map(mapPairDayData)\n    return { data, error: false }\n  } catch (error) {\n    console.error('Failed to fetch pool chart data', error)\n    return { error: true }\n  }\n}\n\nconst fetchPoolChartData = async (address: string): Promise<{ data?: ChartEntry[]; error: boolean }> => {\n  return fetchChartData(getPoolChartData, address)\n}\n\nexport default fetchPoolChartData\n"]},"metadata":{},"sourceType":"module"}