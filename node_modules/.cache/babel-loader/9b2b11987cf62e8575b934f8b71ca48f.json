{"ast":null,"code":"import React from'react';import{useWeb3React}from'@web3-react/core';import{useGetBetByEpoch,useGetCurrentEpoch}from'state/predictions/hooks';import{BetPosition}from'state/types';import{getMultiplierV2}from'../../helpers';import ExpiredRoundCard from'./ExpiredRoundCard';import LiveRoundCard from'./LiveRoundCard';import OpenRoundCard from'./OpenRoundCard';import SoonRoundCard from'./SoonRoundCard';import{jsx as _jsx}from\"react/jsx-runtime\";var RoundCard=function RoundCard(_ref){var round=_ref.round;var epoch=round.epoch,lockPrice=round.lockPrice,closePrice=round.closePrice,totalAmount=round.totalAmount,bullAmount=round.bullAmount,bearAmount=round.bearAmount;var currentEpoch=useGetCurrentEpoch();var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var ledger=useGetBetByEpoch(account,epoch);var hasEntered=ledger?ledger.amount.gt(0):false;var hasEnteredUp=hasEntered&&ledger.position===BetPosition.BULL;var hasEnteredDown=hasEntered&&ledger.position===BetPosition.BEAR;var hasClaimedUp=hasEntered&&ledger.claimed&&ledger.position===BetPosition.BULL;var hasClaimedDown=hasEntered&&ledger.claimed&&ledger.position===BetPosition.BEAR;var bullMultiplier=getMultiplierV2(totalAmount,bullAmount);var bearMultiplier=getMultiplierV2(totalAmount,bearAmount);var formattedBullMultiplier=bullMultiplier.toUnsafeFloat().toFixed(bullMultiplier.isZero()?0:2);var formattedBearMultiplier=bearMultiplier.toUnsafeFloat().toFixed(bearMultiplier.isZero()?0:2);// Next (open) round\nif(epoch===currentEpoch&&lockPrice===null){return/*#__PURE__*/_jsx(OpenRoundCard,{round:round,hasEnteredDown:hasEnteredDown,hasEnteredUp:hasEnteredUp,betAmount:ledger===null||ledger===void 0?void 0:ledger.amount,bullMultiplier:formattedBullMultiplier,bearMultiplier:formattedBearMultiplier});}// Live round\nif(closePrice===null&&epoch===currentEpoch-1){return/*#__PURE__*/_jsx(LiveRoundCard,{betAmount:ledger===null||ledger===void 0?void 0:ledger.amount,hasEnteredDown:hasEnteredDown,hasEnteredUp:hasEnteredUp,round:round,bullMultiplier:formattedBullMultiplier,bearMultiplier:formattedBearMultiplier});}// Fake future rounds\nif(epoch>currentEpoch){return/*#__PURE__*/_jsx(SoonRoundCard,{round:round});}// Past rounds\nreturn/*#__PURE__*/_jsx(ExpiredRoundCard,{round:round,hasEnteredDown:hasEnteredDown,hasEnteredUp:hasEnteredUp,hasClaimedDown:hasClaimedDown,hasClaimedUp:hasClaimedUp,betAmount:ledger===null||ledger===void 0?void 0:ledger.amount,bullMultiplier:formattedBullMultiplier,bearMultiplier:formattedBearMultiplier});};export default RoundCard;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Predictions/components/RoundCard/index.tsx"],"names":["React","useWeb3React","useGetBetByEpoch","useGetCurrentEpoch","BetPosition","getMultiplierV2","ExpiredRoundCard","LiveRoundCard","OpenRoundCard","SoonRoundCard","RoundCard","round","epoch","lockPrice","closePrice","totalAmount","bullAmount","bearAmount","currentEpoch","account","ledger","hasEntered","amount","gt","hasEnteredUp","position","BULL","hasEnteredDown","BEAR","hasClaimedUp","claimed","hasClaimedDown","bullMultiplier","bearMultiplier","formattedBullMultiplier","toUnsafeFloat","toFixed","isZero","formattedBearMultiplier"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { useGetBetByEpoch, useGetCurrentEpoch } from 'state/predictions/hooks'\nimport { BetPosition, NodeRound } from 'state/types'\nimport { getMultiplierV2 } from '../../helpers'\nimport ExpiredRoundCard from './ExpiredRoundCard'\nimport LiveRoundCard from './LiveRoundCard'\nimport OpenRoundCard from './OpenRoundCard'\nimport SoonRoundCard from './SoonRoundCard'\n\ninterface RoundCardProps {\n  round: NodeRound\n}\n\nconst RoundCard: React.FC<RoundCardProps> = ({ round }) => {\n  const { epoch, lockPrice, closePrice, totalAmount, bullAmount, bearAmount } = round\n  const currentEpoch = useGetCurrentEpoch()\n  const { account } = useWeb3React()\n  const ledger = useGetBetByEpoch(account, epoch)\n  const hasEntered = ledger ? ledger.amount.gt(0) : false\n  const hasEnteredUp = hasEntered && ledger.position === BetPosition.BULL\n  const hasEnteredDown = hasEntered && ledger.position === BetPosition.BEAR\n  const hasClaimedUp = hasEntered && ledger.claimed && ledger.position === BetPosition.BULL\n  const hasClaimedDown = hasEntered && ledger.claimed && ledger.position === BetPosition.BEAR\n\n  const bullMultiplier = getMultiplierV2(totalAmount, bullAmount)\n  const bearMultiplier = getMultiplierV2(totalAmount, bearAmount)\n\n  const formattedBullMultiplier = bullMultiplier.toUnsafeFloat().toFixed(bullMultiplier.isZero() ? 0 : 2)\n  const formattedBearMultiplier = bearMultiplier.toUnsafeFloat().toFixed(bearMultiplier.isZero() ? 0 : 2)\n\n  // Next (open) round\n  if (epoch === currentEpoch && lockPrice === null) {\n    return (\n      <OpenRoundCard\n        round={round}\n        hasEnteredDown={hasEnteredDown}\n        hasEnteredUp={hasEnteredUp}\n        betAmount={ledger?.amount}\n        bullMultiplier={formattedBullMultiplier}\n        bearMultiplier={formattedBearMultiplier}\n      />\n    )\n  }\n\n  // Live round\n  if (closePrice === null && epoch === currentEpoch - 1) {\n    return (\n      <LiveRoundCard\n        betAmount={ledger?.amount}\n        hasEnteredDown={hasEnteredDown}\n        hasEnteredUp={hasEnteredUp}\n        round={round}\n        bullMultiplier={formattedBullMultiplier}\n        bearMultiplier={formattedBearMultiplier}\n      />\n    )\n  }\n\n  // Fake future rounds\n  if (epoch > currentEpoch) {\n    return <SoonRoundCard round={round} />\n  }\n\n  // Past rounds\n  return (\n    <ExpiredRoundCard\n      round={round}\n      hasEnteredDown={hasEnteredDown}\n      hasEnteredUp={hasEnteredUp}\n      hasClaimedDown={hasClaimedDown}\n      hasClaimedUp={hasClaimedUp}\n      betAmount={ledger?.amount}\n      bullMultiplier={formattedBullMultiplier}\n      bearMultiplier={formattedBearMultiplier}\n    />\n  )\n}\n\nexport default RoundCard\n"]},"metadata":{},"sourceType":"module"}