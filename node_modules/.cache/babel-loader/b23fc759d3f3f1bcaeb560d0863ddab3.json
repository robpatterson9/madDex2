{"ast":null,"code":"import _defineProperty from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useCallback,useEffect,useMemo,useState}from'react';import styled from'styled-components';import{JSBI,Token}from'@pancakeswap/sdk';import{Button,Text,ArrowDownIcon,Box,useModal}from'@pancakeswap/uikit';import{useIsTransactionUnsupported}from'hooks/Trades';import UnsupportedCurrencyFooter from'components/UnsupportedCurrencyFooter';import{useTranslation}from'contexts/Localization';import SwapWarningTokens from'config/constants/swapWarningTokens';import AddressInputPanel from'./components/AddressInputPanel';import{GreyCard}from'../../components/Card';import Column,{AutoColumn}from'../../components/Layout/Column';import ConfirmSwapModal from'./components/ConfirmSwapModal';import CurrencyInputPanel from'../../components/CurrencyInputPanel';import{AutoRow,RowBetween}from'../../components/Layout/Row';import AdvancedSwapDetailsDropdown from'./components/AdvancedSwapDetailsDropdown';import confirmPriceImpactWithoutFee from'./components/confirmPriceImpactWithoutFee';import{ArrowWrapper,SwapCallbackError,Wrapper}from'./components/styleds';import TradePrice from'./components/TradePrice';import ImportTokenWarningModal from'./components/ImportTokenWarningModal';import ProgressSteps from'./components/ProgressSteps';import{AppHeader,AppBody}from'../../components/App';import ConnectWalletButton from'../../components/ConnectWalletButton';import{INITIAL_ALLOWED_SLIPPAGE}from'../../config/constants';import useActiveWeb3React from'../../hooks/useActiveWeb3React';import{useCurrency,useAllTokens}from'../../hooks/Tokens';import{ApprovalState,useApproveCallbackFromTrade}from'../../hooks/useApproveCallback';import{useSwapCallback}from'../../hooks/useSwapCallback';import useWrapCallback,{WrapType}from'../../hooks/useWrapCallback';import{Field}from'../../state/swap/actions';import{useDefaultsFromURLSearch,useDerivedSwapInfo,useSwapActionHandlers,useSwapState}from'../../state/swap/hooks';import{useExpertModeManager,useUserSlippageTolerance,useUserSingleHopOnly}from'../../state/user/hooks';import{maxAmountSpend}from'../../utils/maxAmountSpend';import{computeTradePriceBreakdown,warningSeverity}from'../../utils/prices';import CircleLoader from'../../components/Loader/CircleLoader';import Page from'../Page';import SwapWarningModal from'./components/SwapWarningModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Label=styled(Text)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  font-weight: bold;\\n  color: \",\";\\n\"])),function(_ref){var theme=_ref.theme;return theme.colors.secondary;});export default function Swap(_ref2){var _ref5,_ref6,_parsedAmounts$indepe,_parsedAmounts$indepe2,_parsedAmounts$depend,_parsedAmounts$depend2,_formattedAmounts,_parsedAmounts$indepe3,_parsedAmounts$Field$,_currencies$Field$INP,_currencies$Field$INP2;var history=_ref2.history;var loadedUrlParams=useDefaultsFromURLSearch();var _useTranslation=useTranslation(),t=_useTranslation.t;// token warning stuff\nvar _ref3=[useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.inputCurrencyId),useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.outputCurrencyId)],loadedInputCurrency=_ref3[0],loadedOutputCurrency=_ref3[1];var urlLoadedTokens=useMemo(function(){var _filter,_ref4;return(_filter=(_ref4=[loadedInputCurrency,loadedOutputCurrency])===null||_ref4===void 0?void 0:_ref4.filter(function(c){return c instanceof Token;}))!==null&&_filter!==void 0?_filter:[];},[loadedInputCurrency,loadedOutputCurrency]);// dismiss warning if all imported tokens are in active lists\nvar defaultTokens=useAllTokens();var importTokensNotInDefault=urlLoadedTokens&&urlLoadedTokens.filter(function(token){return!(token.address in defaultTokens);});var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;// for expert mode\nvar _useExpertModeManager=useExpertModeManager(),_useExpertModeManager2=_slicedToArray(_useExpertModeManager,1),isExpertMode=_useExpertModeManager2[0];// get custom setting values for user\nvar _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,1),allowedSlippage=_useUserSlippageToler2[0];// swap state\nvar _useSwapState=useSwapState(),independentField=_useSwapState.independentField,typedValue=_useSwapState.typedValue,recipient=_useSwapState.recipient;var _useDerivedSwapInfo=useDerivedSwapInfo(),v2Trade=_useDerivedSwapInfo.v2Trade,currencyBalances=_useDerivedSwapInfo.currencyBalances,parsedAmount=_useDerivedSwapInfo.parsedAmount,currencies=_useDerivedSwapInfo.currencies,swapInputError=_useDerivedSwapInfo.inputError;var _useWrapCallback=useWrapCallback(currencies[Field.INPUT],currencies[Field.OUTPUT],typedValue),wrapType=_useWrapCallback.wrapType,onWrap=_useWrapCallback.execute,wrapInputError=_useWrapCallback.inputError;var showWrap=wrapType!==WrapType.NOT_APPLICABLE;var trade=showWrap?undefined:v2Trade;var parsedAmounts=showWrap?(_ref5={},_defineProperty(_ref5,Field.INPUT,parsedAmount),_defineProperty(_ref5,Field.OUTPUT,parsedAmount),_ref5):(_ref6={},_defineProperty(_ref6,Field.INPUT,independentField===Field.INPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.inputAmount),_defineProperty(_ref6,Field.OUTPUT,independentField===Field.OUTPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.outputAmount),_ref6);var _useSwapActionHandler=useSwapActionHandlers(),onSwitchTokens=_useSwapActionHandler.onSwitchTokens,onCurrencySelection=_useSwapActionHandler.onCurrencySelection,onUserInput=_useSwapActionHandler.onUserInput,onChangeRecipient=_useSwapActionHandler.onChangeRecipient;var isValid=!swapInputError;var dependentField=independentField===Field.INPUT?Field.OUTPUT:Field.INPUT;var handleTypeInput=useCallback(function(value){onUserInput(Field.INPUT,value);},[onUserInput]);var handleTypeOutput=useCallback(function(value){onUserInput(Field.OUTPUT,value);},[onUserInput]);// modal and loading\nvar _useState=useState({tradeToConfirm:undefined,attemptingTxn:false,swapErrorMessage:undefined,txHash:undefined}),_useState2=_slicedToArray(_useState,2),_useState2$=_useState2[0],tradeToConfirm=_useState2$.tradeToConfirm,swapErrorMessage=_useState2$.swapErrorMessage,attemptingTxn=_useState2$.attemptingTxn,txHash=_useState2$.txHash,setSwapState=_useState2[1];var formattedAmounts=(_formattedAmounts={},_defineProperty(_formattedAmounts,independentField,typedValue),_defineProperty(_formattedAmounts,dependentField,showWrap?(_parsedAmounts$indepe=(_parsedAmounts$indepe2=parsedAmounts[independentField])===null||_parsedAmounts$indepe2===void 0?void 0:_parsedAmounts$indepe2.toExact())!==null&&_parsedAmounts$indepe!==void 0?_parsedAmounts$indepe:'':(_parsedAmounts$depend=(_parsedAmounts$depend2=parsedAmounts[dependentField])===null||_parsedAmounts$depend2===void 0?void 0:_parsedAmounts$depend2.toSignificant(6))!==null&&_parsedAmounts$depend!==void 0?_parsedAmounts$depend:''),_formattedAmounts);var route=trade===null||trade===void 0?void 0:trade.route;var userHasSpecifiedInputOutput=Boolean(currencies[Field.INPUT]&&currencies[Field.OUTPUT]&&((_parsedAmounts$indepe3=parsedAmounts[independentField])===null||_parsedAmounts$indepe3===void 0?void 0:_parsedAmounts$indepe3.greaterThan(JSBI.BigInt(0))));var noRoute=!route;// check whether the user has approved the router on the input token\nvar _useApproveCallbackFr=useApproveCallbackFromTrade(trade,allowedSlippage),_useApproveCallbackFr2=_slicedToArray(_useApproveCallbackFr,2),approval=_useApproveCallbackFr2[0],approveCallback=_useApproveCallbackFr2[1];// check if user has gone through approval process, used to show two step buttons, reset on token change\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),approvalSubmitted=_useState4[0],setApprovalSubmitted=_useState4[1];// mark when a user has submitted an approval, reset onTokenSelection for input field\nuseEffect(function(){if(approval===ApprovalState.PENDING){setApprovalSubmitted(true);}},[approval,approvalSubmitted]);var maxAmountInput=maxAmountSpend(currencyBalances[Field.INPUT]);var atMaxAmountInput=Boolean(maxAmountInput&&((_parsedAmounts$Field$=parsedAmounts[Field.INPUT])===null||_parsedAmounts$Field$===void 0?void 0:_parsedAmounts$Field$.equalTo(maxAmountInput)));// the callback to execute the swap\nvar _useSwapCallback=useSwapCallback(trade,allowedSlippage,recipient),swapCallback=_useSwapCallback.callback,swapCallbackError=_useSwapCallback.error;var _computeTradePriceBre=computeTradePriceBreakdown(trade),priceImpactWithoutFee=_computeTradePriceBre.priceImpactWithoutFee;var _useUserSingleHopOnly=useUserSingleHopOnly(),_useUserSingleHopOnly2=_slicedToArray(_useUserSingleHopOnly,1),singleHopOnly=_useUserSingleHopOnly2[0];var handleSwap=useCallback(function(){if(priceImpactWithoutFee&&!confirmPriceImpactWithoutFee(priceImpactWithoutFee,t)){return;}if(!swapCallback){return;}setSwapState({attemptingTxn:true,tradeToConfirm:tradeToConfirm,swapErrorMessage:undefined,txHash:undefined});swapCallback().then(function(hash){setSwapState({attemptingTxn:false,tradeToConfirm:tradeToConfirm,swapErrorMessage:undefined,txHash:hash});}).catch(function(error){setSwapState({attemptingTxn:false,tradeToConfirm:tradeToConfirm,swapErrorMessage:error.message,txHash:undefined});});},[priceImpactWithoutFee,swapCallback,tradeToConfirm,t]);// errors\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showInverted=_useState6[0],setShowInverted=_useState6[1];// warnings on slippage\nvar priceImpactSeverity=warningSeverity(priceImpactWithoutFee);// show approve flow when: no error on inputs, not approved or pending, or approved in current session\n// never show if price impact is above threshold in non expert mode\nvar showApproveFlow=!swapInputError&&(approval===ApprovalState.NOT_APPROVED||approval===ApprovalState.PENDING||approvalSubmitted&&approval===ApprovalState.APPROVED)&&!(priceImpactSeverity>3&&!isExpertMode);var handleConfirmDismiss=useCallback(function(){setSwapState({tradeToConfirm:tradeToConfirm,attemptingTxn:attemptingTxn,swapErrorMessage:swapErrorMessage,txHash:txHash});// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.INPUT,'');}},[attemptingTxn,onUserInput,swapErrorMessage,tradeToConfirm,txHash]);var handleAcceptChanges=useCallback(function(){setSwapState({tradeToConfirm:trade,swapErrorMessage:swapErrorMessage,txHash:txHash,attemptingTxn:attemptingTxn});},[attemptingTxn,swapErrorMessage,trade,txHash]);// swap warning state\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),swapWarningCurrency=_useState8[0],setSwapWarningCurrency=_useState8[1];var _useModal=useModal(/*#__PURE__*/_jsx(SwapWarningModal,{swapCurrency:swapWarningCurrency})),_useModal2=_slicedToArray(_useModal,1),onPresentSwapWarningModal=_useModal2[0];var shouldShowSwapWarning=function shouldShowSwapWarning(swapCurrency){var isWarningToken=Object.entries(SwapWarningTokens).find(function(warningTokenConfig){var warningTokenData=warningTokenConfig[1];return swapCurrency.address===warningTokenData.address;});return Boolean(isWarningToken);};useEffect(function(){if(swapWarningCurrency){onPresentSwapWarningModal();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[swapWarningCurrency]);var handleInputSelect=useCallback(function(inputCurrency){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonCurrencySelection(Field.INPUT,inputCurrency);var showSwapWarning=shouldShowSwapWarning(inputCurrency);if(showSwapWarning){setSwapWarningCurrency(inputCurrency);}else{setSwapWarningCurrency(null);}},[onCurrencySelection]);var handleMaxInput=useCallback(function(){if(maxAmountInput){onUserInput(Field.INPUT,maxAmountInput.toExact());}},[maxAmountInput,onUserInput]);var handleOutputSelect=useCallback(function(outputCurrency){onCurrencySelection(Field.OUTPUT,outputCurrency);var showSwapWarning=shouldShowSwapWarning(outputCurrency);if(showSwapWarning){setSwapWarningCurrency(outputCurrency);}else{setSwapWarningCurrency(null);}},[onCurrencySelection]);var swapIsUnsupported=useIsTransactionUnsupported(currencies===null||currencies===void 0?void 0:currencies.INPUT,currencies===null||currencies===void 0?void 0:currencies.OUTPUT);var _useModal3=useModal(/*#__PURE__*/_jsx(ImportTokenWarningModal,{tokens:importTokensNotInDefault,onCancel:function onCancel(){return history.push('/swap/');}})),_useModal4=_slicedToArray(_useModal3,1),onPresentImportTokenWarningModal=_useModal4[0];useEffect(function(){if(importTokensNotInDefault.length>0){onPresentImportTokenWarningModal();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[importTokensNotInDefault.length]);var _useModal5=useModal(/*#__PURE__*/_jsx(ConfirmSwapModal,{trade:trade,originalTrade:tradeToConfirm,onAcceptChanges:handleAcceptChanges,attemptingTxn:attemptingTxn,txHash:txHash,recipient:recipient,allowedSlippage:allowedSlippage,onConfirm:handleSwap,swapErrorMessage:swapErrorMessage,customOnDismiss:handleConfirmDismiss}),true,true,'confirmSwapModal'),_useModal6=_slicedToArray(_useModal5,1),onPresentConfirmModal=_useModal6[0];return/*#__PURE__*/_jsxs(Page,{children:[/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(AppHeader,{title:t('Exchange'),subtitle:t('Swap to / from MAD')}),/*#__PURE__*/_jsxs(Wrapper,{id:\"swap-page\",children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(CurrencyInputPanel,{label:independentField===Field.OUTPUT&&!showWrap&&trade?t('From (estimated)'):t('From'),value:formattedAmounts[Field.INPUT],showMaxButton:!atMaxAmountInput,currency:currencies[Field.INPUT],onUserInput:handleTypeInput,onMax:handleMaxInput,onCurrencySelect:handleInputSelect,otherCurrency:currencies[Field.OUTPUT],id:\"swap-currency-input\"}),/*#__PURE__*/_jsx(AutoColumn,{justify:\"space-between\",children:/*#__PURE__*/_jsxs(AutoRow,{justify:isExpertMode?'space-between':'center',style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:true,children:/*#__PURE__*/_jsx(ArrowDownIcon,{width:\"16px\",onClick:function onClick(){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonSwitchTokens();},color:currencies[Field.INPUT]&&currencies[Field.OUTPUT]?'primary':'text'})}),recipient===null&&!showWrap&&isExpertMode?/*#__PURE__*/_jsx(Button,{variant:\"text\",id:\"add-recipient-button\",onClick:function onClick(){return onChangeRecipient('');},children:t('+ Add a send (optional)')}):null]})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{value:formattedAmounts[Field.OUTPUT],onUserInput:handleTypeOutput,label:independentField===Field.INPUT&&!showWrap&&trade?t('To (estimated)'):t('To'),showMaxButton:false,currency:currencies[Field.OUTPUT],onCurrencySelect:handleOutputSelect,otherCurrency:currencies[Field.INPUT],id:\"swap-currency-output\"}),isExpertMode&&recipient!==null&&!showWrap?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:false,children:/*#__PURE__*/_jsx(ArrowDownIcon,{width:\"16px\"})}),/*#__PURE__*/_jsx(Button,{variant:\"text\",id:\"remove-recipient-button\",onClick:function onClick(){return onChangeRecipient(null);},children:t('- Remove send')})]}),/*#__PURE__*/_jsx(AddressInputPanel,{id:\"recipient\",value:recipient,onChange:onChangeRecipient})]}):null,showWrap?null:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"8px\",style:{padding:'0 16px'},children:[Boolean(trade)&&/*#__PURE__*/_jsxs(RowBetween,{align:\"center\",children:[/*#__PURE__*/_jsx(Label,{children:t('Price')}),/*#__PURE__*/_jsx(TradePrice,{price:trade===null||trade===void 0?void 0:trade.executionPrice,showInverted:showInverted,setShowInverted:setShowInverted})]}),allowedSlippage!==INITIAL_ALLOWED_SLIPPAGE&&/*#__PURE__*/_jsxs(RowBetween,{align:\"center\",children:[/*#__PURE__*/_jsx(Label,{children:t('Slippage Tolerance')}),/*#__PURE__*/_jsxs(Text,{bold:true,color:\"primary\",children:[allowedSlippage/100,\"%\"]})]})]})]}),/*#__PURE__*/_jsxs(Box,{mt:\"1rem\",children:[swapIsUnsupported?/*#__PURE__*/_jsx(Button,{width:\"100%\",disabled:true,mb:\"4px\",children:t('Unsupported Asset')}):!account?/*#__PURE__*/_jsx(ConnectWalletButton,{width:\"100%\"}):showWrap?/*#__PURE__*/_jsx(Button,{width:\"100%\",disabled:Boolean(wrapInputError),onClick:onWrap,children:wrapInputError!==null&&wrapInputError!==void 0?wrapInputError:wrapType===WrapType.WRAP?'Wrap':wrapType===WrapType.UNWRAP?'Unwrap':null}):noRoute&&userHasSpecifiedInputOutput?/*#__PURE__*/_jsxs(GreyCard,{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",mb:\"4px\",children:t('Insufficient liquidity for this trade.')}),singleHopOnly&&/*#__PURE__*/_jsx(Text,{color:\"textSubtle\",mb:\"4px\",children:t('Try enabling multi-hop trades.')})]}):showApproveFlow?/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Button,{variant:approval===ApprovalState.APPROVED?'success':'primary',onClick:approveCallback,disabled:approval!==ApprovalState.NOT_APPROVED||approvalSubmitted,width:\"48%\",children:approval===ApprovalState.PENDING?/*#__PURE__*/_jsxs(AutoRow,{gap:\"6px\",justify:\"center\",children:[t('Enabling'),\" \",/*#__PURE__*/_jsx(CircleLoader,{stroke:\"white\"})]}):approvalSubmitted&&approval===ApprovalState.APPROVED?t('Enabled'):t('Enable %asset%',{asset:(_currencies$Field$INP=(_currencies$Field$INP2=currencies[Field.INPUT])===null||_currencies$Field$INP2===void 0?void 0:_currencies$Field$INP2.symbol)!==null&&_currencies$Field$INP!==void 0?_currencies$Field$INP:''})}),/*#__PURE__*/_jsx(Button,{variant:isValid&&priceImpactSeverity>2?'danger':'primary',onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,txHash:undefined});onPresentConfirmModal();}},width:\"48%\",id:\"swap-button\",disabled:!isValid||approval!==ApprovalState.APPROVED||priceImpactSeverity>3&&!isExpertMode,children:priceImpactSeverity>3&&!isExpertMode?t('Price Impact High'):priceImpactSeverity>2?t('Swap Anyway'):t('Swap')})]}):/*#__PURE__*/_jsx(Button,{variant:isValid&&priceImpactSeverity>2&&!swapCallbackError?'danger':'primary',onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,txHash:undefined});onPresentConfirmModal();}},id:\"swap-button\",width:\"100%\",disabled:!isValid||priceImpactSeverity>3&&!isExpertMode||!!swapCallbackError,children:swapInputError||(priceImpactSeverity>3&&!isExpertMode?t('Price Impact Too High'):priceImpactSeverity>2?t('Swap Anyway'):t('Swap'))}),showApproveFlow&&/*#__PURE__*/_jsx(Column,{style:{marginTop:'1rem'},children:/*#__PURE__*/_jsx(ProgressSteps,{steps:[approval===ApprovalState.APPROVED]})}),isExpertMode&&swapErrorMessage?/*#__PURE__*/_jsx(SwapCallbackError,{error:swapErrorMessage}):null]})]})]}),!swapIsUnsupported?/*#__PURE__*/_jsx(AdvancedSwapDetailsDropdown,{trade:trade}):/*#__PURE__*/_jsx(UnsupportedCurrencyFooter,{currencies:[currencies.INPUT,currencies.OUTPUT]}),/*#__PURE__*/_jsx(\"div\",{className:\"Iframe\",children:/*#__PURE__*/_jsx(\"iframe\",{src:\"https://widget.onramper.com?defaultCrypto=BNB&color=FF1100&apiKey=pk_prod_EMEhKOXNuUfrHnqu9Xg2w3hUVBPuurn8sHoPYvbbf4s0\",height:\"595px\",width:\"540px\",title:\"Onramper widget\",frameBorder:\"0\",allow:\"accelerometer; autoplay; camera; gyroscope; payment\",children:/*#__PURE__*/_jsx(\"a\",{href:\"https://widget.onramper.com\",target:\"_blank\",rel:\"noreferrer\",children:\"Buy crypto\"})})})]});}","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Swap/index.tsx"],"names":["React","useCallback","useEffect","useMemo","useState","styled","JSBI","Token","Button","Text","ArrowDownIcon","Box","useModal","useIsTransactionUnsupported","UnsupportedCurrencyFooter","useTranslation","SwapWarningTokens","AddressInputPanel","GreyCard","Column","AutoColumn","ConfirmSwapModal","CurrencyInputPanel","AutoRow","RowBetween","AdvancedSwapDetailsDropdown","confirmPriceImpactWithoutFee","ArrowWrapper","SwapCallbackError","Wrapper","TradePrice","ImportTokenWarningModal","ProgressSteps","AppHeader","AppBody","ConnectWalletButton","INITIAL_ALLOWED_SLIPPAGE","useActiveWeb3React","useCurrency","useAllTokens","ApprovalState","useApproveCallbackFromTrade","useSwapCallback","useWrapCallback","WrapType","Field","useDefaultsFromURLSearch","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","useExpertModeManager","useUserSlippageTolerance","useUserSingleHopOnly","maxAmountSpend","computeTradePriceBreakdown","warningSeverity","CircleLoader","Page","SwapWarningModal","Label","theme","colors","secondary","Swap","history","loadedUrlParams","t","inputCurrencyId","outputCurrencyId","loadedInputCurrency","loadedOutputCurrency","urlLoadedTokens","filter","c","defaultTokens","importTokensNotInDefault","token","address","account","isExpertMode","allowedSlippage","independentField","typedValue","recipient","v2Trade","currencyBalances","parsedAmount","currencies","swapInputError","inputError","INPUT","OUTPUT","wrapType","onWrap","execute","wrapInputError","showWrap","NOT_APPLICABLE","trade","undefined","parsedAmounts","inputAmount","outputAmount","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","isValid","dependentField","handleTypeInput","value","handleTypeOutput","tradeToConfirm","attemptingTxn","swapErrorMessage","txHash","setSwapState","formattedAmounts","toExact","toSignificant","route","userHasSpecifiedInputOutput","Boolean","greaterThan","BigInt","noRoute","approval","approveCallback","approvalSubmitted","setApprovalSubmitted","PENDING","maxAmountInput","atMaxAmountInput","equalTo","swapCallback","callback","swapCallbackError","error","priceImpactWithoutFee","singleHopOnly","handleSwap","then","hash","catch","message","showInverted","setShowInverted","priceImpactSeverity","showApproveFlow","NOT_APPROVED","APPROVED","handleConfirmDismiss","handleAcceptChanges","swapWarningCurrency","setSwapWarningCurrency","onPresentSwapWarningModal","shouldShowSwapWarning","swapCurrency","isWarningToken","Object","entries","find","warningTokenConfig","warningTokenData","handleInputSelect","inputCurrency","showSwapWarning","handleMaxInput","handleOutputSelect","outputCurrency","swapIsUnsupported","push","onPresentImportTokenWarningModal","length","onPresentConfirmModal","padding","executionPrice","WRAP","UNWRAP","textAlign","asset","symbol","marginTop"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react'\nimport styled from 'styled-components'\nimport { CurrencyAmount, JSBI, Token, Trade } from '@pancakeswap/sdk'\nimport { Button, Text, ArrowDownIcon, Box, useModal } from '@pancakeswap/uikit'\nimport { useIsTransactionUnsupported } from 'hooks/Trades'\nimport UnsupportedCurrencyFooter from 'components/UnsupportedCurrencyFooter'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { useTranslation } from 'contexts/Localization'\nimport SwapWarningTokens from 'config/constants/swapWarningTokens'\nimport AddressInputPanel from './components/AddressInputPanel'\nimport { GreyCard } from '../../components/Card'\nimport Column, { AutoColumn } from '../../components/Layout/Column'\nimport ConfirmSwapModal from './components/ConfirmSwapModal'\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\nimport { AutoRow, RowBetween } from '../../components/Layout/Row'\nimport AdvancedSwapDetailsDropdown from './components/AdvancedSwapDetailsDropdown'\nimport confirmPriceImpactWithoutFee from './components/confirmPriceImpactWithoutFee'\nimport { ArrowWrapper, SwapCallbackError, Wrapper } from './components/styleds'\nimport TradePrice from './components/TradePrice'\nimport ImportTokenWarningModal from './components/ImportTokenWarningModal'\nimport ProgressSteps from './components/ProgressSteps'\nimport { AppHeader, AppBody } from '../../components/App'\nimport ConnectWalletButton from '../../components/ConnectWalletButton'\n\nimport { INITIAL_ALLOWED_SLIPPAGE } from '../../config/constants'\nimport useActiveWeb3React from '../../hooks/useActiveWeb3React'\nimport { useCurrency, useAllTokens } from '../../hooks/Tokens'\nimport { ApprovalState, useApproveCallbackFromTrade } from '../../hooks/useApproveCallback'\nimport { useSwapCallback } from '../../hooks/useSwapCallback'\nimport useWrapCallback, { WrapType } from '../../hooks/useWrapCallback'\nimport { Field } from '../../state/swap/actions'\nimport {\n  useDefaultsFromURLSearch,\n  useDerivedSwapInfo,\n  useSwapActionHandlers,\n  useSwapState,\n} from '../../state/swap/hooks'\nimport { useExpertModeManager, useUserSlippageTolerance, useUserSingleHopOnly } from '../../state/user/hooks'\nimport { maxAmountSpend } from '../../utils/maxAmountSpend'\nimport { computeTradePriceBreakdown, warningSeverity } from '../../utils/prices'\nimport CircleLoader from '../../components/Loader/CircleLoader'\nimport Page from '../Page'\nimport SwapWarningModal from './components/SwapWarningModal'\n\nconst Label = styled(Text)`\n  font-size: 12px;\n  font-weight: bold;\n  color: ${({ theme }) => theme.colors.secondary};\n`\n\nexport default function Swap({ history }: RouteComponentProps) {\n  const loadedUrlParams = useDefaultsFromURLSearch()\n\n  const { t } = useTranslation()\n\n  // token warning stuff\n  const [loadedInputCurrency, loadedOutputCurrency] = [\n    useCurrency(loadedUrlParams?.inputCurrencyId),\n    useCurrency(loadedUrlParams?.outputCurrencyId),\n  ]\n  const urlLoadedTokens: Token[] = useMemo(\n    () => [loadedInputCurrency, loadedOutputCurrency]?.filter((c): c is Token => c instanceof Token) ?? [],\n    [loadedInputCurrency, loadedOutputCurrency],\n  )\n\n  // dismiss warning if all imported tokens are in active lists\n  const defaultTokens = useAllTokens()\n  const importTokensNotInDefault =\n    urlLoadedTokens &&\n    urlLoadedTokens.filter((token: Token) => {\n      return !(token.address in defaultTokens)\n    })\n\n  const { account } = useActiveWeb3React()\n\n  // for expert mode\n  const [isExpertMode] = useExpertModeManager()\n\n  // get custom setting values for user\n  const [allowedSlippage] = useUserSlippageTolerance()\n\n  // swap state\n  const { independentField, typedValue, recipient } = useSwapState()\n  const { v2Trade, currencyBalances, parsedAmount, currencies, inputError: swapInputError } = useDerivedSwapInfo()\n\n  const {\n    wrapType,\n    execute: onWrap,\n    inputError: wrapInputError,\n  } = useWrapCallback(currencies[Field.INPUT], currencies[Field.OUTPUT], typedValue)\n  const showWrap: boolean = wrapType !== WrapType.NOT_APPLICABLE\n  const trade = showWrap ? undefined : v2Trade\n\n  const parsedAmounts = showWrap\n    ? {\n        [Field.INPUT]: parsedAmount,\n        [Field.OUTPUT]: parsedAmount,\n      }\n    : {\n        [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade?.inputAmount,\n        [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade?.outputAmount,\n      }\n\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\n  const isValid = !swapInputError\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n\n  const handleTypeInput = useCallback(\n    (value: string) => {\n      onUserInput(Field.INPUT, value)\n    },\n    [onUserInput],\n  )\n  const handleTypeOutput = useCallback(\n    (value: string) => {\n      onUserInput(Field.OUTPUT, value)\n    },\n    [onUserInput],\n  )\n\n  // modal and loading\n  const [{ tradeToConfirm, swapErrorMessage, attemptingTxn, txHash }, setSwapState] = useState<{\n    tradeToConfirm: Trade | undefined\n    attemptingTxn: boolean\n    swapErrorMessage: string | undefined\n    txHash: string | undefined\n  }>({\n    tradeToConfirm: undefined,\n    attemptingTxn: false,\n    swapErrorMessage: undefined,\n    txHash: undefined,\n  })\n\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: showWrap\n      ? parsedAmounts[independentField]?.toExact() ?? ''\n      : parsedAmounts[dependentField]?.toSignificant(6) ?? '',\n  }\n\n  const route = trade?.route\n  const userHasSpecifiedInputOutput = Boolean(\n    currencies[Field.INPUT] && currencies[Field.OUTPUT] && parsedAmounts[independentField]?.greaterThan(JSBI.BigInt(0)),\n  )\n  const noRoute = !route\n\n  // check whether the user has approved the router on the input token\n  const [approval, approveCallback] = useApproveCallbackFromTrade(trade, allowedSlippage)\n\n  // check if user has gone through approval process, used to show two step buttons, reset on token change\n  const [approvalSubmitted, setApprovalSubmitted] = useState<boolean>(false)\n\n  // mark when a user has submitted an approval, reset onTokenSelection for input field\n  useEffect(() => {\n    if (approval === ApprovalState.PENDING) {\n      setApprovalSubmitted(true)\n    }\n  }, [approval, approvalSubmitted])\n\n  const maxAmountInput: CurrencyAmount | undefined = maxAmountSpend(currencyBalances[Field.INPUT])\n  const atMaxAmountInput = Boolean(maxAmountInput && parsedAmounts[Field.INPUT]?.equalTo(maxAmountInput))\n\n  // the callback to execute the swap\n  const { callback: swapCallback, error: swapCallbackError } = useSwapCallback(trade, allowedSlippage, recipient)\n\n  const { priceImpactWithoutFee } = computeTradePriceBreakdown(trade)\n\n  const [singleHopOnly] = useUserSingleHopOnly()\n\n  const handleSwap = useCallback(() => {\n    if (priceImpactWithoutFee && !confirmPriceImpactWithoutFee(priceImpactWithoutFee, t)) {\n      return\n    }\n    if (!swapCallback) {\n      return\n    }\n    setSwapState({ attemptingTxn: true, tradeToConfirm, swapErrorMessage: undefined, txHash: undefined })\n    swapCallback()\n      .then((hash) => {\n        setSwapState({ attemptingTxn: false, tradeToConfirm, swapErrorMessage: undefined, txHash: hash })\n      })\n      .catch((error) => {\n        setSwapState({\n          attemptingTxn: false,\n          tradeToConfirm,\n          swapErrorMessage: error.message,\n          txHash: undefined,\n        })\n      })\n  }, [priceImpactWithoutFee, swapCallback, tradeToConfirm, t])\n\n  // errors\n  const [showInverted, setShowInverted] = useState<boolean>(false)\n\n  // warnings on slippage\n  const priceImpactSeverity = warningSeverity(priceImpactWithoutFee)\n\n  // show approve flow when: no error on inputs, not approved or pending, or approved in current session\n  // never show if price impact is above threshold in non expert mode\n  const showApproveFlow =\n    !swapInputError &&\n    (approval === ApprovalState.NOT_APPROVED ||\n      approval === ApprovalState.PENDING ||\n      (approvalSubmitted && approval === ApprovalState.APPROVED)) &&\n    !(priceImpactSeverity > 3 && !isExpertMode)\n\n  const handleConfirmDismiss = useCallback(() => {\n    setSwapState({ tradeToConfirm, attemptingTxn, swapErrorMessage, txHash })\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onUserInput(Field.INPUT, '')\n    }\n  }, [attemptingTxn, onUserInput, swapErrorMessage, tradeToConfirm, txHash])\n\n  const handleAcceptChanges = useCallback(() => {\n    setSwapState({ tradeToConfirm: trade, swapErrorMessage, txHash, attemptingTxn })\n  }, [attemptingTxn, swapErrorMessage, trade, txHash])\n\n  // swap warning state\n  const [swapWarningCurrency, setSwapWarningCurrency] = useState(null)\n  const [onPresentSwapWarningModal] = useModal(<SwapWarningModal swapCurrency={swapWarningCurrency} />)\n\n  const shouldShowSwapWarning = (swapCurrency) => {\n    const isWarningToken = Object.entries(SwapWarningTokens).find((warningTokenConfig) => {\n      const warningTokenData = warningTokenConfig[1]\n      return swapCurrency.address === warningTokenData.address\n    })\n    return Boolean(isWarningToken)\n  }\n\n  useEffect(() => {\n    if (swapWarningCurrency) {\n      onPresentSwapWarningModal()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [swapWarningCurrency])\n\n  const handleInputSelect = useCallback(\n    (inputCurrency) => {\n      setApprovalSubmitted(false) // reset 2 step UI for approvals\n      onCurrencySelection(Field.INPUT, inputCurrency)\n      const showSwapWarning = shouldShowSwapWarning(inputCurrency)\n      if (showSwapWarning) {\n        setSwapWarningCurrency(inputCurrency)\n      } else {\n        setSwapWarningCurrency(null)\n      }\n    },\n    [onCurrencySelection],\n  )\n\n  const handleMaxInput = useCallback(() => {\n    if (maxAmountInput) {\n      onUserInput(Field.INPUT, maxAmountInput.toExact())\n    }\n  }, [maxAmountInput, onUserInput])\n\n  const handleOutputSelect = useCallback(\n    (outputCurrency) => {\n      onCurrencySelection(Field.OUTPUT, outputCurrency)\n      const showSwapWarning = shouldShowSwapWarning(outputCurrency)\n      if (showSwapWarning) {\n        setSwapWarningCurrency(outputCurrency)\n      } else {\n        setSwapWarningCurrency(null)\n      }\n    },\n\n    [onCurrencySelection],\n  )\n\n  const swapIsUnsupported = useIsTransactionUnsupported(currencies?.INPUT, currencies?.OUTPUT)\n\n  const [onPresentImportTokenWarningModal] = useModal(\n    <ImportTokenWarningModal tokens={importTokensNotInDefault} onCancel={() => history.push('/swap/')} />,\n  )\n\n  useEffect(() => {\n    if (importTokensNotInDefault.length > 0) {\n      onPresentImportTokenWarningModal()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [importTokensNotInDefault.length])\n\n  const [onPresentConfirmModal] = useModal(\n    <ConfirmSwapModal\n      trade={trade}\n      originalTrade={tradeToConfirm}\n      onAcceptChanges={handleAcceptChanges}\n      attemptingTxn={attemptingTxn}\n      txHash={txHash}\n      recipient={recipient}\n      allowedSlippage={allowedSlippage}\n      onConfirm={handleSwap}\n      swapErrorMessage={swapErrorMessage}\n      customOnDismiss={handleConfirmDismiss}\n    />,\n    true,\n    true,\n    'confirmSwapModal',\n  )\n\n  return (\n    <Page>\n      <AppBody>\n        <AppHeader title={t('Exchange')} subtitle={t('Swap to / from MAD')} />\n        <Wrapper id=\"swap-page\">\n          <AutoColumn gap=\"md\">\n            <CurrencyInputPanel\n              label={independentField === Field.OUTPUT && !showWrap && trade ? t('From (estimated)') : t('From')}\n              value={formattedAmounts[Field.INPUT]}\n              showMaxButton={!atMaxAmountInput}\n              currency={currencies[Field.INPUT]}\n              onUserInput={handleTypeInput}\n              onMax={handleMaxInput}\n              onCurrencySelect={handleInputSelect}\n              otherCurrency={currencies[Field.OUTPUT]}\n              id=\"swap-currency-input\"\n            />\n            <AutoColumn justify=\"space-between\">\n              <AutoRow justify={isExpertMode ? 'space-between' : 'center'} style={{ padding: '0 1rem' }}>\n                <ArrowWrapper clickable>\n                  <ArrowDownIcon\n                    width=\"16px\"\n                    onClick={() => {\n                      setApprovalSubmitted(false) // reset 2 step UI for approvals\n                      onSwitchTokens()\n                    }}\n                    color={currencies[Field.INPUT] && currencies[Field.OUTPUT] ? 'primary' : 'text'}\n                  />\n                </ArrowWrapper>\n                {recipient === null && !showWrap && isExpertMode ? (\n                  <Button variant=\"text\" id=\"add-recipient-button\" onClick={() => onChangeRecipient('')}>\n                    {t('+ Add a send (optional)')}\n                  </Button>\n                ) : null}\n              </AutoRow>\n            </AutoColumn>\n            <CurrencyInputPanel\n              value={formattedAmounts[Field.OUTPUT]}\n              onUserInput={handleTypeOutput}\n              label={independentField === Field.INPUT && !showWrap && trade ? t('To (estimated)') : t('To')}\n              showMaxButton={false}\n              currency={currencies[Field.OUTPUT]}\n              onCurrencySelect={handleOutputSelect}\n              otherCurrency={currencies[Field.INPUT]}\n              id=\"swap-currency-output\"\n            />\n\n            {isExpertMode && recipient !== null && !showWrap ? (\n              <>\n                <AutoRow justify=\"space-between\" style={{ padding: '0 1rem' }}>\n                  <ArrowWrapper clickable={false}>\n                    <ArrowDownIcon width=\"16px\" />\n                  </ArrowWrapper>\n                  <Button variant=\"text\" id=\"remove-recipient-button\" onClick={() => onChangeRecipient(null)}>\n                    {t('- Remove send')}\n                  </Button>\n                </AutoRow>\n                <AddressInputPanel id=\"recipient\" value={recipient} onChange={onChangeRecipient} />\n              </>\n            ) : null}\n\n            {showWrap ? null : (\n              <AutoColumn gap=\"8px\" style={{ padding: '0 16px' }}>\n                {Boolean(trade) && (\n                  <RowBetween align=\"center\">\n                    <Label>{t('Price')}</Label>\n                    <TradePrice\n                      price={trade?.executionPrice}\n                      showInverted={showInverted}\n                      setShowInverted={setShowInverted}\n                    />\n                  </RowBetween>\n                )}\n                {allowedSlippage !== INITIAL_ALLOWED_SLIPPAGE && (\n                  <RowBetween align=\"center\">\n                    <Label>{t('Slippage Tolerance')}</Label>\n                    <Text bold color=\"primary\">\n                      {allowedSlippage / 100}%\n                    </Text>\n                  </RowBetween>\n                )}\n              </AutoColumn>\n            )}\n          </AutoColumn>\n          <Box mt=\"1rem\">\n            {swapIsUnsupported ? (\n              <Button width=\"100%\" disabled mb=\"4px\">\n                {t('Unsupported Asset')}\n              </Button>\n            ) : !account ? (\n              <ConnectWalletButton width=\"100%\" />\n            ) : showWrap ? (\n              <Button width=\"100%\" disabled={Boolean(wrapInputError)} onClick={onWrap}>\n                {wrapInputError ??\n                  (wrapType === WrapType.WRAP ? 'Wrap' : wrapType === WrapType.UNWRAP ? 'Unwrap' : null)}\n              </Button>\n            ) : noRoute && userHasSpecifiedInputOutput ? (\n              <GreyCard style={{ textAlign: 'center' }}>\n                <Text color=\"textSubtle\" mb=\"4px\">\n                  {t('Insufficient liquidity for this trade.')}\n                </Text>\n                {singleHopOnly && (\n                  <Text color=\"textSubtle\" mb=\"4px\">\n                    {t('Try enabling multi-hop trades.')}\n                  </Text>\n                )}\n              </GreyCard>\n            ) : showApproveFlow ? (\n              <RowBetween>\n                <Button\n                  variant={approval === ApprovalState.APPROVED ? 'success' : 'primary'}\n                  onClick={approveCallback}\n                  disabled={approval !== ApprovalState.NOT_APPROVED || approvalSubmitted}\n                  width=\"48%\"\n                >\n                  {approval === ApprovalState.PENDING ? (\n                    <AutoRow gap=\"6px\" justify=\"center\">\n                      {t('Enabling')} <CircleLoader stroke=\"white\" />\n                    </AutoRow>\n                  ) : approvalSubmitted && approval === ApprovalState.APPROVED ? (\n                    t('Enabled')\n                  ) : (\n                    t('Enable %asset%', { asset: currencies[Field.INPUT]?.symbol ?? '' })\n                  )}\n                </Button>\n                <Button\n                  variant={isValid && priceImpactSeverity > 2 ? 'danger' : 'primary'}\n                  onClick={() => {\n                    if (isExpertMode) {\n                      handleSwap()\n                    } else {\n                      setSwapState({\n                        tradeToConfirm: trade,\n                        attemptingTxn: false,\n                        swapErrorMessage: undefined,\n                        txHash: undefined,\n                      })\n                      onPresentConfirmModal()\n                    }\n                  }}\n                  width=\"48%\"\n                  id=\"swap-button\"\n                  disabled={\n                    !isValid || approval !== ApprovalState.APPROVED || (priceImpactSeverity > 3 && !isExpertMode)\n                  }\n                >\n                  {priceImpactSeverity > 3 && !isExpertMode\n                    ? t('Price Impact High')\n                    : priceImpactSeverity > 2\n                    ? t('Swap Anyway')\n                    : t('Swap')}\n                </Button>\n              </RowBetween>\n            ) : (\n              <Button\n                variant={isValid && priceImpactSeverity > 2 && !swapCallbackError ? 'danger' : 'primary'}\n                onClick={() => {\n                  if (isExpertMode) {\n                    handleSwap()\n                  } else {\n                    setSwapState({\n                      tradeToConfirm: trade,\n                      attemptingTxn: false,\n                      swapErrorMessage: undefined,\n                      txHash: undefined,\n                    })\n                    onPresentConfirmModal()\n                  }\n                }}\n                id=\"swap-button\"\n                width=\"100%\"\n                disabled={!isValid || (priceImpactSeverity > 3 && !isExpertMode) || !!swapCallbackError}\n              >\n                {swapInputError ||\n                  (priceImpactSeverity > 3 && !isExpertMode\n                    ? t('Price Impact Too High')\n                    : priceImpactSeverity > 2\n                    ? t('Swap Anyway')\n                    : t('Swap'))}\n              </Button>\n            )}\n            {showApproveFlow && (\n              <Column style={{ marginTop: '1rem' }}>\n                <ProgressSteps steps={[approval === ApprovalState.APPROVED]} />\n              </Column>\n            )}\n            {isExpertMode && swapErrorMessage ? <SwapCallbackError error={swapErrorMessage} /> : null}\n          </Box>\n        </Wrapper>\n      </AppBody>\n      {!swapIsUnsupported ? (\n        <AdvancedSwapDetailsDropdown trade={trade} />\n      ) : (\n        <UnsupportedCurrencyFooter currencies={[currencies.INPUT, currencies.OUTPUT]} />\n      )}\n       <div className= \"Iframe\">\n <iframe\n            src=\"https://widget.onramper.com?defaultCrypto=BNB&color=FF1100&apiKey=pk_prod_EMEhKOXNuUfrHnqu9Xg2w3hUVBPuurn8sHoPYvbbf4s0\"\n            height=\"595px\"\n            width=\"540px\"\n            title=\"Onramper widget\"\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; camera; gyroscope; payment\"\n          >\n            <a href=\"https://widget.onramper.com\" target=\"_blank\" rel=\"noreferrer\">\n              Buy crypto\n            </a>\n          </iframe>\n    </div>\n    \n    </Page>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}