{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{CurrencyAmount,ETHER,JSBI,Percent,Price}from'@pancakeswap/sdk';import{useCallback,useMemo}from'react';import{useDispatch,useSelector}from'react-redux';import useActiveWeb3React from'hooks/useActiveWeb3React';import{PairState,usePair}from'hooks/usePairs';import useTotalSupply from'hooks/useTotalSupply';import{useTranslation}from'contexts/Localization';import{wrappedCurrency,wrappedCurrencyAmount}from'utils/wrappedCurrency';import{tryParseAmount}from'../swap/hooks';import{useCurrencyBalances}from'../wallet/hooks';import{Field,typeInput}from'./actions';var ZERO=JSBI.BigInt(0);export function useMintState(){return useSelector(function(state){return state.mint;});}export function useMintActionHandlers(noLiquidity){var dispatch=useDispatch();var onFieldAInput=useCallback(function(typedValue){dispatch(typeInput({field:Field.CURRENCY_A,typedValue:typedValue,noLiquidity:noLiquidity===true}));},[dispatch,noLiquidity]);var onFieldBInput=useCallback(function(typedValue){dispatch(typeInput({field:Field.CURRENCY_B,typedValue:typedValue,noLiquidity:noLiquidity===true}));},[dispatch,noLiquidity]);return{onFieldAInput:onFieldAInput,onFieldBInput:onFieldBInput};}export function useDerivedMintInfo(currencyA,currencyB){var _currencyBalances,_currencyBalances$Fie,_currencyBalances$Fie2;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useMintState=useMintState(),independentField=_useMintState.independentField,typedValue=_useMintState.typedValue,otherTypedValue=_useMintState.otherTypedValue;var dependentField=independentField===Field.CURRENCY_A?Field.CURRENCY_B:Field.CURRENCY_A;// tokens\nvar currencies=useMemo(function(){var _ref;return _ref={},_defineProperty(_ref,Field.CURRENCY_A,currencyA!==null&&currencyA!==void 0?currencyA:undefined),_defineProperty(_ref,Field.CURRENCY_B,currencyB!==null&&currencyB!==void 0?currencyB:undefined),_ref;},[currencyA,currencyB]);// pair\nvar _usePair=usePair(currencies[Field.CURRENCY_A],currencies[Field.CURRENCY_B]),_usePair2=_slicedToArray(_usePair,2),pairState=_usePair2[0],pair=_usePair2[1];var totalSupply=useTotalSupply(pair===null||pair===void 0?void 0:pair.liquidityToken);var noLiquidity=pairState===PairState.NOT_EXISTS||Boolean(totalSupply&&JSBI.equal(totalSupply.raw,ZERO));// balances\nvar balances=useCurrencyBalances(account!==null&&account!==void 0?account:undefined,[currencies[Field.CURRENCY_A],currencies[Field.CURRENCY_B]]);var currencyBalances=(_currencyBalances={},_defineProperty(_currencyBalances,Field.CURRENCY_A,balances[0]),_defineProperty(_currencyBalances,Field.CURRENCY_B,balances[1]),_currencyBalances);// amounts\nvar independentAmount=tryParseAmount(typedValue,currencies[independentField]);var dependentAmount=useMemo(function(){if(noLiquidity){if(otherTypedValue&&currencies[dependentField]){return tryParseAmount(otherTypedValue,currencies[dependentField]);}return undefined;}if(independentAmount){// we wrap the currencies just to get the price in terms of the other token\nvar wrappedIndependentAmount=wrappedCurrencyAmount(independentAmount,chainId);var _ref2=[wrappedCurrency(currencyA,chainId),wrappedCurrency(currencyB,chainId)],tokenA=_ref2[0],tokenB=_ref2[1];if(tokenA&&tokenB&&wrappedIndependentAmount&&pair){var dependentCurrency=dependentField===Field.CURRENCY_B?currencyB:currencyA;var dependentTokenAmount=dependentField===Field.CURRENCY_B?pair.priceOf(tokenA).quote(wrappedIndependentAmount):pair.priceOf(tokenB).quote(wrappedIndependentAmount);return dependentCurrency===ETHER?CurrencyAmount.ether(dependentTokenAmount.raw):dependentTokenAmount;}return undefined;}return undefined;},[noLiquidity,otherTypedValue,currencies,dependentField,independentAmount,currencyA,chainId,currencyB,pair]);var parsedAmounts=useMemo(function(){var _ref3;return _ref3={},_defineProperty(_ref3,Field.CURRENCY_A,independentField===Field.CURRENCY_A?independentAmount:dependentAmount),_defineProperty(_ref3,Field.CURRENCY_B,independentField===Field.CURRENCY_A?dependentAmount:independentAmount),_ref3;},[dependentAmount,independentAmount,independentField]);var price=useMemo(function(){if(noLiquidity){var _currencyAAmount=parsedAmounts[Field.CURRENCY_A],_currencyBAmount=parsedAmounts[Field.CURRENCY_B];if(_currencyAAmount&&_currencyBAmount){return new Price(_currencyAAmount.currency,_currencyBAmount.currency,_currencyAAmount.raw,_currencyBAmount.raw);}return undefined;}var wrappedCurrencyA=wrappedCurrency(currencyA,chainId);return pair&&wrappedCurrencyA?pair.priceOf(wrappedCurrencyA):undefined;},[chainId,currencyA,noLiquidity,pair,parsedAmounts]);// liquidity minted\nvar liquidityMinted=useMemo(function(){var currencyAAmount=parsedAmounts[Field.CURRENCY_A],currencyBAmount=parsedAmounts[Field.CURRENCY_B];var _ref4=[wrappedCurrencyAmount(currencyAAmount,chainId),wrappedCurrencyAmount(currencyBAmount,chainId)],tokenAmountA=_ref4[0],tokenAmountB=_ref4[1];if(pair&&totalSupply&&tokenAmountA&&tokenAmountB){return pair.getLiquidityMinted(totalSupply,tokenAmountA,tokenAmountB);}return undefined;},[parsedAmounts,chainId,pair,totalSupply]);var poolTokenPercentage=useMemo(function(){if(liquidityMinted&&totalSupply){return new Percent(liquidityMinted.raw,totalSupply.add(liquidityMinted).raw);}return undefined;},[liquidityMinted,totalSupply]);var error;if(!account){error=t('Connect Wallet');}if(pairState===PairState.INVALID){var _error;error=(_error=error)!==null&&_error!==void 0?_error:t('Invalid pair');}if(!parsedAmounts[Field.CURRENCY_A]||!parsedAmounts[Field.CURRENCY_B]){var _error2;error=(_error2=error)!==null&&_error2!==void 0?_error2:t('Enter an amount');}var currencyAAmount=parsedAmounts[Field.CURRENCY_A],currencyBAmount=parsedAmounts[Field.CURRENCY_B];if(currencyAAmount&&(currencyBalances===null||currencyBalances===void 0?void 0:(_currencyBalances$Fie=currencyBalances[Field.CURRENCY_A])===null||_currencyBalances$Fie===void 0?void 0:_currencyBalances$Fie.lessThan(currencyAAmount))){var _currencies$Field$CUR;error=t('Insufficient %symbol% balance',{symbol:(_currencies$Field$CUR=currencies[Field.CURRENCY_A])===null||_currencies$Field$CUR===void 0?void 0:_currencies$Field$CUR.symbol});}if(currencyBAmount&&(currencyBalances===null||currencyBalances===void 0?void 0:(_currencyBalances$Fie2=currencyBalances[Field.CURRENCY_B])===null||_currencyBalances$Fie2===void 0?void 0:_currencyBalances$Fie2.lessThan(currencyBAmount))){var _currencies$Field$CUR2;error=t('Insufficient %symbol% balance',{symbol:(_currencies$Field$CUR2=currencies[Field.CURRENCY_B])===null||_currencies$Field$CUR2===void 0?void 0:_currencies$Field$CUR2.symbol});}return{dependentField:dependentField,currencies:currencies,pair:pair,pairState:pairState,currencyBalances:currencyBalances,parsedAmounts:parsedAmounts,price:price,noLiquidity:noLiquidity,liquidityMinted:liquidityMinted,poolTokenPercentage:poolTokenPercentage,error:error};}","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/state/mint/hooks.ts"],"names":["CurrencyAmount","ETHER","JSBI","Percent","Price","useCallback","useMemo","useDispatch","useSelector","useActiveWeb3React","PairState","usePair","useTotalSupply","useTranslation","wrappedCurrency","wrappedCurrencyAmount","tryParseAmount","useCurrencyBalances","Field","typeInput","ZERO","BigInt","useMintState","state","mint","useMintActionHandlers","noLiquidity","dispatch","onFieldAInput","typedValue","field","CURRENCY_A","onFieldBInput","CURRENCY_B","useDerivedMintInfo","currencyA","currencyB","account","chainId","t","independentField","otherTypedValue","dependentField","currencies","undefined","pairState","pair","totalSupply","liquidityToken","NOT_EXISTS","Boolean","equal","raw","balances","currencyBalances","independentAmount","dependentAmount","wrappedIndependentAmount","tokenA","tokenB","dependentCurrency","dependentTokenAmount","priceOf","quote","ether","parsedAmounts","price","currencyAAmount","currencyBAmount","currency","wrappedCurrencyA","liquidityMinted","tokenAmountA","tokenAmountB","getLiquidityMinted","poolTokenPercentage","add","error","INVALID","lessThan","symbol"],"mappings":"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","sourcesContent":["import { Currency, CurrencyAmount, ETHER, JSBI, Pair, Percent, Price, TokenAmount } from '@pancakeswap/sdk'\nimport { useCallback, useMemo } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\nimport { PairState, usePair } from 'hooks/usePairs'\nimport useTotalSupply from 'hooks/useTotalSupply'\n\nimport { useTranslation } from 'contexts/Localization'\nimport { wrappedCurrency, wrappedCurrencyAmount } from 'utils/wrappedCurrency'\nimport { AppDispatch, AppState } from '../index'\nimport { tryParseAmount } from '../swap/hooks'\nimport { useCurrencyBalances } from '../wallet/hooks'\nimport { Field, typeInput } from './actions'\n\nconst ZERO = JSBI.BigInt(0)\n\nexport function useMintState(): AppState['mint'] {\n  return useSelector<AppState, AppState['mint']>((state) => state.mint)\n}\n\nexport function useMintActionHandlers(noLiquidity: boolean | undefined): {\n  onFieldAInput: (typedValue: string) => void\n  onFieldBInput: (typedValue: string) => void\n} {\n  const dispatch = useDispatch<AppDispatch>()\n\n  const onFieldAInput = useCallback(\n    (typedValue: string) => {\n      dispatch(typeInput({ field: Field.CURRENCY_A, typedValue, noLiquidity: noLiquidity === true }))\n    },\n    [dispatch, noLiquidity],\n  )\n  const onFieldBInput = useCallback(\n    (typedValue: string) => {\n      dispatch(typeInput({ field: Field.CURRENCY_B, typedValue, noLiquidity: noLiquidity === true }))\n    },\n    [dispatch, noLiquidity],\n  )\n\n  return {\n    onFieldAInput,\n    onFieldBInput,\n  }\n}\n\nexport function useDerivedMintInfo(\n  currencyA: Currency | undefined,\n  currencyB: Currency | undefined,\n): {\n  dependentField: Field\n  currencies: { [field in Field]?: Currency }\n  pair?: Pair | null\n  pairState: PairState\n  currencyBalances: { [field in Field]?: CurrencyAmount }\n  parsedAmounts: { [field in Field]?: CurrencyAmount }\n  price?: Price\n  noLiquidity?: boolean\n  liquidityMinted?: TokenAmount\n  poolTokenPercentage?: Percent\n  error?: string\n} {\n  const { account, chainId } = useActiveWeb3React()\n\n  const { t } = useTranslation()\n\n  const { independentField, typedValue, otherTypedValue } = useMintState()\n\n  const dependentField = independentField === Field.CURRENCY_A ? Field.CURRENCY_B : Field.CURRENCY_A\n\n  // tokens\n  const currencies: { [field in Field]?: Currency } = useMemo(\n    () => ({\n      [Field.CURRENCY_A]: currencyA ?? undefined,\n      [Field.CURRENCY_B]: currencyB ?? undefined,\n    }),\n    [currencyA, currencyB],\n  )\n\n  // pair\n  const [pairState, pair] = usePair(currencies[Field.CURRENCY_A], currencies[Field.CURRENCY_B])\n\n  const totalSupply = useTotalSupply(pair?.liquidityToken)\n\n  const noLiquidity: boolean =\n    pairState === PairState.NOT_EXISTS || Boolean(totalSupply && JSBI.equal(totalSupply.raw, ZERO))\n\n  // balances\n  const balances = useCurrencyBalances(account ?? undefined, [\n    currencies[Field.CURRENCY_A],\n    currencies[Field.CURRENCY_B],\n  ])\n  const currencyBalances: { [field in Field]?: CurrencyAmount } = {\n    [Field.CURRENCY_A]: balances[0],\n    [Field.CURRENCY_B]: balances[1],\n  }\n\n  // amounts\n  const independentAmount: CurrencyAmount | undefined = tryParseAmount(typedValue, currencies[independentField])\n  const dependentAmount: CurrencyAmount | undefined = useMemo(() => {\n    if (noLiquidity) {\n      if (otherTypedValue && currencies[dependentField]) {\n        return tryParseAmount(otherTypedValue, currencies[dependentField])\n      }\n      return undefined\n    }\n    if (independentAmount) {\n      // we wrap the currencies just to get the price in terms of the other token\n      const wrappedIndependentAmount = wrappedCurrencyAmount(independentAmount, chainId)\n      const [tokenA, tokenB] = [wrappedCurrency(currencyA, chainId), wrappedCurrency(currencyB, chainId)]\n      if (tokenA && tokenB && wrappedIndependentAmount && pair) {\n        const dependentCurrency = dependentField === Field.CURRENCY_B ? currencyB : currencyA\n        const dependentTokenAmount =\n          dependentField === Field.CURRENCY_B\n            ? pair.priceOf(tokenA).quote(wrappedIndependentAmount)\n            : pair.priceOf(tokenB).quote(wrappedIndependentAmount)\n        return dependentCurrency === ETHER ? CurrencyAmount.ether(dependentTokenAmount.raw) : dependentTokenAmount\n      }\n      return undefined\n    }\n    return undefined\n  }, [noLiquidity, otherTypedValue, currencies, dependentField, independentAmount, currencyA, chainId, currencyB, pair])\n\n  const parsedAmounts: { [field in Field]: CurrencyAmount | undefined } = useMemo(\n    () => ({\n      [Field.CURRENCY_A]: independentField === Field.CURRENCY_A ? independentAmount : dependentAmount,\n      [Field.CURRENCY_B]: independentField === Field.CURRENCY_A ? dependentAmount : independentAmount,\n    }),\n    [dependentAmount, independentAmount, independentField],\n  )\n\n  const price = useMemo(() => {\n    if (noLiquidity) {\n      const { [Field.CURRENCY_A]: currencyAAmount, [Field.CURRENCY_B]: currencyBAmount } = parsedAmounts\n      if (currencyAAmount && currencyBAmount) {\n        return new Price(currencyAAmount.currency, currencyBAmount.currency, currencyAAmount.raw, currencyBAmount.raw)\n      }\n      return undefined\n    }\n    const wrappedCurrencyA = wrappedCurrency(currencyA, chainId)\n    return pair && wrappedCurrencyA ? pair.priceOf(wrappedCurrencyA) : undefined\n  }, [chainId, currencyA, noLiquidity, pair, parsedAmounts])\n\n  // liquidity minted\n  const liquidityMinted = useMemo(() => {\n    const { [Field.CURRENCY_A]: currencyAAmount, [Field.CURRENCY_B]: currencyBAmount } = parsedAmounts\n    const [tokenAmountA, tokenAmountB] = [\n      wrappedCurrencyAmount(currencyAAmount, chainId),\n      wrappedCurrencyAmount(currencyBAmount, chainId),\n    ]\n    if (pair && totalSupply && tokenAmountA && tokenAmountB) {\n      return pair.getLiquidityMinted(totalSupply, tokenAmountA, tokenAmountB)\n    }\n    return undefined\n  }, [parsedAmounts, chainId, pair, totalSupply])\n\n  const poolTokenPercentage = useMemo(() => {\n    if (liquidityMinted && totalSupply) {\n      return new Percent(liquidityMinted.raw, totalSupply.add(liquidityMinted).raw)\n    }\n    return undefined\n  }, [liquidityMinted, totalSupply])\n\n  let error: string | undefined\n  if (!account) {\n    error = t('Connect Wallet')\n  }\n\n  if (pairState === PairState.INVALID) {\n    error = error ?? t('Invalid pair')\n  }\n\n  if (!parsedAmounts[Field.CURRENCY_A] || !parsedAmounts[Field.CURRENCY_B]) {\n    error = error ?? t('Enter an amount')\n  }\n\n  const { [Field.CURRENCY_A]: currencyAAmount, [Field.CURRENCY_B]: currencyBAmount } = parsedAmounts\n\n  if (currencyAAmount && currencyBalances?.[Field.CURRENCY_A]?.lessThan(currencyAAmount)) {\n    error = t('Insufficient %symbol% balance', { symbol: currencies[Field.CURRENCY_A]?.symbol })\n  }\n\n  if (currencyBAmount && currencyBalances?.[Field.CURRENCY_B]?.lessThan(currencyBAmount)) {\n    error = t('Insufficient %symbol% balance', { symbol: currencies[Field.CURRENCY_B]?.symbol })\n  }\n\n  return {\n    dependentField,\n    currencies,\n    pair,\n    pairState,\n    currencyBalances,\n    parsedAmounts,\n    price,\n    noLiquidity,\n    liquidityMinted,\n    poolTokenPercentage,\n    error,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}