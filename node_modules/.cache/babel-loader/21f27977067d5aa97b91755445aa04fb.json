{"ast":null,"code":"import _toConsumableArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useState,useRef}from'react';import styled from'styled-components';import{Flex,Text}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var InputsContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  height: 36px;\\n  box-sizing: border-box;\\n  border: 1px solid #d7caec;\\n  background-color: #eeeaf4;\\n  border-radius: 16px;\\n  margin-bottom: 8px;\\n  \",\"\\n  \",\"\\n\"])),function(_ref){var isDuplicate=_ref.isDuplicate;return isDuplicate&&\"\\n    border: 1px solid #FFB237;\\n    box-shadow: 0px 0px 0px 2px #FFB237;\\n  \";},function(_ref2){var focused=_ref2.focused;return focused&&\"\\n    border: 1px solid #7645D9;\\n    box-shadow: 0px 0px 0px 2px #E4DAF7;\\n  \";});var DigitInput=styled.input(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  border: none;\\n  height: 32px;\\n  padding: 0 12px;\\n  font-size: 16px;\\n  flex: 1;\\n  width: 16px;\\n  text-align: center;\\n  min-width: 0;\\n  background-color: transparent;\\n  caret-color: #7a6faa;\\n\\n  &::placeholder {\\n    text-align: center;\\n  }\\n\\n  &:placeholder-shown {\\n    text-align: left;\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  &::-webkit-outer-spin-button,\\n  &::-webkit-inner-spin-button {\\n    /* display: none; <- Crashes Chrome on hover */\\n    -webkit-appearance: none;\\n    margin: 0; /* <-- Apparently some margin are still there even though it's hidden */\\n  }\\n\\n  -moz-appearance: textfield; /* Firefox */\\n\"])));var getIdLabel=function getIdLabel(id){if(id<10)return\"#00\".concat(id);if(id<100)return\"#0\".concat(id);return\"#\".concat(id);};var TicketContainer=function TicketContainer(_ref3){var ticket=_ref3.ticket,duplicateWith=_ref3.duplicateWith,updateTicket=_ref3.updateTicket,disabled=_ref3.disabled;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),focused=_useState2[0],setFocused=_useState2[1];var containerRef=useRef(null);var digit1=useRef(null);var digit2=useRef(null);var digit3=useRef(null);var digit4=useRef(null);var digit5=useRef(null);var digit6=useRef(null);var _useTranslation=useTranslation(),t=_useTranslation.t;var digitRefs=[digit1,digit2,digit3,digit4,digit5,digit6];var scrollInputIntoView=function scrollInputIntoView(){if(containerRef.current){containerRef.current.scrollIntoView({block:'center',behavior:'smooth'});}};var onPasteHandler=function onPasteHandler(e){e.preventDefault();var pasteContent=e.clipboardData.getData('Text');if(pasteContent.length<=6&&/^\\d+$/.test(pasteContent)){var filler=Array(6-pasteContent.length).fill('');updateTicket(ticket.id,[].concat(_toConsumableArray(pasteContent.split('')),_toConsumableArray(filler)));}};var onFocusHandler=function onFocusHandler(){scrollInputIntoView();setFocused(true);};var onBlurHandler=function onBlurHandler(){setFocused(false);};var onChangeHandler=function onChangeHandler(event,digitId){var currentKey=parseInt(event.key,10);if(['e','E','.',',','-','Unidentified'].includes(event.key)){event.preventDefault();return;}// Handling numeric inputs\nif(currentKey>=0&&currentKey<=9){event.preventDefault();var newNumbers=_toConsumableArray(ticket.numbers);newNumbers[digitId]=\"\".concat(currentKey);updateTicket(ticket.id,newNumbers);var nextDigitId=digitId+1;// if we're not on the last digit - auto-tab\nvar nextInput=digitRefs[nextDigitId];if(nextDigitId!==6&&nextInput.current){nextInput.current.focus();}}if(event.key==='Backspace'){event.preventDefault();// If some number is there - delete the number\nif(ticket.numbers[digitId]){var _newNumbers=_toConsumableArray(ticket.numbers);_newNumbers[digitId]='';updateTicket(ticket.id,_newNumbers);}else{// if the cell is empty and user presses backspace - remove previous\nvar prevDigitId=digitId-1;var _nextInput=digitRefs[prevDigitId];// prevent focusing on non-existent input\nif(prevDigitId!==-1&&_nextInput.current){_nextInput.current.focus();var _newNumbers2=_toConsumableArray(ticket.numbers);_newNumbers2[prevDigitId]='';updateTicket(ticket.id,_newNumbers2);}}}if(event.key==='Delete'){event.preventDefault();if(ticket.numbers[digitId]){var _newNumbers3=_toConsumableArray(ticket.numbers);_newNumbers3[digitId]='';updateTicket(ticket.id,_newNumbers3);}else{// if the cell is empty and user presses delete - remove next\nvar _nextDigitId=digitId+1;var _nextInput2=digitRefs[_nextDigitId];// prevent focusing on non-existent input\nif(_nextDigitId!==6&&_nextInput2.current){_nextInput2.current.focus();var _newNumbers4=_toConsumableArray(ticket.numbers);_newNumbers4[_nextDigitId]='';updateTicket(ticket.id,_newNumbers4);}}}if(event.key==='ArrowLeft'){event.preventDefault();var _prevDigitId=digitId-1;var _nextInput3=digitRefs[_prevDigitId];// prevent focusing on non-existent input\nif(_prevDigitId!==-1&&_nextInput3.current){_nextInput3.current.focus();}}if(event.key==='ArrowRight'){event.preventDefault();var _nextDigitId2=digitId+1;var _nextInput4=digitRefs[_nextDigitId2];// prevent focusing on non-existent input\nif(_nextDigitId2!==6&&_nextInput4.current){_nextInput4.current.focus();}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",color:\"textSubtle\",children:getIdLabel(ticket.id)}),/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",color:\"warning\",children:duplicateWith.length!==0&&t('Duplicate')})]}),/*#__PURE__*/_jsxs(InputsContainer,{ref:containerRef,onClick:scrollInputIntoView,focused:focused,isDuplicate:duplicateWith.length!==0,children:[/*#__PURE__*/_jsx(DigitInput,{ref:digit1,type:\"number\",value:ticket.numbers[0],onKeyDown:function onKeyDown(e){return onChangeHandler(e,0);},placeholder:\"_\",onChange:function onChange(e){return e.preventDefault();},disabled:disabled,onFocus:onFocusHandler,onBlur:onBlurHandler,onPaste:onPasteHandler,inputMode:\"numeric\"}),/*#__PURE__*/_jsx(DigitInput,{ref:digit2,type:\"number\",value:ticket.numbers[1],onKeyDown:function onKeyDown(e){return onChangeHandler(e,1);},placeholder:\"_\",onChange:function onChange(e){return e.preventDefault();},disabled:disabled,onFocus:onFocusHandler,onBlur:onBlurHandler,onPaste:onPasteHandler,inputMode:\"numeric\"}),/*#__PURE__*/_jsx(DigitInput,{ref:digit3,type:\"number\",value:ticket.numbers[2],onKeyDown:function onKeyDown(e){return onChangeHandler(e,2);},placeholder:\"_\",onChange:function onChange(e){return e.preventDefault();},disabled:disabled,onFocus:onFocusHandler,onBlur:onBlurHandler,onPaste:onPasteHandler,inputMode:\"numeric\"}),/*#__PURE__*/_jsx(DigitInput,{ref:digit4,type:\"number\",value:ticket.numbers[3],onKeyDown:function onKeyDown(e){return onChangeHandler(e,3);},placeholder:\"_\",onChange:function onChange(e){return e.preventDefault();},disabled:disabled,onFocus:onFocusHandler,onBlur:onBlurHandler,onPaste:onPasteHandler,inputMode:\"numeric\"}),/*#__PURE__*/_jsx(DigitInput,{ref:digit5,type:\"number\",value:ticket.numbers[4],onKeyDown:function onKeyDown(e){return onChangeHandler(e,4);},placeholder:\"_\",onChange:function onChange(e){return e.preventDefault();},disabled:disabled,onFocus:onFocusHandler,onBlur:onBlurHandler,onPaste:onPasteHandler,inputMode:\"numeric\"}),/*#__PURE__*/_jsx(DigitInput,{ref:digit6,type:\"number\",value:ticket.numbers[5],onKeyDown:function onKeyDown(e){return onChangeHandler(e,5);},placeholder:\"_\",onChange:function onChange(e){return e.preventDefault();},disabled:disabled,onFocus:onFocusHandler,onBlur:onBlurHandler,onPaste:onPasteHandler,inputMode:\"numeric\"})]})]});};export default TicketContainer;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Lottery/components/BuyTicketsModal/TicketInput.tsx"],"names":["React","useState","useRef","styled","Flex","Text","useTranslation","InputsContainer","div","isDuplicate","focused","DigitInput","input","getIdLabel","id","TicketContainer","ticket","duplicateWith","updateTicket","disabled","setFocused","containerRef","digit1","digit2","digit3","digit4","digit5","digit6","t","digitRefs","scrollInputIntoView","current","scrollIntoView","block","behavior","onPasteHandler","e","preventDefault","pasteContent","clipboardData","getData","length","test","filler","Array","fill","split","onFocusHandler","onBlurHandler","onChangeHandler","event","digitId","currentKey","parseInt","key","includes","newNumbers","numbers","nextDigitId","nextInput","focus","prevDigitId"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react'\nimport styled from 'styled-components'\nimport { Flex, Text } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { Ticket, UpdateTicketAction } from './useTicketsReducer'\n\nconst InputsContainer = styled.div<{ focused: boolean; isDuplicate: boolean }>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 36px;\n  box-sizing: border-box;\n  border: 1px solid #d7caec;\n  background-color: #eeeaf4;\n  border-radius: 16px;\n  margin-bottom: 8px;\n  ${({ isDuplicate }) =>\n    isDuplicate &&\n    `\n    border: 1px solid #FFB237;\n    box-shadow: 0px 0px 0px 2px #FFB237;\n  `}\n  ${({ focused }) =>\n    focused &&\n    `\n    border: 1px solid #7645D9;\n    box-shadow: 0px 0px 0px 2px #E4DAF7;\n  `}\n`\n\nconst DigitInput = styled.input`\n  border: none;\n  height: 32px;\n  padding: 0 12px;\n  font-size: 16px;\n  flex: 1;\n  width: 16px;\n  text-align: center;\n  min-width: 0;\n  background-color: transparent;\n  caret-color: #7a6faa;\n\n  &::placeholder {\n    text-align: center;\n  }\n\n  &:placeholder-shown {\n    text-align: left;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    /* display: none; <- Crashes Chrome on hover */\n    -webkit-appearance: none;\n    margin: 0; /* <-- Apparently some margin are still there even though it's hidden */\n  }\n\n  -moz-appearance: textfield; /* Firefox */\n`\n\nconst getIdLabel = (id: number): string => {\n  if (id < 10) return `#00${id}`\n  if (id < 100) return `#0${id}`\n  return `#${id}`\n}\n\nconst TicketContainer: React.FC<{\n  ticket: Ticket\n  duplicateWith: number[]\n  updateTicket: UpdateTicketAction\n  disabled: boolean\n}> = ({ ticket, duplicateWith, updateTicket, disabled }) => {\n  const [focused, setFocused] = useState(false)\n  const containerRef = useRef<HTMLDivElement>(null)\n  const digit1 = useRef<HTMLInputElement>(null)\n  const digit2 = useRef<HTMLInputElement>(null)\n  const digit3 = useRef<HTMLInputElement>(null)\n  const digit4 = useRef<HTMLInputElement>(null)\n  const digit5 = useRef<HTMLInputElement>(null)\n  const digit6 = useRef<HTMLInputElement>(null)\n\n  const { t } = useTranslation()\n\n  const digitRefs = [digit1, digit2, digit3, digit4, digit5, digit6]\n\n  const scrollInputIntoView = () => {\n    if (containerRef.current) {\n      containerRef.current.scrollIntoView({ block: 'center', behavior: 'smooth' })\n    }\n  }\n\n  const onPasteHandler = (e: React.ClipboardEvent) => {\n    e.preventDefault()\n    const pasteContent = e.clipboardData.getData('Text')\n    if (pasteContent.length <= 6 && /^\\d+$/.test(pasteContent)) {\n      const filler = Array(6 - pasteContent.length).fill('')\n      updateTicket(ticket.id, [...pasteContent.split(''), ...filler])\n    }\n  }\n\n  const onFocusHandler = () => {\n    scrollInputIntoView()\n    setFocused(true)\n  }\n\n  const onBlurHandler = () => {\n    setFocused(false)\n  }\n\n  const onChangeHandler = (event: React.KeyboardEvent, digitId: number) => {\n    const currentKey = parseInt(event.key, 10)\n\n    if (['e', 'E', '.', ',', '-', 'Unidentified'].includes(event.key)) {\n      event.preventDefault()\n      return\n    }\n\n    // Handling numeric inputs\n    if (currentKey >= 0 && currentKey <= 9) {\n      event.preventDefault()\n      const newNumbers = [...ticket.numbers]\n      newNumbers[digitId] = `${currentKey}`\n      updateTicket(ticket.id, newNumbers)\n      const nextDigitId = digitId + 1\n      // if we're not on the last digit - auto-tab\n      const nextInput = digitRefs[nextDigitId]\n      if (nextDigitId !== 6 && nextInput.current) {\n        nextInput.current.focus()\n      }\n    }\n\n    if (event.key === 'Backspace') {\n      event.preventDefault()\n      // If some number is there - delete the number\n      if (ticket.numbers[digitId]) {\n        const newNumbers = [...ticket.numbers]\n        newNumbers[digitId] = ''\n        updateTicket(ticket.id, newNumbers)\n      } else {\n        // if the cell is empty and user presses backspace - remove previous\n        const prevDigitId = digitId - 1\n        const nextInput = digitRefs[prevDigitId]\n        // prevent focusing on non-existent input\n        if (prevDigitId !== -1 && nextInput.current) {\n          nextInput.current.focus()\n          const newNumbers = [...ticket.numbers]\n          newNumbers[prevDigitId] = ''\n          updateTicket(ticket.id, newNumbers)\n        }\n      }\n    }\n\n    if (event.key === 'Delete') {\n      event.preventDefault()\n      if (ticket.numbers[digitId]) {\n        const newNumbers = [...ticket.numbers]\n        newNumbers[digitId] = ''\n        updateTicket(ticket.id, newNumbers)\n      } else {\n        // if the cell is empty and user presses delete - remove next\n        const nextDigitId = digitId + 1\n        const nextInput = digitRefs[nextDigitId]\n        // prevent focusing on non-existent input\n        if (nextDigitId !== 6 && nextInput.current) {\n          nextInput.current.focus()\n          const newNumbers = [...ticket.numbers]\n          newNumbers[nextDigitId] = ''\n          updateTicket(ticket.id, newNumbers)\n        }\n      }\n    }\n\n    if (event.key === 'ArrowLeft') {\n      event.preventDefault()\n      const prevDigitId = digitId - 1\n      const nextInput = digitRefs[prevDigitId]\n      // prevent focusing on non-existent input\n      if (prevDigitId !== -1 && nextInput.current) {\n        nextInput.current.focus()\n      }\n    }\n\n    if (event.key === 'ArrowRight') {\n      event.preventDefault()\n      const nextDigitId = digitId + 1\n      const nextInput = digitRefs[nextDigitId]\n      // prevent focusing on non-existent input\n      if (nextDigitId !== 6 && nextInput.current) {\n        nextInput.current.focus()\n      }\n    }\n  }\n  return (\n    <>\n      <Flex justifyContent=\"space-between\">\n        <Text fontSize=\"12px\" color=\"textSubtle\">\n          {getIdLabel(ticket.id)}\n        </Text>\n        <Text fontSize=\"12px\" color=\"warning\">\n          {duplicateWith.length !== 0 && t('Duplicate')}\n        </Text>\n      </Flex>\n      <InputsContainer\n        ref={containerRef}\n        onClick={scrollInputIntoView}\n        focused={focused}\n        isDuplicate={duplicateWith.length !== 0}\n      >\n        <DigitInput\n          ref={digit1}\n          type=\"number\"\n          value={ticket.numbers[0]}\n          onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 0)}\n          placeholder=\"_\"\n          onChange={(e) => e.preventDefault()}\n          disabled={disabled}\n          onFocus={onFocusHandler}\n          onBlur={onBlurHandler}\n          onPaste={onPasteHandler}\n          inputMode=\"numeric\"\n        />\n        <DigitInput\n          ref={digit2}\n          type=\"number\"\n          value={ticket.numbers[1]}\n          onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 1)}\n          placeholder=\"_\"\n          onChange={(e) => e.preventDefault()}\n          disabled={disabled}\n          onFocus={onFocusHandler}\n          onBlur={onBlurHandler}\n          onPaste={onPasteHandler}\n          inputMode=\"numeric\"\n        />\n        <DigitInput\n          ref={digit3}\n          type=\"number\"\n          value={ticket.numbers[2]}\n          onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 2)}\n          placeholder=\"_\"\n          onChange={(e) => e.preventDefault()}\n          disabled={disabled}\n          onFocus={onFocusHandler}\n          onBlur={onBlurHandler}\n          onPaste={onPasteHandler}\n          inputMode=\"numeric\"\n        />\n        <DigitInput\n          ref={digit4}\n          type=\"number\"\n          value={ticket.numbers[3]}\n          onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 3)}\n          placeholder=\"_\"\n          onChange={(e) => e.preventDefault()}\n          disabled={disabled}\n          onFocus={onFocusHandler}\n          onBlur={onBlurHandler}\n          onPaste={onPasteHandler}\n          inputMode=\"numeric\"\n        />\n        <DigitInput\n          ref={digit5}\n          type=\"number\"\n          value={ticket.numbers[4]}\n          onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 4)}\n          placeholder=\"_\"\n          onChange={(e) => e.preventDefault()}\n          disabled={disabled}\n          onFocus={onFocusHandler}\n          onBlur={onBlurHandler}\n          onPaste={onPasteHandler}\n          inputMode=\"numeric\"\n        />\n        <DigitInput\n          ref={digit6}\n          type=\"number\"\n          value={ticket.numbers[5]}\n          onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 5)}\n          placeholder=\"_\"\n          onChange={(e) => e.preventDefault()}\n          disabled={disabled}\n          onFocus={onFocusHandler}\n          onBlur={onBlurHandler}\n          onPaste={onPasteHandler}\n          inputMode=\"numeric\"\n        />\n      </InputsContainer>\n    </>\n  )\n}\n\nexport default TicketContainer\n"]},"metadata":{},"sourceType":"module"}