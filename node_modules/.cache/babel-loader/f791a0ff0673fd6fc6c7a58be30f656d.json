{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;/* eslint-disable no-nested-ternary */import React,{useEffect,useMemo}from'react';import{Link}from'react-router-dom';import styled from'styled-components';import{Text,Box,Heading,Button,Card,Flex,Breadcrumbs,Link as UIKitLink,LinkExternal,Spinner,Image,useMatchBreakpoints}from'@pancakeswap/uikit';import Page from'components/Layout/Page';import{getBscScanLink}from'utils';import truncateHash from'utils/truncateHash';import useCMCLink from'views/Info/hooks/useCMCLink';import{CurrencyLogo}from'views/Info/components/CurrencyLogo';import{formatAmount}from'views/Info/utils/formatInfoNumbers';import Percent from'views/Info/components/Percent';import SaveIcon from'views/Info/components/SaveIcon';import{usePoolDatas,useTokenData,usePoolsForToken,useTokenChartData,useTokenPriceData,useTokenTransactions}from'state/info/hooks';import PoolTable from'views/Info/components/InfoTables/PoolsTable';import TransactionTable from'views/Info/components/InfoTables/TransactionsTable';import{useWatchlistTokens}from'state/user/hooks';import{ONE_HOUR_SECONDS}from'config/constants/info';import{useTranslation}from'contexts/Localization';import ChartCard from'views/Info/components/InfoCharts/ChartCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ContentLayout=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin-top: 16px;\\n  display: grid;\\n  grid-template-columns: 260px 1fr;\\n  grid-gap: 1em;\\n  @media screen and (max-width: 800px) {\\n    grid-template-columns: 1fr;\\n    grid-template-rows: 1fr 1fr;\\n  }\\n\"])));var StyledCMCLink=styled(UIKitLink)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 24px;\\n  height: 24px;\\n  margin-right: 8px;\\n\\n  & :hover {\\n    opacity: 0.8;\\n  }\\n\"])));var DEFAULT_TIME_WINDOW={weeks:1};var TokenPage=function TokenPage(_ref){var routeAddress=_ref.match.params.address;var _useMatchBreakpoints=useMatchBreakpoints(),isXs=_useMatchBreakpoints.isXs,isSm=_useMatchBreakpoints.isSm;var _useTranslation=useTranslation(),t=_useTranslation.t;// Needed to scroll up if user comes to this page by clicking on entry in the table\nuseEffect(function(){window.scrollTo(0,0);},[]);// In case somebody pastes checksummed address into url (since GraphQL expects lowercase address)\nvar address=routeAddress.toLowerCase();var cmcLink=useCMCLink(address);var tokenData=useTokenData(address);var poolsForToken=usePoolsForToken(address);var poolDatas=usePoolDatas(poolsForToken!==null&&poolsForToken!==void 0?poolsForToken:[]);var transactions=useTokenTransactions(address);var chartData=useTokenChartData(address);// pricing data\nvar priceData=useTokenPriceData(address,ONE_HOUR_SECONDS,DEFAULT_TIME_WINDOW);var adjustedPriceData=useMemo(function(){// Include latest available price\nif(priceData&&tokenData&&priceData.length>0){return[].concat(_toConsumableArray(priceData),[{time:new Date().getTime()/1000,open:priceData[priceData.length-1].close,close:tokenData===null||tokenData===void 0?void 0:tokenData.priceUSD,high:tokenData===null||tokenData===void 0?void 0:tokenData.priceUSD,low:priceData[priceData.length-1].close}]);}return undefined;},[priceData,tokenData]);var _useWatchlistTokens=useWatchlistTokens(),_useWatchlistTokens2=_slicedToArray(_useWatchlistTokens,2),watchlistTokens=_useWatchlistTokens2[0],addWatchlistToken=_useWatchlistTokens2[1];return/*#__PURE__*/_jsx(Page,{symbol:tokenData===null||tokenData===void 0?void 0:tokenData.symbol,children:tokenData?!tokenData.exists?/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Box,{p:\"16px\",children:/*#__PURE__*/_jsxs(Text,{children:[t('No pool has been created with this token yet. Create one'),/*#__PURE__*/_jsx(Link,{style:{display:'inline',marginLeft:'6px'},to:\"/add/\".concat(address),children:t('here.')})]})})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",mb:\"24px\",flexDirection:['column','column','row'],children:[/*#__PURE__*/_jsxs(Breadcrumbs,{mb:\"32px\",children:[/*#__PURE__*/_jsx(Link,{to:\"/info\",children:/*#__PURE__*/_jsx(Text,{color:\"primary\",children:t('Info')})}),/*#__PURE__*/_jsx(Link,{to:\"/info/tokens\",children:/*#__PURE__*/_jsx(Text,{color:\"primary\",children:t('Tokens')})}),/*#__PURE__*/_jsxs(Flex,{children:[/*#__PURE__*/_jsx(Text,{mr:\"8px\",children:tokenData.symbol}),/*#__PURE__*/_jsx(Text,{children:\"(\".concat(truncateHash(address),\")\")})]})]}),/*#__PURE__*/_jsxs(Flex,{justifyContent:[null,null,'flex-end'],mt:['8px','8px',0],children:[/*#__PURE__*/_jsx(LinkExternal,{mr:\"8px\",color:\"primary\",href:getBscScanLink(address,'address'),children:t('View on BscScan')}),cmcLink&&/*#__PURE__*/_jsx(StyledCMCLink,{href:cmcLink,rel:\"noopener noreferrer nofollow\",target:\"_blank\",children:/*#__PURE__*/_jsx(Image,{src:\"/images/CMC-logo.svg\",height:22,width:22,alt:t('View token on CoinMarketCap')})}),/*#__PURE__*/_jsx(SaveIcon,{fill:watchlistTokens.includes(address),onClick:function onClick(){return addWatchlistToken(address);}})]})]}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",flexDirection:['column','column','column','row'],children:[/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",mb:['8px',null],children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(CurrencyLogo,{size:\"32px\",address:address}),/*#__PURE__*/_jsx(Text,{ml:\"12px\",bold:true,lineHeight:\"0.7\",fontSize:isXs||isSm?'24px':'40px',id:\"info-token-name-title\",children:tokenData.name}),/*#__PURE__*/_jsxs(Text,{ml:\"12px\",lineHeight:\"1\",color:\"textSubtle\",fontSize:isXs||isSm?'14px':'20px',children:[\"(\",tokenData.symbol,\")\"]})]}),/*#__PURE__*/_jsxs(Flex,{mt:\"8px\",ml:\"46px\",alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Text,{mr:\"16px\",bold:true,fontSize:\"24px\",children:[\"$\",formatAmount(tokenData.priceUSD,{notation:'standard'})]}),/*#__PURE__*/_jsx(Percent,{value:tokenData.priceUSDChange,fontWeight:600})]})]}),/*#__PURE__*/_jsxs(Flex,{children:[/*#__PURE__*/_jsx(Link,{to:\"/add/\".concat(address),children:/*#__PURE__*/_jsx(Button,{mr:\"8px\",variant:\"secondary\",children:t('Add Liquidity')})}),/*#__PURE__*/_jsx(Link,{to:\"/swap?inputCurrency=\".concat(address),children:/*#__PURE__*/_jsx(Button,{children:t('Trade')})})]})]}),/*#__PURE__*/_jsxs(ContentLayout,{children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Box,{p:\"24px\",children:[/*#__PURE__*/_jsx(Text,{bold:true,small:true,color:\"secondary\",fontSize:\"12px\",textTransform:\"uppercase\",children:t('Liquidity')}),/*#__PURE__*/_jsxs(Text,{bold:true,fontSize:\"24px\",children:[\"$\",formatAmount(tokenData.liquidityUSD)]}),/*#__PURE__*/_jsx(Percent,{value:tokenData.liquidityUSDChange}),/*#__PURE__*/_jsx(Text,{mt:\"24px\",bold:true,color:\"secondary\",fontSize:\"12px\",textTransform:\"uppercase\",children:t('Volume 24H')}),/*#__PURE__*/_jsxs(Text,{bold:true,fontSize:\"24px\",textTransform:\"uppercase\",children:[\"$\",formatAmount(tokenData.volumeUSD)]}),/*#__PURE__*/_jsx(Percent,{value:tokenData.volumeUSDChange}),/*#__PURE__*/_jsx(Text,{mt:\"24px\",bold:true,color:\"secondary\",fontSize:\"12px\",textTransform:\"uppercase\",children:t('Volume 7D')}),/*#__PURE__*/_jsxs(Text,{bold:true,fontSize:\"24px\",children:[\"$\",formatAmount(tokenData.volumeUSDWeek)]}),/*#__PURE__*/_jsx(Text,{mt:\"24px\",bold:true,color:\"secondary\",fontSize:\"12px\",textTransform:\"uppercase\",children:t('Transactions 24H')}),/*#__PURE__*/_jsx(Text,{bold:true,fontSize:\"24px\",children:formatAmount(tokenData.txCount,{isInteger:true})})]})}),/*#__PURE__*/_jsx(ChartCard,{variant:\"token\",chartData:chartData,tokenData:tokenData,tokenPriceData:adjustedPriceData})]}),/*#__PURE__*/_jsx(Heading,{scale:\"lg\",mb:\"16px\",mt:\"40px\",children:t('Pools')}),/*#__PURE__*/_jsx(PoolTable,{poolDatas:poolDatas}),/*#__PURE__*/_jsx(Heading,{scale:\"lg\",mb:\"16px\",mt:\"40px\",children:t('Transactions')}),/*#__PURE__*/_jsx(TransactionTable,{transactions:transactions})]}):/*#__PURE__*/_jsx(Flex,{mt:\"80px\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Spinner,{})})});};export default TokenPage;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Info/Tokens/TokenPage.tsx"],"names":["React","useEffect","useMemo","Link","styled","Text","Box","Heading","Button","Card","Flex","Breadcrumbs","UIKitLink","LinkExternal","Spinner","Image","useMatchBreakpoints","Page","getBscScanLink","truncateHash","useCMCLink","CurrencyLogo","formatAmount","Percent","SaveIcon","usePoolDatas","useTokenData","usePoolsForToken","useTokenChartData","useTokenPriceData","useTokenTransactions","PoolTable","TransactionTable","useWatchlistTokens","ONE_HOUR_SECONDS","useTranslation","ChartCard","ContentLayout","div","StyledCMCLink","DEFAULT_TIME_WINDOW","weeks","TokenPage","routeAddress","match","params","address","isXs","isSm","t","window","scrollTo","toLowerCase","cmcLink","tokenData","poolsForToken","poolDatas","transactions","chartData","priceData","adjustedPriceData","length","time","Date","getTime","open","close","priceUSD","high","low","undefined","watchlistTokens","addWatchlistToken","symbol","exists","display","marginLeft","includes","name","notation","priceUSDChange","liquidityUSD","liquidityUSDChange","volumeUSD","volumeUSDChange","volumeUSDWeek","txCount","isInteger"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\nimport React, { useEffect, useMemo } from 'react'\nimport { RouteComponentProps, Link } from 'react-router-dom'\nimport { Duration } from 'date-fns'\nimport styled from 'styled-components'\nimport {\n  Text,\n  Box,\n  Heading,\n  Button,\n  Card,\n  Flex,\n  Breadcrumbs,\n  Link as UIKitLink,\n  LinkExternal,\n  Spinner,\n  Image,\n  useMatchBreakpoints,\n} from '@pancakeswap/uikit'\nimport Page from 'components/Layout/Page'\nimport { getBscScanLink } from 'utils'\nimport truncateHash from 'utils/truncateHash'\nimport useCMCLink from 'views/Info/hooks/useCMCLink'\nimport { CurrencyLogo } from 'views/Info/components/CurrencyLogo'\nimport { formatAmount } from 'views/Info/utils/formatInfoNumbers'\nimport Percent from 'views/Info/components/Percent'\nimport SaveIcon from 'views/Info/components/SaveIcon'\nimport {\n  usePoolDatas,\n  useTokenData,\n  usePoolsForToken,\n  useTokenChartData,\n  useTokenPriceData,\n  useTokenTransactions,\n} from 'state/info/hooks'\nimport PoolTable from 'views/Info/components/InfoTables/PoolsTable'\nimport TransactionTable from 'views/Info/components/InfoTables/TransactionsTable'\nimport { useWatchlistTokens } from 'state/user/hooks'\nimport { ONE_HOUR_SECONDS } from 'config/constants/info'\nimport { useTranslation } from 'contexts/Localization'\nimport ChartCard from 'views/Info/components/InfoCharts/ChartCard'\n\nconst ContentLayout = styled.div`\n  margin-top: 16px;\n  display: grid;\n  grid-template-columns: 260px 1fr;\n  grid-gap: 1em;\n  @media screen and (max-width: 800px) {\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n  }\n`\n\nconst StyledCMCLink = styled(UIKitLink)`\n  width: 24px;\n  height: 24px;\n  margin-right: 8px;\n\n  & :hover {\n    opacity: 0.8;\n  }\n`\nconst DEFAULT_TIME_WINDOW: Duration = { weeks: 1 }\n\nconst TokenPage: React.FC<RouteComponentProps<{ address: string }>> = ({\n  match: {\n    params: { address: routeAddress },\n  },\n}) => {\n  const { isXs, isSm } = useMatchBreakpoints()\n  const { t } = useTranslation()\n\n  // Needed to scroll up if user comes to this page by clicking on entry in the table\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [])\n\n  // In case somebody pastes checksummed address into url (since GraphQL expects lowercase address)\n  const address = routeAddress.toLowerCase()\n\n  const cmcLink = useCMCLink(address)\n\n  const tokenData = useTokenData(address)\n  const poolsForToken = usePoolsForToken(address)\n  const poolDatas = usePoolDatas(poolsForToken ?? [])\n  const transactions = useTokenTransactions(address)\n  const chartData = useTokenChartData(address)\n\n  // pricing data\n  const priceData = useTokenPriceData(address, ONE_HOUR_SECONDS, DEFAULT_TIME_WINDOW)\n  const adjustedPriceData = useMemo(() => {\n    // Include latest available price\n    if (priceData && tokenData && priceData.length > 0) {\n      return [\n        ...priceData,\n        {\n          time: new Date().getTime() / 1000,\n          open: priceData[priceData.length - 1].close,\n          close: tokenData?.priceUSD,\n          high: tokenData?.priceUSD,\n          low: priceData[priceData.length - 1].close,\n        },\n      ]\n    }\n    return undefined\n  }, [priceData, tokenData])\n\n  const [watchlistTokens, addWatchlistToken] = useWatchlistTokens()\n\n  return (\n    <Page symbol={tokenData?.symbol}>\n      {tokenData ? (\n        !tokenData.exists ? (\n          <Card>\n            <Box p=\"16px\">\n              <Text>\n                {t('No pool has been created with this token yet. Create one')}\n                <Link style={{ display: 'inline', marginLeft: '6px' }} to={`/add/${address}`}>\n                  {t('here.')}\n                </Link>\n              </Text>\n            </Box>\n          </Card>\n        ) : (\n          <>\n            {/* Stuff on top */}\n            <Flex justifyContent=\"space-between\" mb=\"24px\" flexDirection={['column', 'column', 'row']}>\n              <Breadcrumbs mb=\"32px\">\n                <Link to=\"/info\">\n                  <Text color=\"primary\">{t('Info')}</Text>\n                </Link>\n                <Link to=\"/info/tokens\">\n                  <Text color=\"primary\">{t('Tokens')}</Text>\n                </Link>\n                <Flex>\n                  <Text mr=\"8px\">{tokenData.symbol}</Text>\n                  <Text>{`(${truncateHash(address)})`}</Text>\n                </Flex>\n              </Breadcrumbs>\n              <Flex justifyContent={[null, null, 'flex-end']} mt={['8px', '8px', 0]}>\n                <LinkExternal mr=\"8px\" color=\"primary\" href={getBscScanLink(address, 'address')}>\n                  {t('View on BscScan')}\n                </LinkExternal>\n                {cmcLink && (\n                  <StyledCMCLink href={cmcLink} rel=\"noopener noreferrer nofollow\" target=\"_blank\">\n                    <Image src=\"/images/CMC-logo.svg\" height={22} width={22} alt={t('View token on CoinMarketCap')} />\n                  </StyledCMCLink>\n                )}\n                <SaveIcon fill={watchlistTokens.includes(address)} onClick={() => addWatchlistToken(address)} />\n              </Flex>\n            </Flex>\n            <Flex justifyContent=\"space-between\" flexDirection={['column', 'column', 'column', 'row']}>\n              <Flex flexDirection=\"column\" mb={['8px', null]}>\n                <Flex alignItems=\"center\">\n                  <CurrencyLogo size=\"32px\" address={address} />\n                  <Text\n                    ml=\"12px\"\n                    bold\n                    lineHeight=\"0.7\"\n                    fontSize={isXs || isSm ? '24px' : '40px'}\n                    id=\"info-token-name-title\"\n                  >\n                    {tokenData.name}\n                  </Text>\n                  <Text ml=\"12px\" lineHeight=\"1\" color=\"textSubtle\" fontSize={isXs || isSm ? '14px' : '20px'}>\n                    ({tokenData.symbol})\n                  </Text>\n                </Flex>\n                <Flex mt=\"8px\" ml=\"46px\" alignItems=\"center\">\n                  <Text mr=\"16px\" bold fontSize=\"24px\">\n                    ${formatAmount(tokenData.priceUSD, { notation: 'standard' })}\n                  </Text>\n                  <Percent value={tokenData.priceUSDChange} fontWeight={600} />\n                </Flex>\n              </Flex>\n              <Flex>\n                <Link to={`/add/${address}`}>\n                  <Button mr=\"8px\" variant=\"secondary\">\n                    {t('Add Liquidity')}\n                  </Button>\n                </Link>\n                <Link to={`/swap?inputCurrency=${address}`}>\n                  <Button>{t('Trade')}</Button>\n                </Link>\n              </Flex>\n            </Flex>\n\n            {/* data on the right side of chart */}\n            <ContentLayout>\n              <Card>\n                <Box p=\"24px\">\n                  <Text bold small color=\"secondary\" fontSize=\"12px\" textTransform=\"uppercase\">\n                    {t('Liquidity')}\n                  </Text>\n                  <Text bold fontSize=\"24px\">\n                    ${formatAmount(tokenData.liquidityUSD)}\n                  </Text>\n                  <Percent value={tokenData.liquidityUSDChange} />\n\n                  <Text mt=\"24px\" bold color=\"secondary\" fontSize=\"12px\" textTransform=\"uppercase\">\n                    {t('Volume 24H')}\n                  </Text>\n                  <Text bold fontSize=\"24px\" textTransform=\"uppercase\">\n                    ${formatAmount(tokenData.volumeUSD)}\n                  </Text>\n                  <Percent value={tokenData.volumeUSDChange} />\n\n                  <Text mt=\"24px\" bold color=\"secondary\" fontSize=\"12px\" textTransform=\"uppercase\">\n                    {t('Volume 7D')}\n                  </Text>\n                  <Text bold fontSize=\"24px\">\n                    ${formatAmount(tokenData.volumeUSDWeek)}\n                  </Text>\n\n                  <Text mt=\"24px\" bold color=\"secondary\" fontSize=\"12px\" textTransform=\"uppercase\">\n                    {t('Transactions 24H')}\n                  </Text>\n                  <Text bold fontSize=\"24px\">\n                    {formatAmount(tokenData.txCount, { isInteger: true })}\n                  </Text>\n                </Box>\n              </Card>\n              {/* charts card */}\n              <ChartCard\n                variant=\"token\"\n                chartData={chartData}\n                tokenData={tokenData}\n                tokenPriceData={adjustedPriceData}\n              />\n            </ContentLayout>\n\n            {/* pools and transaction tables */}\n            <Heading scale=\"lg\" mb=\"16px\" mt=\"40px\">\n              {t('Pools')}\n            </Heading>\n\n            <PoolTable poolDatas={poolDatas} />\n\n            <Heading scale=\"lg\" mb=\"16px\" mt=\"40px\">\n              {t('Transactions')}\n            </Heading>\n\n            <TransactionTable transactions={transactions} />\n          </>\n        )\n      ) : (\n        <Flex mt=\"80px\" justifyContent=\"center\">\n          <Spinner />\n        </Flex>\n      )}\n    </Page>\n  )\n}\n\nexport default TokenPage\n"]},"metadata":{},"sourceType":"module"}