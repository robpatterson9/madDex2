{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useState,useCallback}from'react';import styled from'styled-components';import{Button,Text,Link,Flex,Checkbox,Message}from'@pancakeswap/uikit';import Card from'components/Card';import{AutoColumn}from'components/Layout/Column';import{RowBetween,RowFixed}from'components/Layout/Row';import useTheme from'hooks/useTheme';import{ListLogo}from'components/Logo';import{useDispatch}from'react-redux';import useFetchListCallback from'hooks/useFetchListCallback';import{removeList,enableList}from'state/lists/actions';import{useAllLists}from'state/lists/hooks';import{useTranslation}from'contexts/Localization';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: relative;\\n  width: 100%;\\n\"])));var TextDot=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  height: 3px;\\n  width: 3px;\\n  background-color: \",\";\\n  border-radius: 50%;\\n\"])),function(_ref){var theme=_ref.theme;return theme.colors.text;});function ImportList(_ref2){var _lists$listURL;var listURL=_ref2.listURL,list=_ref2.list,onImport=_ref2.onImport;var _useTheme=useTheme(),theme=_useTheme.theme;var dispatch=useDispatch();var _useTranslation=useTranslation(),t=_useTranslation.t;// user must accept\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),confirmed=_useState2[0],setConfirmed=_useState2[1];var lists=useAllLists();var fetchList=useFetchListCallback();// monitor is list is loading\nvar adding=Boolean((_lists$listURL=lists[listURL])===null||_lists$listURL===void 0?void 0:_lists$listURL.loadingRequestId);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),addError=_useState4[0],setAddError=_useState4[1];var handleAddList=useCallback(function(){if(adding)return;setAddError(null);fetchList(listURL).then(function(){dispatch(enableList(listURL));onImport();}).catch(function(error){setAddError(error.message);dispatch(removeList(listURL));});},[adding,dispatch,fetchList,listURL,onImport]);return/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(Card,{padding:\"12px 20px\",children:/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsxs(RowFixed,{children:[list.logoURI&&/*#__PURE__*/_jsx(ListLogo,{logoURI:list.logoURI,size:\"40px\"}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",style:{marginLeft:'20px'},children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(Text,{bold:true,mr:\"6px\",children:list.name}),/*#__PURE__*/_jsx(TextDot,{}),/*#__PURE__*/_jsxs(Text,{small:true,color:\"textSubtle\",ml:\"6px\",children:[list.tokens.length,\" tokens\"]})]}),/*#__PURE__*/_jsx(Link,{small:true,external:true,ellipsis:true,maxWidth:\"90%\",href:\"https://tokenlists.org/token-list?url=\".concat(listURL),children:listURL})]})]})})}),/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"20px\",textAlign:\"center\",color:theme.colors.failure,mb:\"16px\",children:t('Import at your own risk')}),/*#__PURE__*/_jsx(Text,{color:theme.colors.failure,mb:\"8px\",children:t('By adding this list you are implicitly trusting that the data is correct. Anyone can create a list, including creating fake versions of existing lists and lists that claim to represent projects that do not have one.')}),/*#__PURE__*/_jsx(Text,{bold:true,color:theme.colors.failure,mb:\"16px\",children:typeof'If you purchase a token from this list, you may not be able to sell it back.'}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Checkbox,{name:\"confirmed\",type:\"checkbox\",checked:confirmed,onChange:function onChange(){return setConfirmed(!confirmed);},scale:\"sm\"}),/*#__PURE__*/_jsx(Text,{ml:\"10px\",style:{userSelect:'none'},children:t('I understand')})]})]})}),/*#__PURE__*/_jsx(Button,{disabled:!confirmed,onClick:handleAddList,children:t('Import')}),addError?/*#__PURE__*/_jsx(Text,{color:\"failure\",style:{textOverflow:'ellipsis',overflow:'hidden'},children:addError}):null]})})});}export default ImportList;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/components/SearchModal/ImportList.tsx"],"names":["React","useState","useCallback","styled","Button","Text","Link","Flex","Checkbox","Message","Card","AutoColumn","RowBetween","RowFixed","useTheme","ListLogo","useDispatch","useFetchListCallback","removeList","enableList","useAllLists","useTranslation","Wrapper","div","TextDot","theme","colors","text","ImportList","listURL","list","onImport","dispatch","t","confirmed","setConfirmed","lists","fetchList","adding","Boolean","loadingRequestId","addError","setAddError","handleAddList","then","catch","error","message","logoURI","marginLeft","name","tokens","length","failure","userSelect","textOverflow","overflow"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react'\nimport styled from 'styled-components'\nimport { Button, Text, Link, Flex, Checkbox, Message } from '@pancakeswap/uikit'\nimport Card from 'components/Card'\nimport { AutoColumn } from 'components/Layout/Column'\nimport { RowBetween, RowFixed } from 'components/Layout/Row'\nimport useTheme from 'hooks/useTheme'\nimport { ListLogo } from 'components/Logo'\nimport { TokenList } from '@uniswap/token-lists'\nimport { useDispatch } from 'react-redux'\nimport { AppDispatch } from 'state'\nimport useFetchListCallback from 'hooks/useFetchListCallback'\nimport { removeList, enableList } from 'state/lists/actions'\nimport { useAllLists } from 'state/lists/hooks'\nimport { useTranslation } from 'contexts/Localization'\n\ninterface ImportProps {\n  listURL: string\n  list: TokenList\n  onImport: () => void\n}\n\nconst Wrapper = styled.div`\n  position: relative;\n  width: 100%;\n`\n\nconst TextDot = styled.div`\n  height: 3px;\n  width: 3px;\n  background-color: ${({ theme }) => theme.colors.text};\n  border-radius: 50%;\n`\n\nfunction ImportList({ listURL, list, onImport }: ImportProps) {\n  const { theme } = useTheme()\n  const dispatch = useDispatch<AppDispatch>()\n\n  const { t } = useTranslation()\n\n  // user must accept\n  const [confirmed, setConfirmed] = useState(false)\n\n  const lists = useAllLists()\n  const fetchList = useFetchListCallback()\n\n  // monitor is list is loading\n  const adding = Boolean(lists[listURL]?.loadingRequestId)\n  const [addError, setAddError] = useState<string | null>(null)\n\n  const handleAddList = useCallback(() => {\n    if (adding) return\n    setAddError(null)\n    fetchList(listURL)\n      .then(() => {\n        dispatch(enableList(listURL))\n        onImport()\n      })\n      .catch((error) => {\n        setAddError(error.message)\n        dispatch(removeList(listURL))\n      })\n  }, [adding, dispatch, fetchList, listURL, onImport])\n\n  return (\n    <Wrapper>\n      <AutoColumn gap=\"md\">\n        <AutoColumn gap=\"md\">\n          <Card padding=\"12px 20px\">\n            <RowBetween>\n              <RowFixed>\n                {list.logoURI && <ListLogo logoURI={list.logoURI} size=\"40px\" />}\n                <AutoColumn gap=\"sm\" style={{ marginLeft: '20px' }}>\n                  <RowFixed>\n                    <Text bold mr=\"6px\">\n                      {list.name}\n                    </Text>\n                    <TextDot />\n                    <Text small color=\"textSubtle\" ml=\"6px\">\n                      {list.tokens.length} tokens\n                    </Text>\n                  </RowFixed>\n                  <Link\n                    small\n                    external\n                    ellipsis\n                    maxWidth=\"90%\"\n                    href={`https://tokenlists.org/token-list?url=${listURL}`}\n                  >\n                    {listURL}\n                  </Link>\n                </AutoColumn>\n              </RowFixed>\n            </RowBetween>\n          </Card>\n\n          <Message variant=\"danger\">\n            <Flex flexDirection=\"column\">\n              <Text fontSize=\"20px\" textAlign=\"center\" color={theme.colors.failure} mb=\"16px\">\n                {t('Import at your own risk')}\n              </Text>\n              <Text color={theme.colors.failure} mb=\"8px\">\n                {t(\n                  'By adding this list you are implicitly trusting that the data is correct. Anyone can create a list, including creating fake versions of existing lists and lists that claim to represent projects that do not have one.',\n                )}\n              </Text>\n              <Text bold color={theme.colors.failure} mb=\"16px\">\n                {typeof 'If you purchase a token from this list, you may not be able to sell it back.'}\n              </Text>\n              <Flex alignItems=\"center\">\n                <Checkbox\n                  name=\"confirmed\"\n                  type=\"checkbox\"\n                  checked={confirmed}\n                  onChange={() => setConfirmed(!confirmed)}\n                  scale=\"sm\"\n                />\n                <Text ml=\"10px\" style={{ userSelect: 'none' }}>\n                  {t('I understand')}\n                </Text>\n              </Flex>\n            </Flex>\n          </Message>\n\n          <Button disabled={!confirmed} onClick={handleAddList}>\n            {t('Import')}\n          </Button>\n          {addError ? (\n            <Text color=\"failure\" style={{ textOverflow: 'ellipsis', overflow: 'hidden' }}>\n              {addError}\n            </Text>\n          ) : null}\n        </AutoColumn>\n      </AutoColumn>\n    </Wrapper>\n  )\n}\n\nexport default ImportList\n"]},"metadata":{},"sourceType":"module"}