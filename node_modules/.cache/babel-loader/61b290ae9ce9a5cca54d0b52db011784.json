{"ast":null,"code":"import _toConsumableArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useEffect,useMemo,useRef,useState}from'react';import{useLocation}from'react-router-dom';import styled from'styled-components';import{ethers}from'ethers';import{formatUnits}from'ethers/lib/utils';import BigNumber from'bignumber.js';import{useWeb3React}from'@web3-react/core';import{Heading,Flex,Image,Text}from'@pancakeswap/uikit';import orderBy from'lodash/orderBy';import partition from'lodash/partition';import{useTranslation}from'contexts/Localization';import useIntersectionObserver from'hooks/useIntersectionObserver';import{useFetchPublicPoolsData,usePools,useFetchUserPools,useFetchCakeVault,useCakeVault}from'state/pools/hooks';import{usePollFarmsPublicData}from'state/farms/hooks';import{latinise}from'utils/latinise';import FlexLayout from'components/Layout/Flex';import Page from'components/Layout/Page';import PageHeader from'components/PageHeader';import SearchInput from'components/SearchInput';import Select from'components/Select/Select';import{useUserPoolStakedOnly,useUserPoolsViewMode}from'state/user/hooks';import{ViewMode}from'state/user/actions';import Loading from'components/Loading';import PoolCard from'./components/PoolCard';import CakeVaultCard from'./components/CakeVaultCard';import PoolTabButtons from'./components/PoolTabButtons';import BountyCard from'./components/BountyCard';import HelpButton from'./components/HelpButton';import PoolsTable from'./components/PoolsTable/PoolsTable';import{getAprData,getCakeVaultEarnings}from'./helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CardLayout=styled(FlexLayout)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  justify-content: center;\\n\"])));var PoolControls=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 100%;\\n  align-items: center;\\n  position: relative;\\n\\n  justify-content: space-between;\\n  flex-direction: column;\\n  margin-bottom: 32px;\\n\\n  \",\" {\\n    flex-direction: row;\\n    flex-wrap: wrap;\\n    padding: 16px 32px;\\n    margin-bottom: 0;\\n  }\\n\"])),function(_ref){var theme=_ref.theme;return theme.mediaQueries.sm;});var FilterContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  width: 100%;\\n  padding: 8px 0px;\\n\\n  \",\" {\\n    width: auto;\\n    padding: 0;\\n  }\\n\"])),function(_ref2){var theme=_ref2.theme;return theme.mediaQueries.sm;});var LabelWrapper=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  > \",\" {\\n    font-size: 12px;\\n  }\\n\"])),Text);var ControlStretch=styled(Flex)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  > div {\\n    flex: 1;\\n  }\\n\"])));var NUMBER_OF_POOLS_VISIBLE=12;var Pools=function Pools(){var location=useLocation();var _useTranslation=useTranslation(),t=_useTranslation.t;var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var _usePools=usePools(),poolsWithoutAutoVault=_usePools.pools,userDataLoaded=_usePools.userDataLoaded;var _useUserPoolStakedOnl=useUserPoolStakedOnly(),_useUserPoolStakedOnl2=_slicedToArray(_useUserPoolStakedOnl,2),stakedOnly=_useUserPoolStakedOnl2[0],setStakedOnly=_useUserPoolStakedOnl2[1];var _useUserPoolsViewMode=useUserPoolsViewMode(),_useUserPoolsViewMode2=_slicedToArray(_useUserPoolsViewMode,2),viewMode=_useUserPoolsViewMode2[0],setViewMode=_useUserPoolsViewMode2[1];var _useState=useState(NUMBER_OF_POOLS_VISIBLE),_useState2=_slicedToArray(_useState,2),numberOfPoolsVisible=_useState2[0],setNumberOfPoolsVisible=_useState2[1];var _useIntersectionObser=useIntersectionObserver(),observerRef=_useIntersectionObser.observerRef,isIntersecting=_useIntersectionObser.isIntersecting;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];var _useState5=useState('hot'),_useState6=_slicedToArray(_useState5,2),sortOption=_useState6[0],setSortOption=_useState6[1];var chosenPoolsLength=useRef(0);var _useCakeVault=useCakeVault(),_useCakeVault$userDat=_useCakeVault.userData,cakeAtLastUserAction=_useCakeVault$userDat.cakeAtLastUserAction,userShares=_useCakeVault$userDat.userShares,performanceFee=_useCakeVault.fees.performanceFee,pricePerFullShare=_useCakeVault.pricePerFullShare,totalCakeInVault=_useCakeVault.totalCakeInVault;var accountHasVaultShares=userShares&&userShares.gt(0);var performanceFeeAsDecimal=performanceFee&&performanceFee/100;var pools=useMemo(function(){var cakePool=poolsWithoutAutoVault.find(function(pool){return pool.sousId===0;});var cakeAutoVault=_objectSpread(_objectSpread({},cakePool),{},{isAutoVault:true});return[cakeAutoVault].concat(_toConsumableArray(poolsWithoutAutoVault));},[poolsWithoutAutoVault]);// TODO aren't arrays in dep array checked just by reference, i.e. it will rerender every time reference changes?\nvar _useMemo=useMemo(function(){return partition(pools,function(pool){return pool.isFinished;});},[pools]),_useMemo2=_slicedToArray(_useMemo,2),finishedPools=_useMemo2[0],openPools=_useMemo2[1];var stakedOnlyFinishedPools=useMemo(function(){return finishedPools.filter(function(pool){if(pool.isAutoVault){return accountHasVaultShares;}return pool.userData&&new BigNumber(pool.userData.stakedBalance).isGreaterThan(0);});},[finishedPools,accountHasVaultShares]);var stakedOnlyOpenPools=useMemo(function(){return openPools.filter(function(pool){if(pool.isAutoVault){return accountHasVaultShares;}return pool.userData&&new BigNumber(pool.userData.stakedBalance).isGreaterThan(0);});},[openPools,accountHasVaultShares]);var hasStakeInFinishedPools=stakedOnlyFinishedPools.length>0;usePollFarmsPublicData();useFetchCakeVault();useFetchPublicPoolsData();useFetchUserPools(account);useEffect(function(){if(isIntersecting){setNumberOfPoolsVisible(function(poolsCurrentlyVisible){if(poolsCurrentlyVisible<=chosenPoolsLength.current){return poolsCurrentlyVisible+NUMBER_OF_POOLS_VISIBLE;}return poolsCurrentlyVisible;});}},[isIntersecting]);var showFinishedPools=location.pathname.includes('history');var handleChangeSearchQuery=function handleChangeSearchQuery(event){setSearchQuery(event.target.value);};var handleSortOptionChange=function handleSortOptionChange(option){setSortOption(option.value);};var sortPools=function sortPools(poolsToSort){switch(sortOption){case'apr':// Ternary is needed to prevent pools without APR (like MIX) getting top spot\nreturn orderBy(poolsToSort,function(pool){return pool.apr?getAprData(pool,performanceFeeAsDecimal).apr:0;},'desc');case'earned':return orderBy(poolsToSort,function(pool){if(!pool.userData||!pool.earningTokenPrice){return 0;}return pool.isAutoVault?getCakeVaultEarnings(account,cakeAtLastUserAction,userShares,pricePerFullShare,pool.earningTokenPrice).autoUsdToDisplay:pool.userData.pendingReward.times(pool.earningTokenPrice).toNumber();},'desc');case'totalStaked':return orderBy(poolsToSort,function(pool){var _pool$totalStaked2;var totalStaked=Number.NaN;if(pool.isAutoVault){if(totalCakeInVault.isFinite()){totalStaked=+formatUnits(ethers.BigNumber.from(totalCakeInVault.toString()),pool.stakingToken.decimals);}}else if(pool.sousId===0){var _pool$totalStaked;if(((_pool$totalStaked=pool.totalStaked)===null||_pool$totalStaked===void 0?void 0:_pool$totalStaked.isFinite())&&totalCakeInVault.isFinite()){var manualCakeTotalMinusAutoVault=ethers.BigNumber.from(pool.totalStaked.toString()).sub(totalCakeInVault.toString());totalStaked=+formatUnits(manualCakeTotalMinusAutoVault,pool.stakingToken.decimals);}}else if((_pool$totalStaked2=pool.totalStaked)===null||_pool$totalStaked2===void 0?void 0:_pool$totalStaked2.isFinite()){totalStaked=+formatUnits(ethers.BigNumber.from(pool.totalStaked.toString()),pool.stakingToken.decimals);}return Number.isFinite(totalStaked)?totalStaked:0;},'desc');default:return poolsToSort;}};var chosenPools;if(showFinishedPools){chosenPools=stakedOnly?stakedOnlyFinishedPools:finishedPools;}else{chosenPools=stakedOnly?stakedOnlyOpenPools:openPools;}if(searchQuery){var lowercaseQuery=latinise(searchQuery.toLowerCase());chosenPools=chosenPools.filter(function(pool){return latinise(pool.earningToken.symbol.toLowerCase()).includes(lowercaseQuery);});}chosenPools=sortPools(chosenPools).slice(0,numberOfPoolsVisible);chosenPoolsLength.current=chosenPools.length;var cardLayout=/*#__PURE__*/_jsx(CardLayout,{children:chosenPools.map(function(pool){return pool.isAutoVault?/*#__PURE__*/_jsx(CakeVaultCard,{pool:pool,showStakedOnly:stakedOnly},\"auto-cake\"):/*#__PURE__*/_jsx(PoolCard,{pool:pool,account:account},pool.sousId);})});var tableLayout=/*#__PURE__*/_jsx(PoolsTable,{pools:chosenPools,account:account,userDataLoaded:userDataLoaded});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageHeader,{children:/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",flexDirection:['column',null,null,'row'],children:[/*#__PURE__*/_jsxs(Flex,{flex:\"1\",flexDirection:\"column\",mr:['8px',0],children:[/*#__PURE__*/_jsx(Heading,{as:\"h1\",scale:\"xxl\",color:\"secondary\",mb:\"24px\",children:t('Syrup Pools')}),/*#__PURE__*/_jsx(Heading,{scale:\"md\",color:\"text\",children:t('Just stake some tokens to earn.')}),/*#__PURE__*/_jsx(Heading,{scale:\"md\",color:\"text\",children:t('High APR, low risk.')})]}),/*#__PURE__*/_jsxs(Flex,{flex:\"1\",height:\"fit-content\",justifyContent:\"center\",alignItems:\"center\",mt:['24px',null,'0'],children:[/*#__PURE__*/_jsx(HelpButton,{}),/*#__PURE__*/_jsx(BountyCard,{})]})]})}),/*#__PURE__*/_jsxs(Page,{children:[/*#__PURE__*/_jsxs(PoolControls,{children:[/*#__PURE__*/_jsx(PoolTabButtons,{stakedOnly:stakedOnly,setStakedOnly:setStakedOnly,hasStakeInFinishedPools:hasStakeInFinishedPools,viewMode:viewMode,setViewMode:setViewMode}),/*#__PURE__*/_jsxs(FilterContainer,{children:[/*#__PURE__*/_jsxs(LabelWrapper,{children:[/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",bold:true,color:\"textSubtle\",textTransform:\"uppercase\",children:t('Sort by')}),/*#__PURE__*/_jsx(ControlStretch,{children:/*#__PURE__*/_jsx(Select,{options:[{label:t('Hot'),value:'hot'},{label:t('APR'),value:'apr'},{label:t('Earned'),value:'earned'},{label:t('Total staked'),value:'totalStaked'}],onOptionChange:handleSortOptionChange})})]}),/*#__PURE__*/_jsxs(LabelWrapper,{style:{marginLeft:16},children:[/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",bold:true,color:\"textSubtle\",textTransform:\"uppercase\",children:t('Search')}),/*#__PURE__*/_jsx(SearchInput,{onChange:handleChangeSearchQuery,placeholder:\"Search Pools\"})]})]})]}),showFinishedPools&&/*#__PURE__*/_jsx(Text,{fontSize:\"20px\",color:\"failure\",pb:\"32px\",children:t('These pools are no longer distributing rewards. Please unstake your tokens.')}),account&&!userDataLoaded&&stakedOnly&&/*#__PURE__*/_jsx(Flex,{justifyContent:\"center\",mb:\"4px\",children:/*#__PURE__*/_jsx(Loading,{})}),viewMode===ViewMode.CARD?cardLayout:tableLayout,/*#__PURE__*/_jsx(\"div\",{ref:observerRef}),/*#__PURE__*/_jsx(Image,{mx:\"auto\",mt:\"12px\",src:\"/images/decorations/3d-syrup-bunnies.png\",alt:\"Pancake illustration\",width:192,height:184.5})]})]});};export default Pools;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Pools/index.tsx"],"names":["React","useEffect","useMemo","useRef","useState","useLocation","styled","ethers","formatUnits","BigNumber","useWeb3React","Heading","Flex","Image","Text","orderBy","partition","useTranslation","useIntersectionObserver","useFetchPublicPoolsData","usePools","useFetchUserPools","useFetchCakeVault","useCakeVault","usePollFarmsPublicData","latinise","FlexLayout","Page","PageHeader","SearchInput","Select","useUserPoolStakedOnly","useUserPoolsViewMode","ViewMode","Loading","PoolCard","CakeVaultCard","PoolTabButtons","BountyCard","HelpButton","PoolsTable","getAprData","getCakeVaultEarnings","CardLayout","PoolControls","div","theme","mediaQueries","sm","FilterContainer","LabelWrapper","ControlStretch","NUMBER_OF_POOLS_VISIBLE","Pools","location","t","account","poolsWithoutAutoVault","pools","userDataLoaded","stakedOnly","setStakedOnly","viewMode","setViewMode","numberOfPoolsVisible","setNumberOfPoolsVisible","observerRef","isIntersecting","searchQuery","setSearchQuery","sortOption","setSortOption","chosenPoolsLength","userData","cakeAtLastUserAction","userShares","performanceFee","fees","pricePerFullShare","totalCakeInVault","accountHasVaultShares","gt","performanceFeeAsDecimal","cakePool","find","pool","sousId","cakeAutoVault","isAutoVault","isFinished","finishedPools","openPools","stakedOnlyFinishedPools","filter","stakedBalance","isGreaterThan","stakedOnlyOpenPools","hasStakeInFinishedPools","length","poolsCurrentlyVisible","current","showFinishedPools","pathname","includes","handleChangeSearchQuery","event","target","value","handleSortOptionChange","option","sortPools","poolsToSort","apr","earningTokenPrice","autoUsdToDisplay","pendingReward","times","toNumber","totalStaked","Number","NaN","isFinite","from","toString","stakingToken","decimals","manualCakeTotalMinusAutoVault","sub","chosenPools","lowercaseQuery","toLowerCase","earningToken","symbol","slice","cardLayout","map","tableLayout","label","marginLeft","CARD"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { ethers } from 'ethers'\nimport { formatUnits } from 'ethers/lib/utils'\nimport BigNumber from 'bignumber.js'\nimport { useWeb3React } from '@web3-react/core'\nimport { Heading, Flex, Image, Text } from '@pancakeswap/uikit'\nimport orderBy from 'lodash/orderBy'\nimport partition from 'lodash/partition'\nimport { useTranslation } from 'contexts/Localization'\nimport useIntersectionObserver from 'hooks/useIntersectionObserver'\nimport {\n  useFetchPublicPoolsData,\n  usePools,\n  useFetchUserPools,\n  useFetchCakeVault,\n  useCakeVault,\n} from 'state/pools/hooks'\nimport { usePollFarmsPublicData } from 'state/farms/hooks'\nimport { latinise } from 'utils/latinise'\nimport FlexLayout from 'components/Layout/Flex'\nimport Page from 'components/Layout/Page'\nimport PageHeader from 'components/PageHeader'\nimport SearchInput from 'components/SearchInput'\nimport Select, { OptionProps } from 'components/Select/Select'\nimport { DeserializedPool } from 'state/types'\nimport { useUserPoolStakedOnly, useUserPoolsViewMode } from 'state/user/hooks'\nimport { ViewMode } from 'state/user/actions'\nimport Loading from 'components/Loading'\nimport PoolCard from './components/PoolCard'\nimport CakeVaultCard from './components/CakeVaultCard'\nimport PoolTabButtons from './components/PoolTabButtons'\nimport BountyCard from './components/BountyCard'\nimport HelpButton from './components/HelpButton'\nimport PoolsTable from './components/PoolsTable/PoolsTable'\nimport { getAprData, getCakeVaultEarnings } from './helpers'\n\nconst CardLayout = styled(FlexLayout)`\n  justify-content: center;\n`\n\nconst PoolControls = styled.div`\n  display: flex;\n  width: 100%;\n  align-items: center;\n  position: relative;\n\n  justify-content: space-between;\n  flex-direction: column;\n  margin-bottom: 32px;\n\n  ${({ theme }) => theme.mediaQueries.sm} {\n    flex-direction: row;\n    flex-wrap: wrap;\n    padding: 16px 32px;\n    margin-bottom: 0;\n  }\n`\n\nconst FilterContainer = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding: 8px 0px;\n\n  ${({ theme }) => theme.mediaQueries.sm} {\n    width: auto;\n    padding: 0;\n  }\n`\n\nconst LabelWrapper = styled.div`\n  > ${Text} {\n    font-size: 12px;\n  }\n`\n\nconst ControlStretch = styled(Flex)`\n  > div {\n    flex: 1;\n  }\n`\n\nconst NUMBER_OF_POOLS_VISIBLE = 12\n\nconst Pools: React.FC = () => {\n  const location = useLocation()\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const { pools: poolsWithoutAutoVault, userDataLoaded } = usePools()\n  const [stakedOnly, setStakedOnly] = useUserPoolStakedOnly()\n  const [viewMode, setViewMode] = useUserPoolsViewMode()\n  const [numberOfPoolsVisible, setNumberOfPoolsVisible] = useState(NUMBER_OF_POOLS_VISIBLE)\n  const { observerRef, isIntersecting } = useIntersectionObserver()\n  const [searchQuery, setSearchQuery] = useState('')\n  const [sortOption, setSortOption] = useState('hot')\n  const chosenPoolsLength = useRef(0)\n  const {\n    userData: { cakeAtLastUserAction, userShares },\n    fees: { performanceFee },\n    pricePerFullShare,\n    totalCakeInVault,\n  } = useCakeVault()\n  const accountHasVaultShares = userShares && userShares.gt(0)\n  const performanceFeeAsDecimal = performanceFee && performanceFee / 100\n\n  const pools = useMemo(() => {\n    const cakePool = poolsWithoutAutoVault.find((pool) => pool.sousId === 0)\n    const cakeAutoVault = { ...cakePool, isAutoVault: true }\n    return [cakeAutoVault, ...poolsWithoutAutoVault]\n  }, [poolsWithoutAutoVault])\n\n  // TODO aren't arrays in dep array checked just by reference, i.e. it will rerender every time reference changes?\n  const [finishedPools, openPools] = useMemo(() => partition(pools, (pool) => pool.isFinished), [pools])\n  const stakedOnlyFinishedPools = useMemo(\n    () =>\n      finishedPools.filter((pool) => {\n        if (pool.isAutoVault) {\n          return accountHasVaultShares\n        }\n        return pool.userData && new BigNumber(pool.userData.stakedBalance).isGreaterThan(0)\n      }),\n    [finishedPools, accountHasVaultShares],\n  )\n  const stakedOnlyOpenPools = useMemo(\n    () =>\n      openPools.filter((pool) => {\n        if (pool.isAutoVault) {\n          return accountHasVaultShares\n        }\n        return pool.userData && new BigNumber(pool.userData.stakedBalance).isGreaterThan(0)\n      }),\n    [openPools, accountHasVaultShares],\n  )\n  const hasStakeInFinishedPools = stakedOnlyFinishedPools.length > 0\n\n  usePollFarmsPublicData()\n  useFetchCakeVault()\n  useFetchPublicPoolsData()\n  useFetchUserPools(account)\n\n  useEffect(() => {\n    if (isIntersecting) {\n      setNumberOfPoolsVisible((poolsCurrentlyVisible) => {\n        if (poolsCurrentlyVisible <= chosenPoolsLength.current) {\n          return poolsCurrentlyVisible + NUMBER_OF_POOLS_VISIBLE\n        }\n        return poolsCurrentlyVisible\n      })\n    }\n  }, [isIntersecting])\n\n  const showFinishedPools = location.pathname.includes('history')\n\n  const handleChangeSearchQuery = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchQuery(event.target.value)\n  }\n\n  const handleSortOptionChange = (option: OptionProps): void => {\n    setSortOption(option.value)\n  }\n\n  const sortPools = (poolsToSort: DeserializedPool[]) => {\n    switch (sortOption) {\n      case 'apr':\n        // Ternary is needed to prevent pools without APR (like MIX) getting top spot\n        return orderBy(\n          poolsToSort,\n          (pool: DeserializedPool) => (pool.apr ? getAprData(pool, performanceFeeAsDecimal).apr : 0),\n          'desc',\n        )\n      case 'earned':\n        return orderBy(\n          poolsToSort,\n          (pool: DeserializedPool) => {\n            if (!pool.userData || !pool.earningTokenPrice) {\n              return 0\n            }\n            return pool.isAutoVault\n              ? getCakeVaultEarnings(\n                  account,\n                  cakeAtLastUserAction,\n                  userShares,\n                  pricePerFullShare,\n                  pool.earningTokenPrice,\n                ).autoUsdToDisplay\n              : pool.userData.pendingReward.times(pool.earningTokenPrice).toNumber()\n          },\n          'desc',\n        )\n      case 'totalStaked':\n        return orderBy(\n          poolsToSort,\n          (pool: DeserializedPool) => {\n            let totalStaked = Number.NaN\n            if (pool.isAutoVault) {\n              if (totalCakeInVault.isFinite()) {\n                totalStaked = +formatUnits(\n                  ethers.BigNumber.from(totalCakeInVault.toString()),\n                  pool.stakingToken.decimals,\n                )\n              }\n            } else if (pool.sousId === 0) {\n              if (pool.totalStaked?.isFinite() && totalCakeInVault.isFinite()) {\n                const manualCakeTotalMinusAutoVault = ethers.BigNumber.from(pool.totalStaked.toString()).sub(\n                  totalCakeInVault.toString(),\n                )\n                totalStaked = +formatUnits(manualCakeTotalMinusAutoVault, pool.stakingToken.decimals)\n              }\n            } else if (pool.totalStaked?.isFinite()) {\n              totalStaked = +formatUnits(ethers.BigNumber.from(pool.totalStaked.toString()), pool.stakingToken.decimals)\n            }\n            return Number.isFinite(totalStaked) ? totalStaked : 0\n          },\n          'desc',\n        )\n      default:\n        return poolsToSort\n    }\n  }\n\n  let chosenPools\n  if (showFinishedPools) {\n    chosenPools = stakedOnly ? stakedOnlyFinishedPools : finishedPools\n  } else {\n    chosenPools = stakedOnly ? stakedOnlyOpenPools : openPools\n  }\n\n  if (searchQuery) {\n    const lowercaseQuery = latinise(searchQuery.toLowerCase())\n    chosenPools = chosenPools.filter((pool) =>\n      latinise(pool.earningToken.symbol.toLowerCase()).includes(lowercaseQuery),\n    )\n  }\n\n  chosenPools = sortPools(chosenPools).slice(0, numberOfPoolsVisible)\n  chosenPoolsLength.current = chosenPools.length\n\n  const cardLayout = (\n    <CardLayout>\n      {chosenPools.map((pool) =>\n        pool.isAutoVault ? (\n          <CakeVaultCard key=\"auto-cake\" pool={pool} showStakedOnly={stakedOnly} />\n        ) : (\n          <PoolCard key={pool.sousId} pool={pool} account={account} />\n        ),\n      )}\n    </CardLayout>\n  )\n\n  const tableLayout = <PoolsTable pools={chosenPools} account={account} userDataLoaded={userDataLoaded} />\n\n  return (\n    <>\n      <PageHeader>\n        <Flex justifyContent=\"space-between\" flexDirection={['column', null, null, 'row']}>\n          <Flex flex=\"1\" flexDirection=\"column\" mr={['8px', 0]}>\n            <Heading as=\"h1\" scale=\"xxl\" color=\"secondary\" mb=\"24px\">\n              {t('Syrup Pools')}\n            </Heading>\n            <Heading scale=\"md\" color=\"text\">\n              {t('Just stake some tokens to earn.')}\n            </Heading>\n            <Heading scale=\"md\" color=\"text\">\n              {t('High APR, low risk.')}\n            </Heading>\n          </Flex>\n          <Flex flex=\"1\" height=\"fit-content\" justifyContent=\"center\" alignItems=\"center\" mt={['24px', null, '0']}>\n            <HelpButton />\n            <BountyCard />\n          </Flex>\n        </Flex>\n      </PageHeader>\n      <Page>\n        <PoolControls>\n          <PoolTabButtons\n            stakedOnly={stakedOnly}\n            setStakedOnly={setStakedOnly}\n            hasStakeInFinishedPools={hasStakeInFinishedPools}\n            viewMode={viewMode}\n            setViewMode={setViewMode}\n          />\n          <FilterContainer>\n            <LabelWrapper>\n              <Text fontSize=\"12px\" bold color=\"textSubtle\" textTransform=\"uppercase\">\n                {t('Sort by')}\n              </Text>\n              <ControlStretch>\n                <Select\n                  options={[\n                    {\n                      label: t('Hot'),\n                      value: 'hot',\n                    },\n                    {\n                      label: t('APR'),\n                      value: 'apr',\n                    },\n                    {\n                      label: t('Earned'),\n                      value: 'earned',\n                    },\n                    {\n                      label: t('Total staked'),\n                      value: 'totalStaked',\n                    },\n                  ]}\n                  onOptionChange={handleSortOptionChange}\n                />\n              </ControlStretch>\n            </LabelWrapper>\n            <LabelWrapper style={{ marginLeft: 16 }}>\n              <Text fontSize=\"12px\" bold color=\"textSubtle\" textTransform=\"uppercase\">\n                {t('Search')}\n              </Text>\n              <SearchInput onChange={handleChangeSearchQuery} placeholder=\"Search Pools\" />\n            </LabelWrapper>\n          </FilterContainer>\n        </PoolControls>\n        {showFinishedPools && (\n          <Text fontSize=\"20px\" color=\"failure\" pb=\"32px\">\n            {t('These pools are no longer distributing rewards. Please unstake your tokens.')}\n          </Text>\n        )}\n        {account && !userDataLoaded && stakedOnly && (\n          <Flex justifyContent=\"center\" mb=\"4px\">\n            <Loading />\n          </Flex>\n        )}\n        {viewMode === ViewMode.CARD ? cardLayout : tableLayout}\n        <div ref={observerRef} />\n        <Image\n          mx=\"auto\"\n          mt=\"12px\"\n          src=\"/images/decorations/3d-syrup-bunnies.png\"\n          alt=\"Pancake illustration\"\n          width={192}\n          height={184.5}\n        />\n      </Page>\n    </>\n  )\n}\n\nexport default Pools\n"]},"metadata":{},"sourceType":"module"}