{"ast":null,"code":"import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{ChainId,currencyEquals,JSBI,Price}from'@pancakeswap/sdk';import{useMemo}from'react';import useActiveWeb3React from'hooks/useActiveWeb3React';import tokens,{mainnetTokens}from'config/constants/tokens';import{PairState,usePairs}from'./usePairs';import{wrappedCurrency}from'../utils/wrappedCurrency';var BUSD_MAINNET=mainnetTokens.busd;var WBNB=tokens.wbnb;/**\n * Returns the price in BUSD of the input currency\n * @param currency currency to compute the BUSD price of\n */export default function useBUSDPrice(currency){var _useActiveWeb3React=useActiveWeb3React(),chainId=_useActiveWeb3React.chainId;var wrapped=wrappedCurrency(currency,chainId);var tokenPairs=useMemo(function(){return[[chainId&&wrapped&&currencyEquals(WBNB,wrapped)?undefined:currency,chainId?WBNB:undefined],[(wrapped===null||wrapped===void 0?void 0:wrapped.equals(BUSD_MAINNET))?undefined:wrapped,chainId===ChainId.MAINNET?BUSD_MAINNET:undefined],[chainId?WBNB:undefined,chainId===ChainId.MAINNET?BUSD_MAINNET:undefined]];},[chainId,currency,wrapped]);var _usePairs=usePairs(tokenPairs),_usePairs2=_slicedToArray(_usePairs,3),_usePairs2$=_slicedToArray(_usePairs2[0],2),ethPairState=_usePairs2$[0],ethPair=_usePairs2$[1],_usePairs2$2=_slicedToArray(_usePairs2[1],2),busdPairState=_usePairs2$2[0],busdPair=_usePairs2$2[1],_usePairs2$3=_slicedToArray(_usePairs2[2],2),busdEthPairState=_usePairs2$3[0],busdEthPair=_usePairs2$3[1];return useMemo(function(){if(!currency||!wrapped||!chainId){return undefined;}// handle weth/eth\nif(wrapped.equals(WBNB)){if(busdPair){var price=busdPair.priceOf(WBNB);return new Price(currency,BUSD_MAINNET,price.denominator,price.numerator);}return undefined;}// handle busd\nif(wrapped.equals(BUSD_MAINNET)){return new Price(BUSD_MAINNET,BUSD_MAINNET,'1','1');}var ethPairETHAmount=ethPair===null||ethPair===void 0?void 0:ethPair.reserveOf(WBNB);var ethPairETHBUSDValue=ethPairETHAmount&&busdEthPair?busdEthPair.priceOf(WBNB).quote(ethPairETHAmount).raw:JSBI.BigInt(0);// all other tokens\n// first try the busd pair\nif(busdPairState===PairState.EXISTS&&busdPair&&busdPair.reserveOf(BUSD_MAINNET).greaterThan(ethPairETHBUSDValue)){var _price=busdPair.priceOf(wrapped);return new Price(currency,BUSD_MAINNET,_price.denominator,_price.numerator);}if(ethPairState===PairState.EXISTS&&ethPair&&busdEthPairState===PairState.EXISTS&&busdEthPair){if(busdEthPair.reserveOf(BUSD_MAINNET).greaterThan('0')&&ethPair.reserveOf(WBNB).greaterThan('0')){var ethBusdPrice=busdEthPair.priceOf(BUSD_MAINNET);var currencyEthPrice=ethPair.priceOf(WBNB);var busdPrice=ethBusdPrice.multiply(currencyEthPrice).invert();return new Price(currency,BUSD_MAINNET,busdPrice.denominator,busdPrice.numerator);}}return undefined;},[chainId,currency,ethPair,ethPairState,busdEthPair,busdEthPairState,busdPair,busdPairState,wrapped]);}export var useCakeBusdPrice=function useCakeBusdPrice(){var cakeBusdPrice=useBUSDPrice(tokens.cake);return cakeBusdPrice;};export var useBNBBusdPrice=function useBNBBusdPrice(){var bnbBusdPrice=useBUSDPrice(tokens.wbnb);return bnbBusdPrice;};","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/hooks/useBUSDPrice.ts"],"names":["ChainId","currencyEquals","JSBI","Price","useMemo","useActiveWeb3React","tokens","mainnetTokens","PairState","usePairs","wrappedCurrency","BUSD_MAINNET","busd","WBNB","wbnb","useBUSDPrice","currency","chainId","wrapped","tokenPairs","undefined","equals","MAINNET","ethPairState","ethPair","busdPairState","busdPair","busdEthPairState","busdEthPair","price","priceOf","denominator","numerator","ethPairETHAmount","reserveOf","ethPairETHBUSDValue","quote","raw","BigInt","EXISTS","greaterThan","ethBusdPrice","currencyEthPrice","busdPrice","multiply","invert","useCakeBusdPrice","cakeBusdPrice","cake","useBNBBusdPrice","bnbBusdPrice"],"mappings":"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","sourcesContent":["import { ChainId, Currency, currencyEquals, JSBI, Price } from '@pancakeswap/sdk'\nimport { useMemo } from 'react'\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\nimport tokens, { mainnetTokens } from 'config/constants/tokens'\nimport { PairState, usePairs } from './usePairs'\nimport { wrappedCurrency } from '../utils/wrappedCurrency'\n\nconst BUSD_MAINNET = mainnetTokens.busd\nconst { wbnb: WBNB } = tokens\n\n/**\n * Returns the price in BUSD of the input currency\n * @param currency currency to compute the BUSD price of\n */\nexport default function useBUSDPrice(currency?: Currency): Price | undefined {\n  const { chainId } = useActiveWeb3React()\n  const wrapped = wrappedCurrency(currency, chainId)\n  const tokenPairs: [Currency | undefined, Currency | undefined][] = useMemo(\n    () => [\n      [chainId && wrapped && currencyEquals(WBNB, wrapped) ? undefined : currency, chainId ? WBNB : undefined],\n      [wrapped?.equals(BUSD_MAINNET) ? undefined : wrapped, chainId === ChainId.MAINNET ? BUSD_MAINNET : undefined],\n      [chainId ? WBNB : undefined, chainId === ChainId.MAINNET ? BUSD_MAINNET : undefined],\n    ],\n    [chainId, currency, wrapped],\n  )\n  const [[ethPairState, ethPair], [busdPairState, busdPair], [busdEthPairState, busdEthPair]] = usePairs(tokenPairs)\n\n  return useMemo(() => {\n    if (!currency || !wrapped || !chainId) {\n      return undefined\n    }\n    // handle weth/eth\n    if (wrapped.equals(WBNB)) {\n      if (busdPair) {\n        const price = busdPair.priceOf(WBNB)\n        return new Price(currency, BUSD_MAINNET, price.denominator, price.numerator)\n      }\n      return undefined\n    }\n    // handle busd\n    if (wrapped.equals(BUSD_MAINNET)) {\n      return new Price(BUSD_MAINNET, BUSD_MAINNET, '1', '1')\n    }\n\n    const ethPairETHAmount = ethPair?.reserveOf(WBNB)\n    const ethPairETHBUSDValue: JSBI =\n      ethPairETHAmount && busdEthPair ? busdEthPair.priceOf(WBNB).quote(ethPairETHAmount).raw : JSBI.BigInt(0)\n\n    // all other tokens\n    // first try the busd pair\n    if (\n      busdPairState === PairState.EXISTS &&\n      busdPair &&\n      busdPair.reserveOf(BUSD_MAINNET).greaterThan(ethPairETHBUSDValue)\n    ) {\n      const price = busdPair.priceOf(wrapped)\n      return new Price(currency, BUSD_MAINNET, price.denominator, price.numerator)\n    }\n    if (ethPairState === PairState.EXISTS && ethPair && busdEthPairState === PairState.EXISTS && busdEthPair) {\n      if (busdEthPair.reserveOf(BUSD_MAINNET).greaterThan('0') && ethPair.reserveOf(WBNB).greaterThan('0')) {\n        const ethBusdPrice = busdEthPair.priceOf(BUSD_MAINNET)\n        const currencyEthPrice = ethPair.priceOf(WBNB)\n        const busdPrice = ethBusdPrice.multiply(currencyEthPrice).invert()\n        return new Price(currency, BUSD_MAINNET, busdPrice.denominator, busdPrice.numerator)\n      }\n    }\n\n    return undefined\n  }, [chainId, currency, ethPair, ethPairState, busdEthPair, busdEthPairState, busdPair, busdPairState, wrapped])\n}\n\nexport const useCakeBusdPrice = (): Price | undefined => {\n  const cakeBusdPrice = useBUSDPrice(tokens.cake)\n  return cakeBusdPrice\n}\n\nexport const useBNBBusdPrice = (): Price | undefined => {\n  const bnbBusdPrice = useBUSDPrice(tokens.wbnb)\n  return bnbBusdPrice\n}\n"]},"metadata":{},"sourceType":"module"}