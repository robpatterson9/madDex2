{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Volumes/evo970/lou/madDex-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useEffect,useState}from'react';import{useWeb3React}from'@web3-react/core';import styled from'styled-components';import{ModalContainer,ModalBody,ModalTitle,ModalHeader,Text,Heading,ModalCloseButton,Button,AutoRenewIcon}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import{getAllV1History}from'./helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Modal=styled(ModalContainer)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  overflow: visible;\\n\"])));var BunnyDecoration=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: -116px; // line up bunny at the top of the modal\\n  left: 0px;\\n  text-align: center;\\n  width: 100%;\\n\"])));var CollectRoundWinningsModal=function CollectRoundWinningsModal(_ref){var onDismiss=_ref.onDismiss;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFetching=_useState2[0],setIsFetching=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),history=_useState4[0],setHistory=_useState4[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var handleClick=function handleClick(){var header=['Round','Result','Your Position','Bet Amount','Transaction','Claimed Transaction','Lock Price','Close Price','Total Bets','Total Amount','Round Failed'].join(',');var rows=history.reduce(function(accum,bet){return[].concat(_toConsumableArray(accum),[[bet.round.epoch,bet.round.position,bet.position,bet.amount,bet.hash,bet.claimedHash||'',bet.round.lockPrice,bet.round.closePrice,bet.round.totalBets,bet.round.totalAmount,bet.round.failed].join(',')]);},[]);var anchor=document.createElement('a');var blob=new Blob([\"\".concat(header,\"\\n\").concat(rows.join('\\n'))],{type:'text/csv;charset=utf-8;'});anchor.href=URL.createObjectURL(blob);anchor.target='_blank';anchor.download='pancakeswap-prediction-v1-history.csv';document.body.appendChild(anchor);anchor.click();document.body.removeChild(anchor);};useEffect(function(){var fetchAllHistory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsFetching(true);_context.prev=1;_context.next=4;return getAllV1History({user:account.toLowerCase()});case 4:response=_context.sent;setHistory(response);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error('Unable to fetch history',_context.t0);case 11:_context.prev=11;setIsFetching(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,8,11,14]]);}));return function fetchAllHistory(){return _ref2.apply(this,arguments);};}();if(account){fetchAllHistory();}},[account,setHistory,setIsFetching]);return/*#__PURE__*/_jsxs(Modal,{minWidth:\"288px\",position:\"relative\",mt:\"124px\",children:[/*#__PURE__*/_jsx(BunnyDecoration,{children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/decorations/prize-bunny.png\",alt:\"bunny decoration\",height:\"124px\",width:\"168px\"})}),/*#__PURE__*/_jsxs(ModalHeader,{children:[/*#__PURE__*/_jsx(ModalTitle,{children:/*#__PURE__*/_jsx(Heading,{children:t('Nothing to Collect')})}),/*#__PURE__*/_jsx(ModalCloseButton,{onDismiss:onDismiss})]}),/*#__PURE__*/_jsxs(ModalBody,{p:\"24px\",children:[/*#__PURE__*/_jsx(Text,{as:\"p\",fontSize:\"14px\",children:t('You have no unclaimed v0.1 prizes.')}),/*#__PURE__*/_jsx(Text,{as:\"p\",fontSize:\"14px\",mb:\"24px\",children:t('Download your v0.1 Prediction history below.')}),/*#__PURE__*/_jsx(Button,{onClick:handleClick,isLoading:isFetching,endIcon:isFetching?/*#__PURE__*/_jsx(AutoRenewIcon,{spin:true,width:\"24px\",color:\"white\"}):null,children:t('Download .CSV')})]})]});};export default CollectRoundWinningsModal;","map":{"version":3,"sources":["/Volumes/evo970/lou/madDex-master/src/views/Predictions/components/v1/NothingToClaimModal.tsx"],"names":["React","useEffect","useState","useWeb3React","styled","ModalContainer","ModalBody","ModalTitle","ModalHeader","Text","Heading","ModalCloseButton","Button","AutoRenewIcon","useTranslation","getAllV1History","Modal","BunnyDecoration","div","CollectRoundWinningsModal","onDismiss","isFetching","setIsFetching","history","setHistory","t","account","handleClick","header","join","rows","reduce","accum","bet","round","epoch","position","amount","hash","claimedHash","lockPrice","closePrice","totalBets","totalAmount","failed","anchor","document","createElement","blob","Blob","type","href","URL","createObjectURL","target","download","body","appendChild","click","removeChild","fetchAllHistory","user","toLowerCase","response","console","error"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport styled from 'styled-components'\nimport {\n  ModalContainer,\n  ModalBody,\n  ModalTitle,\n  ModalHeader,\n  InjectedModalProps,\n  Text,\n  Heading,\n  ModalCloseButton,\n  Button,\n  AutoRenewIcon,\n} from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { getAllV1History } from './helpers'\n\nconst Modal = styled(ModalContainer)`\n  overflow: visible;\n`\n\nconst BunnyDecoration = styled.div`\n  position: absolute;\n  top: -116px; // line up bunny at the top of the modal\n  left: 0px;\n  text-align: center;\n  width: 100%;\n`\n\nconst CollectRoundWinningsModal: React.FC<InjectedModalProps> = ({ onDismiss }) => {\n  const [isFetching, setIsFetching] = useState(false)\n  const [history, setHistory] = useState([])\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n\n  const handleClick = () => {\n    const header = [\n      'Round',\n      'Result',\n      'Your Position',\n      'Bet Amount',\n      'Transaction',\n      'Claimed Transaction',\n      'Lock Price',\n      'Close Price',\n      'Total Bets',\n      'Total Amount',\n      'Round Failed',\n    ].join(',')\n\n    const rows = history.reduce((accum, bet) => {\n      return [\n        ...accum,\n        [\n          bet.round.epoch,\n          bet.round.position,\n          bet.position,\n          bet.amount,\n          bet.hash,\n          bet.claimedHash || '',\n          bet.round.lockPrice,\n          bet.round.closePrice,\n          bet.round.totalBets,\n          bet.round.totalAmount,\n          bet.round.failed,\n        ].join(','),\n      ]\n    }, [])\n\n    const anchor = document.createElement('a')\n    const blob = new Blob([`${header}\\n${rows.join('\\n')}`], {\n      type: 'text/csv;charset=utf-8;',\n    })\n\n    anchor.href = URL.createObjectURL(blob)\n    anchor.target = '_blank'\n    anchor.download = 'pancakeswap-prediction-v1-history.csv'\n\n    document.body.appendChild(anchor)\n    anchor.click()\n    document.body.removeChild(anchor)\n  }\n\n  useEffect(() => {\n    const fetchAllHistory = async () => {\n      setIsFetching(true)\n\n      try {\n        const response = await getAllV1History({ user: account.toLowerCase() })\n        setHistory(response)\n      } catch (error) {\n        console.error('Unable to fetch history', error)\n      } finally {\n        setIsFetching(false)\n      }\n    }\n\n    if (account) {\n      fetchAllHistory()\n    }\n  }, [account, setHistory, setIsFetching])\n\n  return (\n    <Modal minWidth=\"288px\" position=\"relative\" mt=\"124px\">\n      <BunnyDecoration>\n        <img src=\"/images/decorations/prize-bunny.png\" alt=\"bunny decoration\" height=\"124px\" width=\"168px\" />\n      </BunnyDecoration>\n      <ModalHeader>\n        <ModalTitle>\n          <Heading>{t('Nothing to Collect')}</Heading>\n        </ModalTitle>\n        <ModalCloseButton onDismiss={onDismiss} />\n      </ModalHeader>\n      <ModalBody p=\"24px\">\n        <Text as=\"p\" fontSize=\"14px\">\n          {t('You have no unclaimed v0.1 prizes.')}\n        </Text>\n        <Text as=\"p\" fontSize=\"14px\" mb=\"24px\">\n          {t('Download your v0.1 Prediction history below.')}\n        </Text>\n        <Button\n          onClick={handleClick}\n          isLoading={isFetching}\n          endIcon={isFetching ? <AutoRenewIcon spin width=\"24px\" color=\"white\" /> : null}\n        >\n          {t('Download .CSV')}\n        </Button>\n      </ModalBody>\n    </Modal>\n  )\n}\n\nexport default CollectRoundWinningsModal\n"]},"metadata":{},"sourceType":"module"}